!function(t){function e(e){for(var n,o,a=e[0],r=e[1],s=0,c=[];s<a.length;s++)o=a[s],i[o]&&c.push(i[o][0]),i[o]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);for(l&&l(e);c.length;)c.shift()()}var n={},i={0:0};function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.e=function(){return Promise.resolve()},o.m=t,o.c=n,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var a=window.webpackJsonp=window.webpackJsonp||[],r=a.push.bind(a);a.push=e,a=a.slice();for(var s=0;s<a.length;s++)e(a[s]);var l=r;o(o.s=24)}([function(t,e,n){(function(e){t.exports=e.$=n(28)}).call(this,n(11))},function(t,e,n){var i,o;i=[n(7),n(3)],void 0===(o=function(t,e){"use strict";return new t.Wreqr.EventAggregator}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o;void 0===(o=function(){return{getParameterByName:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))},getHashParameterByName:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(location.hash);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))},readCookie:function(t){if("ESESSIONID"==t)return i("div[id^='MayankTestId_']").attr("id").split("_")[1];for(var e=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return null},setCookie:function(t,e,n){var i,o=new Date;return o.setTime(o.getTime()+n),i="; expires="+o.toGMTString(),document.cookie=t+"="+e+i+"; path=/",null},inArrayCaseInsensitive:function(t,e){var n=-1;return i.each(e,function(e,i){-1==n&&i.toLowerCase()==t.toLowerCase()&&(n=e)}),n},updateQueryStringWithHashSupport:function(t,e,n){var i=new RegExp("([?|&])"+e+"=.*?(&|#|$)","i");if(t.match(i))return t.replace(i,"$1"+e+"="+n+"$2");var o="",a=-1!==t.indexOf("?")?"&":"?";return-1!==t.indexOf("#")&&(o=t.replace(/.*#/,"#"),t=t.replace(/#.*/,"")),t+a+e+"="+n+o},updateQueryStringWithOutHashSupport:function(t,e,n){t=t.replace(/#/,"");var i=new RegExp("([?|&])"+e+"=.*?(&|#|$)","i");if(t.match(i))return t.replace(i,"$1"+e+"="+n+"$2");var o=-1!==t.indexOf("?")?"&":"?";return-1!==t.indexOf("#")&&(t=t.replace(/#.*/,"")),t+o+e+"="+n}}}.call(e,n,e,t))||(t.exports=o)}).call(this,n(0))},function(t,e,n){(function(){var e=n(7),i=n(5);
/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */
e.ChildViewContainer=function(t,e){var n=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(n.prototype,{add:function(t,e){var n=t.cid;this._views[n]=t,t.model&&(this._indexByModel[t.model.cid]=n),e&&(this._indexByCustom[e]=n),this._updateLength()},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var n=t.cid;t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){if(t===n)return delete this._indexByCustom[e],!0},this),delete this._views[n],this._updateLength()},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,n){e.each(this._views,function(i){e.isFunction(i[t])&&i[t].apply(i,n||[])})},_updateLength:function(){this.length=e.size(this._views)}});return e.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"],function(t){n.prototype[t]=function(){var n=[e.values(this._views)].concat(e.toArray(arguments));return e[t].apply(e,n)}}),n}(0,i),e.Wreqr=function(t,e,n){"use strict";var i,o={};return o.Handlers=function(t,e){var n=function(t){this.options=t,this._wreqrHandlers={},e.isFunction(this.initialize)&&this.initialize(t)};return n.extend=t.Model.extend,e.extend(n.prototype,t.Events,{setHandlers:function(t){e.each(t,function(t,n){var i=null;e.isObject(t)&&!e.isFunction(t)&&(i=t.context,t=t.callback),this.setHandler(n,t,i)},this)},setHandler:function(t,e,n){var i={callback:e,context:n};this._wreqrHandlers[t]=i,this.trigger("handler:add",t,e,n)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(!e)throw new Error("Handler not found for '"+t+"'");return function(){var t=Array.prototype.slice.apply(arguments);return e.callback.apply(e.context,t)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(t,n),o.CommandStorage=(i=function(t){this.options=t,this._commands={},n.isFunction(this.initialize)&&this.initialize(t)},n.extend(i.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){this.getCommands(t).instances.push(e)},clearCommands:function(t){this.getCommands(t).instances=[]}}),i),o.Commands=function(t){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,n)},execute:function(t,e){t=arguments[0],e=Array.prototype.slice.call(arguments,1),this.hasHandler(t)?this.getHandler(t).apply(this,e):this.storage.addCommand(t,e)},_executeCommands:function(t,e,i){var o=this.storage.getCommands(t);n.each(o.instances,function(t){e.apply(i,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var e,i=t.storageType||this.storageType;e=n.isFunction(i)?new i:i,this.storage=e}})}(o),o.RequestResponse=function(t){return t.Handlers.extend({request:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return this.getHandler(t).apply(this,e)}})}(o),o.EventAggregator=function(t,e){var n=function(){};return n.extend=t.Model.extend,e.extend(n.prototype,t.Events),n}(t,n),o}(e,e.Marionette,i);!function(t,e,n){"use strict";var i={};e.Marionette=i,i.$=e.$;var o=Array.prototype.slice;function a(t){return o.call(t)}function r(t,e){var n=new Error(t);throw n.name=e||"Error",n}i.extend=e.Model.extend,i.getOption=function(t,e){if(t&&e)return t.options&&e in t.options&&void 0!==t.options[e]?t.options[e]:t[e]},i.triggerMethod=function(){var t=/(^|:)(\w)/gi;function e(t,e,n){return n.toUpperCase()}return function(i){var o=this["on"+i.replace(t,e)];if(n.isFunction(this.trigger)&&this.trigger.apply(this,arguments),n.isFunction(o))return o.apply(this,n.tail(arguments))}}(),i.MonitorDOMRefresh=function(){function t(t){t._isShown&&t._isRendered&&n.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}return function(e){e.listenTo(e,"show",function(){!function(e){e._isShown=!0,t(e)}(e)}),e.listenTo(e,"render",function(){!function(e){e._isRendered=!0,t(e)}(e)})}}(),function(t){function e(t,e,i,o){var a=o.split(/\s+/);n.each(a,function(n){var o=t[n];o||r("Method '"+n+"' was configured as an event handler, but does not exist."),t.listenTo(e,i,o,t)})}function i(t,e,n,i){t.listenTo(e,n,i,t)}function o(t,e,i,o){var a=o.split(/\s+/);n.each(a,function(n){var o=t[n];t.stopListening(e,i,o,t)})}function a(t,e,n,i){t.stopListening(e,n,i,t)}function s(t,e,i,o,a){e&&i&&(n.isFunction(i)&&(i=i.call(t)),n.each(i,function(i,r){n.isFunction(i)?o(t,e,r,i):a(t,e,r,i)}))}t.bindEntityEvents=function(t,n,o){s(t,n,o,i,e)},t.unbindEntityEvents=function(t,e,n){s(t,e,n,a,o)}}(i),i.Callbacks=function(){this._deferred=i.$.Deferred(),this._callbacks=[]},n.extend(i.Callbacks.prototype,{add:function(t,e){this._callbacks.push({cb:t,ctx:e}),this._deferred.done(function(n,i){e&&(n=e),t.call(n,i)})},run:function(t,e){this._deferred.resolve(e,t)},reset:function(){var t=this._callbacks;this._deferred=i.$.Deferred(),this._callbacks=[],n.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),i.Controller=function(t){this.triggerMethod=i.triggerMethod,this.options=t||{},n.isFunction(this.initialize)&&this.initialize(this.options)},i.Controller.extend=i.extend,n.extend(i.Controller.prototype,e.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),i.Region=function(t){if(this.options=t||{},this.el=i.getOption(this,"el"),!this.el){var e=new Error("An 'el' must be specified for a region.");throw e.name="NoElError",e}if(this.initialize){var n=Array.prototype.slice.apply(arguments);this.initialize.apply(this,n)}},n.extend(i.Region,{buildRegion:function(t,e){var i,o,a="string"==typeof t,r="string"==typeof t.selector,s=void 0===t.regionType,l="function"==typeof t;if(!l&&!a&&!r)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");a&&(i=t),t.selector&&(i=t.selector),l&&(o=t),!l&&s&&(o=e),t.regionType&&(o=t.regionType);var c=new o({el:i});return t.parentEl&&(c.getEl=function(e){var i=t.parentEl;return n.isFunction(i)&&(i=i()),i.find(e)}),c}}),n.extend(i.Region.prototype,e.Events,{show:function(t){this.ensureEl();var e=t.isClosed||n.isUndefined(t.$el),o=t!==this.currentView;o&&this.close(),t.render(),(o||e)&&this.open(t),this.currentView=t,i.triggerMethod.call(this,"show",t),i.triggerMethod.call(t,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(t){return i.$(t)},open:function(t){this.$el.empty().append(t.el)},close:function(){var t=this.currentView;t&&!t.isClosed&&(t.close?t.close():t.remove&&t.remove(),i.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(t){this.currentView=t},reset:function(){this.close(),delete this.$el}}),i.Region.extend=i.extend,i.RegionManager=function(t){var e=t.Controller.extend({constructor:function(e){this._regions={},t.Controller.prototype.constructor.call(this,e)},addRegions:function(t,e){var i={};return n.each(t,function(t,o){"string"==typeof t&&(t={selector:t}),t.selector&&(t=n.defaults({},t,e));var a=this.addRegion(o,t);i[o]=a},this),i},addRegion:function(e,i){var o,a=n.isObject(i),r=n.isString(i),s=!!i.selector;return o=r||a&&s?t.Region.buildRegion(i,t.Region):n.isFunction(i)?t.Region.buildRegion(i,t.Region):i,this._store(e,o),this.triggerMethod("region:add",e,o),o},get:function(t){return this._regions[t]},removeRegion:function(t){var e=this._regions[t];this._remove(t,e)},removeRegions:function(){n.each(this._regions,function(t,e){this._remove(e,t)},this)},closeRegions:function(){n.each(this._regions,function(t,e){t.close()},this)},close:function(){this.removeRegions();var e=Array.prototype.slice.call(arguments);t.Controller.prototype.close.apply(this,e)},_store:function(t,e){this._regions[t]=e,this._setLength()},_remove:function(t,e){e.close(),delete this._regions[t],this._setLength(),this.triggerMethod("region:remove",t,e)},_setLength:function(){this.length=n.size(this._regions)}});return n.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"],function(t){e.prototype[t]=function(){var e=[n.values(this._regions)].concat(n.toArray(arguments));return n[t].apply(n,e)}}),e}(i),i.TemplateCache=function(t){this.templateId=t},n.extend(i.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];return e||(e=new i.TemplateCache(t),this.templateCaches[t]=e),e.load()},clear:function(){var t,e=a(arguments),n=e.length;if(n>0)for(t=0;t<n;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),n.extend(i.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(t),this.compiledTemplate},loadTemplate:function(t){var e=i.$(t).html();return e&&0!==e.length||r("Could not find template: '"+t+"'","NoTemplateError"),e},compileTemplate:function(t){return n.template(t)}}),i.Renderer={render:function(t,e){if(!t){var n=new Error("Cannot render the template since it's false, null or undefined.");throw n.name="TemplateNotFoundError",n}return("function"==typeof t?t:i.TemplateCache.get(t))(e)}},i.View=e.View.extend({constructor:function(){n.bindAll(this,"render");var t=Array.prototype.slice.apply(arguments);e.View.prototype.constructor.apply(this,t),i.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:i.triggerMethod,getTemplate:function(){return i.getOption(this,"template")},mixinTemplateHelpers:function(t){t=t||{};var e=i.getOption(this,"templateHelpers");return n.isFunction(e)&&(e=e.call(this)),n.extend(t,e)},configureTriggers:function(){if(this.triggers){var t={},e=n.result(this,"triggers");return n.each(e,function(e,n){t[n]=function(t){t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation();var n={view:this,model:this.model,collection:this.collection};this.triggerMethod(e,n)}},this),t}},delegateEvents:function(t){this._delegateDOMEvents(t),i.bindEntityEvents(this,this.model,i.getOption(this,"modelEvents")),i.bindEntityEvents(this,this.collection,i.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(t){t=t||this.events,n.isFunction(t)&&(t=t.call(this));var i={},o=this.configureTriggers();n.extend(i,t,o),e.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var t=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,t),i.unbindEntityEvents(this,this.model,i.getOption(this,"modelEvents")),i.unbindEntityEvents(this,this.collection,i.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){this.isClosed||!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(t),function(e){var n=t[e];this.ui[e]=this.$(n)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),i.ItemView=i.View.extend({constructor:function(){i.View.prototype.constructor.apply(this,a(arguments))},serializeData:function(){var t={};return this.model?t=this.model.toJSON():this.collection&&(t={items:this.collection.toJSON()}),t},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var t=this.serializeData();t=this.mixinTemplateHelpers(t);var e=this.getTemplate(),n=i.Renderer.render(e,t);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),i.View.prototype.close.apply(this,a(arguments)),this.triggerMethod("item:closed"))}}),i.CollectionView=i.View.extend({itemViewEventPrefix:"itemview",constructor:function(t){this._initChildViewStorage(),i.View.prototype.constructor.apply(this,a(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(t,e,n){this.closeEmptyView();var i=this.getItemView(t),o=this.collection.indexOf(t);this.addItemView(t,i,o)},onShowCalled:function(){this.children.each(function(t){i.triggerMethod.call(t,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var t;this.collection.each(function(e,n){t=this.getItemView(e),this.addItemView(e,t,n)},this)},showEmptyView:function(){var t=i.getOption(this,"emptyView");if(t&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new e.Model;this.addItemView(n,t,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(t){var e=i.getOption(this,"itemView");return e||r("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(t,e,o){var a=i.getOption(this,"itemViewOptions");n.isFunction(a)&&(a=a.call(this,t,o));var r=this.buildItemView(t,e,a);this.addChildViewEventForwarding(r),this.triggerMethod("before:item:added",r),this.children.add(r),this.renderItemView(r,o),this._isShown&&i.triggerMethod.call(r,"show"),this.triggerMethod("after:item:added",r)},addChildViewEventForwarding:function(t){var e=i.getOption(this,"itemViewEventPrefix");this.listenTo(t,"all",function(){var n=a(arguments);n[0]=e+":"+n[0],n.splice(1,0,t),i.triggerMethod.apply(this,n)},this)},renderItemView:function(t,e){t.render(),this.appendHtml(this,t,e)},buildItemView:function(t,e,i){return new e(n.extend({model:t},i))},removeItemView:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},removeChildView:function(t){t&&(this.stopListening(t),t.close?t.close():t.remove&&t.remove(),this.children.remove(t)),this.triggerMethod("item:removed",t)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendHtml:function(t,e,n){t.$el.append(e.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),i.View.prototype.close.apply(this,a(arguments)))},closeChildren:function(){this.children.each(function(t){this.removeChildView(t)},this),this.checkEmpty()}}),i.CompositeView=i.CollectionView.extend({constructor:function(){i.CollectionView.prototype.constructor.apply(this,a(arguments))},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(t){var e=i.getOption(this,"itemView")||this.constructor;return e||r("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var t={};return this.model&&(t=this.model.toJSON()),t},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var t=this.renderModel();return this.$el.html(t),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(i.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t);var e=this.getTemplate();return i.Renderer.render(e,t)},appendHtml:function(t,e,n){this.getItemViewContainer(t).append(e.el)},getItemViewContainer:function(t){if("$itemViewContainer"in t)return t.$itemViewContainer;var e,o=i.getOption(t,"itemViewContainer");if(o){var a=n.isFunction(o)?o():o;(e=t.$(a)).length<=0&&r("The specified `itemViewContainer` was not found: "+t.itemViewContainer,"ItemViewContainerMissingError")}else e=t.$el;return t.$itemViewContainer=e,e},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),i.Layout=i.ItemView.extend({regionType:i.Region,constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),i.ItemView.prototype.constructor.call(this,t)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var t=Array.prototype.slice.apply(arguments);return i.ItemView.prototype.render.apply(this,t)},close:function(){if(!this.isClosed){this.regionManager.close();var t=Array.prototype.slice.apply(arguments);i.ItemView.prototype.close.apply(this,t)}},addRegion:function(t,e){var n={};return n[t]=e,this._buildRegions(n)[t]},addRegions:function(t){return this.regions=n.extend({},this.regions,t),this._buildRegions(t)},removeRegion:function(t){return delete this.regions[t],this.regionManager.removeRegion(t)},_buildRegions:function(t){var e=this,n={regionType:i.getOption(this,"regionType"),parentEl:function(){return e.$el}};return this.regionManager.addRegions(t,n)},_initializeRegions:function(t){var e;this._initRegionManager(),e=n.isFunction(this.regions)?this.regions(t):this.regions||{},this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(t){t.reset()})},_initRegionManager:function(){this.regionManager=new i.RegionManager,this.listenTo(this.regionManager,"region:add",function(t,e){this[t]=e,this.trigger("region:add",t,e)}),this.listenTo(this.regionManager,"region:remove",function(t,e){delete this[t],this.trigger("region:remove",t,e)})}}),i.AppRouter=e.Router.extend({constructor:function(t){e.Router.prototype.constructor.apply(this,a(arguments)),this.options=t||{};var n=i.getOption(this,"appRoutes"),o=this._getController();this.processAppRoutes(o,n)},appRoute:function(t,e){var n=this._getController();this._addAppRoute(n,t,e)},processAppRoutes:function(t,e){if(e){var i=n.keys(e).reverse();n.each(i,function(n){this._addAppRoute(t,n,e[n])},this)}},_getController:function(){return i.getOption(this,"controller")},_addAppRoute:function(t,e,i){var o=t[i];if(!o)throw new Error("Method '"+i+"' was not found on the controller");this.route(e,i,n.bind(o,t))}}),i.Application=function(t){this._initRegionManager(),this._initCallbacks=new i.Callbacks,this.vent=new e.Wreqr.EventAggregator,this.commands=new e.Wreqr.Commands,this.reqres=new e.Wreqr.RequestResponse,this.submodules={},n.extend(this,t),this.triggerMethod=i.triggerMethod},n.extend(i.Application.prototype,e.Events,{execute:function(){var t=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,t)},request:function(){var t=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,t)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("initialize:before",t),this._initCallbacks.run(t,this),this.triggerMethod("initialize:after",t),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(t){this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},module:function(t,e){var n=a(arguments);return n.unshift(this),i.Module.create.apply(i.Module,n)},_initRegionManager:function(){this._regionManager=new i.RegionManager,this.listenTo(this._regionManager,"region:add",function(t,e){this[t]=e}),this.listenTo(this._regionManager,"region:remove",function(t,e){delete this[t]})}}),i.Application.extend=i.extend,i.Module=function(t,e){this.moduleName=t,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,this.startWithParent=!0,this.triggerMethod=i.triggerMethod},n.extend(i.Module.prototype,e.Events,{addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(n.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,i.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(t){t.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),i.triggerMethod.call(this,"stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,o){if(t){var a=n.flatten([this,this.app,e,i,i.$,n,o]);t.apply(this,a)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new i.Callbacks,this._finalizerCallbacks=new i.Callbacks}}),n.extend(i.Module,{create:function(t,e,i){var o=t,r=a(arguments);r.splice(0,3);var s=(e=e.split(".")).length,l=[];return l[s-1]=i,n.each(e,function(e,n){var i=o;o=this._getModule(i,e,t),this._addModuleDefinition(i,o,l[n],r)},this),o},_getModule:function(t,e,n,o,a){var r=t[e];return r||(r=new i.Module(e,n),t[e]=r,t.submodules[e]=r),r},_addModuleDefinition:function(t,e,i,o){var a,r;n.isFunction(i)?(a=i,r=!0):n.isObject(i)?(a=i.define,r=i.startWithParent):r=!0,a&&e.addDefinition(a,o),e.startWithParent=e.startWithParent&&r,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}})}(0,e,i);t.exports=e.Marionette}).call(window)},function(t,e,n){var i;void 0===(i=function(t){"use strict";return{readerSkeltonLayoutTemplate:n(35),readerToolBarTemplate:n(36),readerShareLinkTemplate:n(37),readerCopyTextTemplate:n(38),readerPrintMainWrapperTemplate:n(39),readerPrintRadioTemplate:n(40),readerPrintSelectionTemplate:n(41),readerPrintPreviewTemplate:n(42),readerPrintCreateTemplate:n(43),readerPrintOpenTemplate:n(44),readerPrintErrorTemplate:n(45),dummyTemplate:n(46),readerPrintTemplate:n(47),readerSideBarTemplate:n(48),readerPanelSearchTemplate:n(49),readerPanelTocTemplate:n(50),readerPanelBookResourceTemplate:n(51),panelBookDetailsTemplate:n(52),panelBookNotesTemplate:n(53),panelBookNotesCompositeTemplate:n(54),panelBookNotesLoadingContentTemplate:n(55),panelBookNotesResultTemplate:n(56),panelBookNotesResultChildTemplate:n(57),panelBookSearchTemplate:n(58),readerMainContentTemplate:n(59),mainCompositeTemplate:n(60),mainLoadingContentTemplate:n(61),mainContentTemplate:n(62),readerTextTemplate:n(63),panelBookSearchCompositeTemplate:n(64),panelBookSearchNoResultTemplate:n(65),panelBookSearchChapterResultTemplate:n(66),panelBookSearchFrequencyResultTemplate:n(67),panelBookSearchYouMeanResultTemplate:n(68),panelBookSearchChapterResultChildTemplate:n(69),panelBookSearchChapterResultChildSnipTemplate:n(70),readerAcstTemplate:n(71),subSectionDeviceSpecificTemplate:n(72),subSectionErrorInACSTemplate:n(73),subSectionNupoConfirmTemplate:n(74),readerSignInTemplate:n(75),readerCiteTemplate:n(76),readerMedRTextTemplate:n(77),readerLoanTextTemplate:n(78),readerShowPriceLoanTextTemplate:n(79),drmFreeDownloadModalTemplate:n(80)}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i;(function(){var n=this,o=n._,a=Array.prototype,r=Object.prototype,s=Function.prototype,l=a.push,c=a.slice,d=r.toString,u=r.hasOwnProperty,p=Array.isArray,h=Object.keys,f=s.bind,g=Object.create,m=function(){},v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};t.exports&&(e=t.exports=v),e._=v,v.VERSION="1.8.3";var b=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,a){return t.call(e,n,i,o,a)}}return function(){return t.apply(e,arguments)}},y=function(t,e,n){return null==t?v.identity:v.isFunction(t)?b(t,e,n):v.isObject(t)?v.matcher(t):v.property(t)};v.iteratee=function(t,e){return y(t,e,1/0)};var _=function(t,e){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var o=1;o<i;o++)for(var a=arguments[o],r=t(a),s=r.length,l=0;l<s;l++){var c=r[l];e&&void 0!==n[c]||(n[c]=a[c])}return n}},x=function(t){if(!v.isObject(t))return{};if(g)return g(t);m.prototype=t;var e=new m;return m.prototype=null,e},w=function(t){return function(e){return null==e?void 0:e[t]}},D=Math.pow(2,53)-1,k=w("length"),T=function(t){var e=k(t);return"number"==typeof e&&e>=0&&e<=D};function C(t){return function(e,n,i,o){n=b(n,o,4);var a=!T(e)&&v.keys(e),r=(a||e).length,s=t>0?0:r-1;return arguments.length<3&&(i=e[a?a[s]:s],s+=t),function(e,n,i,o,a,r){for(;a>=0&&a<r;a+=t){var s=o?o[a]:a;i=n(i,e[s],s,e)}return i}(e,n,i,a,s,r)}}v.each=v.forEach=function(t,e,n){var i,o;if(e=b(e,n),T(t))for(i=0,o=t.length;i<o;i++)e(t[i],i,t);else{var a=v.keys(t);for(i=0,o=a.length;i<o;i++)e(t[a[i]],a[i],t)}return t},v.map=v.collect=function(t,e,n){e=y(e,n);for(var i=!T(t)&&v.keys(t),o=(i||t).length,a=Array(o),r=0;r<o;r++){var s=i?i[r]:r;a[r]=e(t[s],s,t)}return a},v.reduce=v.foldl=v.inject=C(1),v.reduceRight=v.foldr=C(-1),v.find=v.detect=function(t,e,n){var i;if(void 0!==(i=T(t)?v.findIndex(t,e,n):v.findKey(t,e,n))&&-1!==i)return t[i]},v.filter=v.select=function(t,e,n){var i=[];return e=y(e,n),v.each(t,function(t,n,o){e(t,n,o)&&i.push(t)}),i},v.reject=function(t,e,n){return v.filter(t,v.negate(y(e)),n)},v.every=v.all=function(t,e,n){e=y(e,n);for(var i=!T(t)&&v.keys(t),o=(i||t).length,a=0;a<o;a++){var r=i?i[a]:a;if(!e(t[r],r,t))return!1}return!0},v.some=v.any=function(t,e,n){e=y(e,n);for(var i=!T(t)&&v.keys(t),o=(i||t).length,a=0;a<o;a++){var r=i?i[a]:a;if(e(t[r],r,t))return!0}return!1},v.contains=v.includes=v.include=function(t,e,n,i){return T(t)||(t=v.values(t)),("number"!=typeof n||i)&&(n=0),v.indexOf(t,e,n)>=0},v.invoke=function(t,e){var n=c.call(arguments,2),i=v.isFunction(e);return v.map(t,function(t){var o=i?e:t[e];return null==o?o:o.apply(t,n)})},v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matcher(e))},v.findWhere=function(t,e){return v.find(t,v.matcher(e))},v.max=function(t,e,n){var i,o,a=-1/0,r=-1/0;if(null==e&&null!=t)for(var s=0,l=(t=T(t)?t:v.values(t)).length;s<l;s++)(i=t[s])>a&&(a=i);else e=y(e,n),v.each(t,function(t,n,i){((o=e(t,n,i))>r||o===-1/0&&a===-1/0)&&(a=t,r=o)});return a},v.min=function(t,e,n){var i,o,a=1/0,r=1/0;if(null==e&&null!=t)for(var s=0,l=(t=T(t)?t:v.values(t)).length;s<l;s++)(i=t[s])<a&&(a=i);else e=y(e,n),v.each(t,function(t,n,i){((o=e(t,n,i))<r||o===1/0&&a===1/0)&&(a=t,r=o)});return a},v.shuffle=function(t){for(var e,n=T(t)?t:v.values(t),i=n.length,o=Array(i),a=0;a<i;a++)(e=v.random(0,a))!==a&&(o[a]=o[e]),o[e]=n[a];return o},v.sample=function(t,e,n){return null==e||n?(T(t)||(t=v.values(t)),t[v.random(t.length-1)]):v.shuffle(t).slice(0,Math.max(0,e))},v.sortBy=function(t,e,n){return e=y(e,n),v.pluck(v.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var S=function(t){return function(e,n,i){var o={};return n=y(n,i),v.each(e,function(i,a){var r=n(i,a,e);t(o,i,r)}),o}};v.groupBy=S(function(t,e,n){v.has(t,n)?t[n].push(e):t[n]=[e]}),v.indexBy=S(function(t,e,n){t[n]=e}),v.countBy=S(function(t,e,n){v.has(t,n)?t[n]++:t[n]=1}),v.toArray=function(t){return t?v.isArray(t)?c.call(t):T(t)?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:T(t)?t.length:v.keys(t).length},v.partition=function(t,e,n){e=y(e,n);var i=[],o=[];return v.each(t,function(t,n,a){(e(t,n,a)?i:o).push(t)}),[i,o]},v.first=v.head=v.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:v.initial(t,t.length-e)},v.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},v.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:v.rest(t,Math.max(0,t.length-e))},v.rest=v.tail=v.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},v.compact=function(t){return v.filter(t,v.identity)};var N=function(t,e,n,i){for(var o=[],a=0,r=i||0,s=k(t);r<s;r++){var l=t[r];if(T(l)&&(v.isArray(l)||v.isArguments(l))){e||(l=N(l,e,n));var c=0,d=l.length;for(o.length+=d;c<d;)o[a++]=l[c++]}else n||(o[a++]=l)}return o};function R(t){return function(e,n,i){n=y(n,i);for(var o=k(e),a=t>0?0:o-1;a>=0&&a<o;a+=t)if(n(e[a],a,e))return a;return-1}}function I(t,e,n){return function(i,o,a){var r=0,s=k(i);if("number"==typeof a)t>0?r=a>=0?a:Math.max(a+s,r):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return i[a=n(i,o)]===o?a:-1;if(o!=o)return(a=e(c.call(i,r,s),v.isNaN))>=0?a+r:-1;for(a=t>0?r:s-1;a>=0&&a<s;a+=t)if(i[a]===o)return a;return-1}}v.flatten=function(t,e){return N(t,e,!1)},v.without=function(t){return v.difference(t,c.call(arguments,1))},v.uniq=v.unique=function(t,e,n,i){v.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=y(n,i));for(var o=[],a=[],r=0,s=k(t);r<s;r++){var l=t[r],c=n?n(l,r,t):l;e?(r&&a===c||o.push(l),a=c):n?v.contains(a,c)||(a.push(c),o.push(l)):v.contains(o,l)||o.push(l)}return o},v.union=function(){return v.uniq(N(arguments,!0,!0))},v.intersection=function(t){for(var e=[],n=arguments.length,i=0,o=k(t);i<o;i++){var a=t[i];if(!v.contains(e,a)){for(var r=1;r<n&&v.contains(arguments[r],a);r++);r===n&&e.push(a)}}return e},v.difference=function(t){var e=N(arguments,!0,!0,1);return v.filter(t,function(t){return!v.contains(e,t)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(t){for(var e=t&&v.max(t,k).length||0,n=Array(e),i=0;i<e;i++)n[i]=v.pluck(t,i);return n},v.object=function(t,e){for(var n={},i=0,o=k(t);i<o;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},v.findIndex=R(1),v.findLastIndex=R(-1),v.sortedIndex=function(t,e,n,i){for(var o=(n=y(n,i,1))(e),a=0,r=k(t);a<r;){var s=Math.floor((a+r)/2);n(t[s])<o?a=s+1:r=s}return a},v.indexOf=I(1,v.findIndex,v.sortedIndex),v.lastIndexOf=I(-1,v.findLastIndex),v.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=Array(i),a=0;a<i;a++,t+=n)o[a]=t;return o};var P=function(t,e,n,i,o){if(!(i instanceof e))return t.apply(n,o);var a=x(t.prototype),r=t.apply(a,o);return v.isObject(r)?r:a};v.bind=function(t,e){if(f&&t.bind===f)return f.apply(t,c.call(arguments,1));if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),i=function(){return P(t,i,e,this,n.concat(c.call(arguments)))};return i},v.partial=function(t){var e=c.call(arguments,1),n=function(){for(var i=0,o=e.length,a=Array(o),r=0;r<o;r++)a[r]=e[r]===v?arguments[i++]:e[r];for(;i<arguments.length;)a.push(arguments[i++]);return P(t,n,this,this,a)};return n},v.bindAll=function(t){var e,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++)t[n=arguments[e]]=v.bind(t[n],t);return t},v.memoize=function(t,e){var n=function(i){var o=n.cache,a=""+(e?e.apply(this,arguments):i);return v.has(o,a)||(o[a]=t.apply(this,arguments)),o[a]};return n.cache={},n},v.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},v.defer=v.partial(v.delay,v,1),v.throttle=function(t,e,n){var i,o,a,r=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:v.now(),r=null,a=t.apply(i,o),r||(i=o=null)};return function(){var c=v.now();s||!1!==n.leading||(s=c);var d=e-(c-s);return i=this,o=arguments,d<=0||d>e?(r&&(clearTimeout(r),r=null),s=c,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,d)),a}},v.debounce=function(t,e,n){var i,o,a,r,s,l=function(){var c=v.now()-r;c<e&&c>=0?i=setTimeout(l,e-c):(i=null,n||(s=t.apply(a,o),i||(a=o=null)))};return function(){a=this,o=arguments,r=v.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(s=t.apply(a,o),a=o=null),s}},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},v.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},v.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},v.once=v.partial(v.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),A=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function M(t,e){var n=A.length,i=t.constructor,o=v.isFunction(i)&&i.prototype||r,a="constructor";for(v.has(t,a)&&!v.contains(e,a)&&e.push(a);n--;)(a=A[n])in t&&t[a]!==o[a]&&!v.contains(e,a)&&e.push(a)}v.keys=function(t){if(!v.isObject(t))return[];if(h)return h(t);var e=[];for(var n in t)v.has(t,n)&&e.push(n);return E&&M(t,e),e},v.allKeys=function(t){if(!v.isObject(t))return[];var e=[];for(var n in t)e.push(n);return E&&M(t,e),e},v.values=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i},v.mapObject=function(t,e,n){e=y(e,n);for(var i,o=v.keys(t),a=o.length,r={},s=0;s<a;s++)r[i=o[s]]=e(t[i],i,t);return r},v.pairs=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=[e[o],t[e[o]]];return i},v.invert=function(t){for(var e={},n=v.keys(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i];return e},v.functions=v.methods=function(t){var e=[];for(var n in t)v.isFunction(t[n])&&e.push(n);return e.sort()},v.extend=_(v.allKeys),v.extendOwn=v.assign=_(v.keys),v.findKey=function(t,e,n){e=y(e,n);for(var i,o=v.keys(t),a=0,r=o.length;a<r;a++)if(e(t[i=o[a]],i,t))return i},v.pick=function(t,e,n){var i,o,a={},r=t;if(null==r)return a;v.isFunction(e)?(o=v.allKeys(r),i=b(e,n)):(o=N(arguments,!1,!1,1),i=function(t,e,n){return e in n},r=Object(r));for(var s=0,l=o.length;s<l;s++){var c=o[s],d=r[c];i(d,c,r)&&(a[c]=d)}return a},v.omit=function(t,e,n){if(v.isFunction(e))e=v.negate(e);else{var i=v.map(N(arguments,!1,!1,1),String);e=function(t,e){return!v.contains(i,e)}}return v.pick(t,e,n)},v.defaults=_(v.allKeys,!0),v.create=function(t,e){var n=x(t);return e&&v.extendOwn(n,e),n},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t},v.isMatch=function(t,e){var n=v.keys(e),i=n.length;if(null==t)return!i;for(var o=Object(t),a=0;a<i;a++){var r=n[a];if(e[r]!==o[r]||!(r in o))return!1}return!0};var L=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var o=d.call(t);if(o!==d.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var a="[object Array]"===o;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var r=t.constructor,s=e.constructor;if(r!==s&&!(v.isFunction(r)&&r instanceof r&&v.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),a){if((l=t.length)!==e.length)return!1;for(;l--;)if(!L(t[l],e[l],n,i))return!1}else{var c,u=v.keys(t);if(l=u.length,v.keys(e).length!==l)return!1;for(;l--;)if(c=u[l],!v.has(e,c)||!L(t[c],e[c],n,i))return!1}return n.pop(),i.pop(),!0};v.isEqual=function(t,e){return L(t,e)},v.isEmpty=function(t){return null==t||(T(t)&&(v.isArray(t)||v.isString(t)||v.isArguments(t))?0===t.length:0===v.keys(t).length)},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=p||function(t){return"[object Array]"===d.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){v["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(t){return v.has(t,"callee")}),"object"!=typeof Int8Array&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&t!==+t},v.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===d.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){return null!=t&&u.call(t,e)},v.noConflict=function(){return n._=o,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=w,v.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(e){return v.isMatch(e,t)}},v.times=function(t,e,n){var i=Array(Math.max(0,t));e=b(e,n,1);for(var o=0;o<t;o++)i[o]=e(o);return i},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},O=v.invert(B),q=function(t){var e=function(e){return t[e]},n="(?:"+v.keys(t).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(o,e):t}};v.escape=q(B),v.unescape=q(O),v.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),v.isFunction(i)?i.call(t):i};var F=0;v.uniqueId=function(t){var e=++F+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\u2028|\u2029/g,j=function(t){return"\\"+H[t]};v.template=function(t,e,n){!e&&n&&(e=n),e=v.defaults({},e,v.templateSettings);var i=RegExp([(e.escape||U).source,(e.interpolate||U).source,(e.evaluate||U).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(e,n,i,r,s){return a+=t.slice(o,s).replace($,j),o=s+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(a+="';\n"+r+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var r=new Function(e.variable||"obj","_",a)}catch(t){throw t.source=a,t}var s=function(t){return r.call(this,t,v)},l=e.variable||"obj";return s.source="function("+l+"){\n"+a+"}",s},v.chain=function(t){var e=v(t);return e._chain=!0,e};var z=function(t,e){return t._chain?v(e).chain():e};v.mixin=function(t){v.each(v.functions(t),function(e){var n=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),z(this,n.apply(v,t))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];v.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],z(this,n)}}),v.each(["concat","join","slice"],function(t){var e=a[t];v.prototype[t]=function(){return z(this,e.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},void 0===(i=function(){return v}.apply(e,[]))||(t.exports=i)}).call(this)},function(t,e,n){var i;void 0===(i=function(){"use strict";var t=[];function e(){if(!(this instanceof e))throw new TypeError("rspUtil constructor cannot be called as a function.")}function n(t,e){for(var n,i,o=function(t){t+=" ";for(var e=new Array(Math.floor(t.length/2)),n=0;n<e.length;n++)e[n]=t.charCodeAt(2*n)+(t.charCodeAt(2*n+1)<<16);return e}(t),a=o.length,r=o[a-1],s=o[0],l=Math.floor(6+52/a),c=0;l-- >0;){i=(c+=2654435769)>>>2&3;for(var d=0;d<a;d++)n=(r>>>5^(s=o[(d+1)%a])<<2)+(s>>>3^r<<4)^(c^s)+(e[3&d^i]^r),r=o[d]+=n}return function(t){for(var e="",n=0;n<t.length;n++)e=e+(t[n]>>28&15).toString(16)+(268435456+(268435455&t[n])).toString(16);return e}(o)}function i(t,e){for(var n,i,o=function(t){for(var e,n=new Array(t.length/9),i=0;i<n.length;i++)e=t.charAt(9*i)+t.substr(9*i+2,7),n[i]=parseInt(e,16);return n}(t),a=o.length,r=o[a-1],s=o[0],l=2654435769,c=Math.floor(6+52/a)*l;0!=c;){i=c>>>2&3;for(var d=a-1;d>=0;d--)n=((r=o[d>0?d-1:a-1])>>>5^s<<2)+(s>>>3^r<<4)^(c^s)+(e[3&d^i]^r),s=o[d]-=n;c-=l}return function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(65535&t[n],t[n]>>>16&65535);return e.join("")}(o)}return e.prototype={constructor:e,init:function(e){(t=new Array(4))[0]=65535&parseInt(e.substr(0,8),16),t[1]=65535&parseInt(e.substr(8,8),16),t[2]=65535&parseInt(e.substr(16,8),16),t[3]=65535&parseInt(e.substr(24,8),16)},enc:function(e){return n(e,t)},dec:function(e){return i(e=e.replace(/^\s+|\s+$/g,""),t)}},e}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){(function(){(function(){var t,i=this,o=i.Backbone,a=[],r=a.slice;(t=e).VERSION="1.1.0";var s=i._;s||(s=n(5)),t.$=i.jQuery||i.Zepto||i.ender||i.$,t.noConflict=function(){return i.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=t.Events={on:function(t,e,n){return d(this,"on",t,[e,n])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this):this},once:function(t,e,n){if(!d(this,"once",t,[e,n])||!e)return this;var i=this,o=s.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var i,o,a,r,l,c,u,p;if(!this._events||!d(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(l=0,c=(r=t?[t]:s.keys(this._events)).length;l<c;l++)if(t=r[l],a=this._events[t]){if(this._events[t]=i=[],e||n)for(u=0,p=a.length;u<p;u++)o=a[u],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!d(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&u(n,e),i&&u(i,arguments),this},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;var o=!e&&!n;for(var a in n||"object"!=typeof e||(n=this),t&&((i={})[t._listenId]=t),i)(t=i[a]).off(e,n,this),(o||s.isEmpty(t._events))&&delete this._listeningTo[a];return this}},c=/\s+/,d=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(c.test(n)){for(var a=n.split(c),r=0,s=a.length;r<s;r++)t[e].apply(t,[a[r]].concat(i));return!1}return!0},u=function(t,e){var n,i=-1,o=t.length,a=e[0],r=e[1],s=e[2];switch(e.length){case 0:for(;++i<o;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=t[i]).callback.call(n.ctx,a);return;case 2:for(;++i<o;)(n=t[i]).callback.call(n.ctx,a,r);return;case 3:for(;++i<o;)(n=t[i]).callback.call(n.ctx,a,r,s);return;default:for(;++i<o;)(n=t[i]).callback.apply(n.ctx,e)}};s.each({listenTo:"on",listenToOnce:"once"},function(t,e){l[e]=function(e,n,i){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=s.uniqueId("l"))]=e,i||"object"!=typeof n||(i=this),e[t](n,i,this),this}}),l.bind=l.on,l.unbind=l.off,s.extend(t,l);var p=t.Model=function(t,e){var n=t||{};e||(e={}),this.cid=s.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=s.defaults({},n,s.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};s.extend(p.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return s.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return s.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,o,a,r,l,c,d,u;if(null==t)return this;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;for(i in a=n.unset,l=n.silent,r=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=s.clone(this.attributes),this.changed={}),u=this.attributes,d=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]),o)e=o[i],s.isEqual(u[i],e)||r.push(i),s.isEqual(d[i],e)?delete this.changed[i]:this.changed[i]=e,a?delete u[i]:u[i]=e;if(!l){r.length&&(this._pending=!0);for(var p=0,h=r.length;p<h;p++)this.trigger("change:"+r[p],this,u[r[p]],n)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,s.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,s.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!s.isEmpty(this.changed):s.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&s.clone(this.changed);var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in t)s.isEqual(i[o],e=t[o])||((n||(n={}))[o]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(t){void 0===(t=t?s.clone(t):{}).parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){if(!e.set(e.parse(i,t),t))return!1;n&&n(e,i,t),e.trigger("sync",e,i,t)},A(this,t),this.sync("read",this,t)},save:function(t,e,n){var i,o,a,r=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,n=s.extend({validate:!0},n),i&&!n.wait){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=s.extend({},r,i)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(t){l.attributes=r;var e=l.parse(t,n);if(n.wait&&(e=s.extend(i||{},e)),s.isObject(e)&&!l.set(e,n))return!1;c&&c(l,t,n),l.trigger("sync",l,t,n)},A(this,n),"patch"===(o=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=i),a=this.sync(o,this,n),i&&n.wait&&(this.attributes=r),a},destroy:function(t){t=t?s.clone(t):{};var e=this,n=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(o){(t.wait||e.isNew())&&i(),n&&n(e,o,t),e.isNew()||e.trigger("sync",e,o,t)},this.isNew())return t.success(),!1;A(this,t);var o=this.sync("delete",this,t);return t.wait||i(),o},url:function(){var t=s.result(this,"urlRoot")||s.result(this.collection,"url")||E();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},s.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,s.extend(e,{validationError:n})),!1)}});s.each(["keys","values","pairs","invert","pick","omit"],function(t){p.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),s[t].apply(s,e)}});var h=t.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,s.extend({silent:!0},e))},f={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};s.extend(h.prototype,l,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,s.extend({merge:!1},e,g))},remove:function(t,e){var n,i,o,a,r=!s.isArray(t);for(e||(e={}),n=0,i=(t=r?[t]:s.clone(t)).length;n<i;n++)(a=t[n]=this.get(t[n]))&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,e.silent||(e.index=o,a.trigger("remove",a,this,e)),this._removeReference(a));return r?t[0]:t},set:function(t,e){(e=s.defaults({},e,f)).parse&&(t=this.parse(t,e));var n,i,o,a,r,l,c,d=!s.isArray(t);t=d?t?[t]:[]:s.clone(t);var u=e.at,h=this.model,g=this.comparator&&null==u&&!1!==e.sort,m=s.isString(this.comparator)?this.comparator:null,v=[],b=[],y={},_=e.add,x=e.merge,w=e.remove,D=!(g||!_||!w)&&[];for(n=0,i=t.length;n<i;n++){if(o=(r=t[n])instanceof p?a=r:r[h.prototype.idAttribute],l=this.get(o))w&&(y[l.cid]=!0),x&&(r=r===a?a.attributes:r,e.parse&&(r=l.parse(r,e)),l.set(r,e),g&&!c&&l.hasChanged(m)&&(c=!0)),t[n]=l;else if(_){if(!(a=t[n]=this._prepareModel(r,e)))continue;v.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}D&&D.push(l||a)}if(w){for(n=0,i=this.length;n<i;++n)y[(a=this.models[n]).cid]||b.push(a);b.length&&this.remove(b,e)}if(v.length||D&&D.length)if(g&&(c=!0),this.length+=v.length,null!=u)for(n=0,i=v.length;n<i;n++)this.models.splice(u+n,0,v[n]);else{D&&(this.models.length=0);var k=D||v;for(n=0,i=k.length;n<i;n++)this.models.push(k[n])}if(c&&this.sort({silent:!0}),!e.silent){for(n=0,i=v.length;n<i;n++)(a=v[n]).trigger("add",a,this,e);(c||D&&D.length)&&this.trigger("sort",this,e)}return d?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;n<i;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),t=this.add(t,s.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,s.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,s.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return s.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),s.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(s.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return s.invoke(this.models,"get",t)},fetch:function(t){void 0===(t=t?s.clone(t):{}).parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var o=t.reset?"reset":"set";n[o](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},A(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?s.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,i=e.success;return e.success=function(t,e,o){o.wait&&n.add(t,o),i&&i(t,e,o)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t.collection||(t.collection=this),t;(e=e?s.clone(e):{}).collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});s.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"],function(t){h.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),s[t].apply(s,e)}});s.each(["groupBy","countBy","sortBy"],function(t){h.prototype[t]=function(e,n){var i=s.isFunction(e)?e:function(t){return t.get(e)};return s[t](this.models,i,n)}});var m=t.View=function(t){this.cid=s.uniqueId("view"),t||(t={}),s.extend(this,s.pick(t,b)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},v=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];s.extend(m.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=s.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var n=t[e];if(s.isFunction(n)||(n=this[t[e]]),n){var i=e.match(v),o=i[1],a=i[2];n=s.bind(n,this),o+=".delegateEvents"+this.cid,""===a?this.$el.on(o,n):this.$el.on(o,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var e=s.extend({},s.result(this,"attributes"));this.id&&(e.id=s.result(this,"id")),this.className&&(e.class=s.result(this,"className"));var n=t.$("<"+s.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,i){var o=_[e];s.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=s.result(n,"url")||E()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var r=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),r)return r.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1),"PATCH"===a.type&&y&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=t.ajax(s.extend(a,i));return n.trigger("request",n,l,i),l};var y=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),_={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var x=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},w=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,k=/\*\w+/g,T=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(x.prototype,l,{initialize:function(){},route:function(e,n,i){s.isRegExp(e)||(e=this._routeToRegExp(e)),s.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var o=this;return t.history.route(e,function(a){var r=o._extractParameters(e,a);i&&i.apply(o,r),o.trigger.apply(o,["route:"+n].concat(r)),o.trigger("route",n,r),t.history.trigger("route",o,n,r)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var t,e=s.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(T,"\\$&").replace(w,"(?:$1)?").replace(D,function(t,e){return e?t:"([^/]+)"}).replace(k,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return s.map(n,function(t){return t?decodeURIComponent(t):null})}});var C=t.History=function(){this.handlers=[],s.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},S=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,R=/msie [\w.]+/,I=/\/$/,P=/[?#].*$/;C.started=!1,s.extend(C.prototype,l,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(I,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(S,"")},start:function(e){if(C.started)throw new Error("Backbone.history has already been started");C.started=!0,this.options=s.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,o=R.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(N,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location,r=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!r)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&r&&a.hash&&(this.fragment=this.getHash().replace(S,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),C.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),s.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!C.started)return!1;e&&!0!==e||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(P,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),t.history=new C;p.extend=h.extend=x.extend=m.extend=C.extend=function(t,e){var n,i=this;n=t&&s.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},s.extend(n,i,e);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,t&&s.extend(n.prototype,t),n.__super__=i.prototype,n};var E=function(){throw new Error('A "url" property or function must be specified')},A=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}}}).call(this)}).call(window)},function(t,e,n){t.exports=function(){function t(t,e){"function"==typeof t&&(e=t,t={}),t=t||{},x.extend(b,t),delete b.fixLng,"string"==typeof b.ns&&(b.ns={namespaces:[b.ns],defaultNs:b.ns}),"string"==typeof b.fallbackNS&&(b.fallbackNS=[b.fallbackNS]),("string"==typeof b.fallbackLng||"boolean"==typeof b.fallbackLng)&&(b.fallbackLng=[b.fallbackLng]),b.interpolationPrefixEscaped=x.regexEscape(b.interpolationPrefix),b.interpolationSuffixEscaped=x.regexEscape(b.interpolationSuffix),b.lng||(b.lng=x.detectLanguage()),m=x.toLanguages(b.lng),u=m[0],x.log("currentLng set to: "+u),b.useCookie&&x.cookie.read(b.cookieName)!==u&&x.cookie.create(b.cookieName,u,b.cookieExpirationTime,b.cookieDomain),b.detectLngFromLocalStorage&&"undefined"!=typeof document&&window.localstorage&&window.localStorage.setItem("i18next_lng",u);var n,i=s;if(t.fixLng&&((i=function(t,e){return(e=e||{}).lng=e.lng||i.lng,s(t,e)}).lng=u),w.setCurrentLng(u),p&&b.setJqueryExt&&function(){function t(t,e,n){if(0!==e.length){var i,o="text";if(0===e.indexOf("[")){var a=e.split("]");e=a[1],o=a[0].substr(1,a[0].length-1)}if(e.indexOf(";")===e.length-1&&(e=e.substr(0,e.length-2)),"html"===o)i=b.defaultValueFromContent?p.extend({defaultValue:t.html()},n):n,t.html(p.t(e,i));else if("text"===o)i=b.defaultValueFromContent?p.extend({defaultValue:t.text()},n):n,t.text(p.t(e,i));else if("prepend"===o)i=b.defaultValueFromContent?p.extend({defaultValue:t.html()},n):n,t.prepend(p.t(e,i));else if("append"===o)i=b.defaultValueFromContent?p.extend({defaultValue:t.html()},n):n,t.append(p.t(e,i));else if(0===o.indexOf("data-")){var r=o.substr("data-".length);i=b.defaultValueFromContent?p.extend({defaultValue:t.data(r)},n):n;var s=p.t(e,i);t.data(r,s),t.attr(o,s)}else i=b.defaultValueFromContent?p.extend({defaultValue:t.attr(o)},n):n,t.attr(o,p.t(e,i))}}function e(e,n){var i=e.attr(b.selectorAttr);if(i||void 0===i||!1===i||(i=e.text()||e.val()),i){var o=e,a=e.data("i18n-target");if(a&&(o=e.find(a)||e),n||!0!==b.useDataAttrOptions||(n=e.data("i18n-options")),n=n||{},i.indexOf(";")>=0){var r=i.split(";");p.each(r,function(e,i){""!==i&&t(o,i,n)})}else t(o,i,n);!0===b.useDataAttrOptions&&e.data("i18n-options",n)}}p.t=p.t||s,p.fn.i18n=function(t){return this.each(function(){e(p(this),t);var n=p(this).find("["+b.selectorAttr+"]");n.each(function(){e(p(this),t)})})}}(),p&&p.Deferred&&(n=p.Deferred()),!b.resStore){var o=x.toLanguages(b.lng);"string"==typeof b.preload&&(b.preload=[b.preload]);for(var a=0,r=b.preload.length;r>a;a++)for(var l=x.toLanguages(b.preload[a]),c=0,d=l.length;d>c;c++)o.indexOf(l[c])<0&&o.push(l[c]);return h.sync.load(o,b,function(t,o){f=o,v=!0,e&&e(i),n&&n.resolve(i)}),n?n.promise():void 0}return f=b.resStore,v=!0,e&&e(i),n&&n.resolve(i),n?n.promise():void 0}function e(t,e,n,i){"string"!=typeof e?(resource=e,e=b.ns.defaultNs):b.ns.namespaces.indexOf(e)<0&&b.ns.namespaces.push(e),f[t]=f[t]||{},f[t][e]=f[t][e]||{};for(var o=n.split(b.keyseparator),a=0,r=f[b.lng][e];o[a];)a==o.length-1?r[o[a]]=i:(null==r[o[a]]&&(r[o[a]]={}),r=r[o[a]]),a++}function n(t,e){var n={dynamicLoad:b.dynamicLoad,resGetPath:b.resGetPath,getAsync:b.getAsync,customLoad:b.customLoad,ns:{namespaces:t,defaultNs:""}},i=x.toLanguages(b.lng);"string"==typeof b.preload&&(b.preload=[b.preload]);for(var o=0,a=b.preload.length;a>o;o++)for(var r=x.toLanguages(b.preload[o]),s=0,l=r.length;l>s;s++)i.indexOf(r[s])<0&&i.push(r[s]);for(var c=[],d=0,u=i.length;u>d;d++){var p=!1,g=f[i[d]];if(g)for(var m=0,v=t.length;v>m;m++)g[t[m]]||(p=!0);else p=!0;p&&c.push(i[d])}c.length?h.sync._fetch(c,n,function(n,i){var o=t.length*c.length;x.each(t,function(t,n){b.ns.namespaces.indexOf(n)<0&&b.ns.namespaces.push(n),x.each(c,function(t,a){f[a]=f[a]||{},f[a][n]=i[a][n],0==--o&&e&&(b.useLocalStorage&&h.sync._storeLocal(f),e())})})}):e&&e()}function i(t,e,n,o){if(!t)return t;if(o=o||e,t.indexOf(o.interpolationPrefix||b.interpolationPrefix)<0)return t;var a=o.interpolationPrefix?x.regexEscape(o.interpolationPrefix):b.interpolationPrefixEscaped,r=o.interpolationSuffix?x.regexEscape(o.interpolationSuffix):b.interpolationSuffixEscaped,s="HTML"+r,l=e.replace&&"object"==typeof e.replace?e.replace:e;return x.each(l,function(e,l){var c=n?n+b.keyseparator+e:e;t="object"==typeof l&&null!==l?i(t,l,c,o):o.escapeInterpolation||b.escapeInterpolation?(t=t.replace(new RegExp([a,c,s].join(""),"g"),x.regexReplacementEscape(l))).replace(new RegExp([a,c,r].join(""),"g"),x.regexReplacementEscape(x.escape(l))):t.replace(new RegExp([a,c,r].join(""),"g"),x.regexReplacementEscape(l))}),t}function o(t,e){var n=x.extend({},e);for(delete n.postProcess;-1!=t.indexOf(b.reusePrefix)&&!(++g>b.maxRecursion);){var i=t.lastIndexOf(b.reusePrefix),o=t.indexOf(b.reuseSuffix,i)+b.reuseSuffix.length,a=t.substring(i,o),r=a.replace(b.reusePrefix,"").replace(b.reuseSuffix,"");if(i>=o)return x.error("there is an missing closing in following translation value",t),"";if(-1!=r.indexOf(",")){var s=r.indexOf(",");if(-1!=r.indexOf("{",s)&&-1!=r.indexOf("}",s)){var l=r.indexOf("{",s),d=r.indexOf("}",l)+"}".length;try{n=x.extend(n,JSON.parse(r.substring(l,d))),r=r.substring(0,s)}catch(t){}}}var u=c(r,n);t=t.replace(a,x.regexReplacementEscape(u))}return t}function a(t,e){return void 0!==t.count&&"string"!=typeof t.count&&w.needsPlural(e,t.count)}function r(t,e){var n=l(t,e=e||{}),i=d(t,e);return void 0!==i||i===n}function s(t,e){return e=e||{},v?(g=0,c.apply(null,arguments)):(x.log("i18next not finished initialization. you might have called t function before loading resources finished."),e.defaultValue||"")}function l(t,e){return void 0!==e.defaultValue?e.defaultValue:t}function c(t,e){if(e&&"object"!=typeof e?"sprintf"===b.shortcutFunction?e=function(){for(var t=[],e=1;e<arguments.length;e++)t.push(arguments[e]);return{postProcess:"sprintf",sprintf:t}}.apply(null,arguments):"defaultValue"===b.shortcutFunction&&(e={defaultValue:e}):e=e||{},null==t||""===t)return"";"string"==typeof t&&(t=[t]);var n=t[0];if(t.length>1)for(var a=0;a<t.length&&!r(n=t[a],e);a++);var s,c=l(n,e),u=d(n,e),p=e.lng?x.toLanguages(e.lng,e.fallbackLng):m,h=e.ns||b.ns.defaultNs;n.indexOf(b.nsseparator)>-1&&(s=n.split(b.nsseparator),h=s[0],n=s[1]),void 0===u&&b.sendMissing&&"function"==typeof b.missingKeyHandler&&(e.lng?b.missingKeyHandler(p[0],h,n,c,p):b.missingKeyHandler(b.lng,h,n,c,p));var f=e.postProcess||b.postProcess;void 0!==u&&f&&D[f]&&(u=D[f](u,n,e));var g=c;if(c.indexOf(b.nsseparator)>-1&&(s=c.split(b.nsseparator),g=s[1]),g===n&&b.parseMissingKey&&(c=b.parseMissingKey(c)),void 0===u&&(c=o(c=i(c,e),e),f&&D[f])){var v=l(n,e);u=D[f](v,n,e)}return void 0!==u?u:c}function d(t,e){var n,r,u=l(t,e=e||{}),p=m;if(!f)return u;if("cimode"===p[0].toLowerCase())return u;if(e.lng&&(p=x.toLanguages(e.lng,e.fallbackLng),!f[p[0]])){var g=b.getAsync;b.getAsync=!1,h.sync.load(p,b,function(t,e){x.extend(f,e),b.getAsync=g})}var v=e.ns||b.ns.defaultNs;if(t.indexOf(b.nsseparator)>-1){var y=t.split(b.nsseparator);v=y[0],t=y[1]}if(function(t){return t.context&&("string"==typeof t.context||"number"==typeof t.context)}(e)){delete(n=x.extend({},e)).context,n.defaultValue=b.contextNotFound;var _=v+b.nsseparator+t+"_"+e.context;if((r=s(_,n))!=b.contextNotFound)return i(r,{context:e.context})}if(a(e,p[0])){delete(n=x.extend({},e)).count,n.defaultValue=b.pluralNotFound;var D=v+b.nsseparator+t+b.pluralSuffix,k=w.get(p[0],e.count);if(k>=0?D=D+"_"+k:1===k&&(D=v+b.nsseparator+t),(r=s(D,n))!=b.pluralNotFound)return i(r,{count:e.count,interpolationPrefix:e.interpolationPrefix,interpolationSuffix:e.interpolationSuffix})}if(function(t){return void 0!==t.indefinite_article&&"string"!=typeof t.indefinite_article&&t.indefinite_article}(e)){var T=x.extend({},e);delete T.indefinite_article,T.defaultValue=b.indefiniteNotFound;var C=v+b.nsseparator+t+(e.count&&!a(e,p[0])||!e.count?b.indefiniteSuffix:"");if((r=s(C,T))!=b.indefiniteNotFound)return r}for(var S,N=t.split(b.keyseparator),R=0,I=p.length;I>R&&void 0===S;R++){for(var P=p[R],E=0,A=f[P]&&f[P][v];N[E];)A=A&&A[N[E]],E++;if(void 0!==A){var M=Object.prototype.toString.apply(A);if("string"==typeof A)A=o(A=i(A,e),e);else if("[object Array]"!==M||b.returnObjectTrees||e.returnObjectTrees){if(null===A&&!0===b.fallbackOnNull)A=void 0;else if(null!==A)if(b.returnObjectTrees||e.returnObjectTrees){if("[object Number]"!==M&&"[object Function]"!==M&&"[object RegExp]"!==M){var L="[object Array]"===M?[]:{};x.each(A,function(n){L[n]=c(v+b.nsseparator+t+b.keyseparator+n,e)}),A=L}}else b.objectTreeKeyHandler&&"function"==typeof b.objectTreeKeyHandler?A=b.objectTreeKeyHandler(t,A,P,v,e):(A="key '"+v+":"+t+" ("+P+")' returned an object instead of string.",x.log(A))}else A=o(A=i(A=A.join("\n"),e),e);"string"==typeof A&&""===A.trim()&&!0===b.fallbackOnEmpty&&(A=void 0),S=A}}if(void 0===S&&!e.isFallbackLookup&&(!0===b.fallbackToDefaultNS||b.fallbackNS&&b.fallbackNS.length>0)){if(e.isFallbackLookup=!0,b.fallbackNS.length){for(var B=0,O=b.fallbackNS.length;O>B;B++)if(S=d(b.fallbackNS[B]+b.nsseparator+t,e)){var q=S.indexOf(b.nsseparator)>-1?S.split(b.nsseparator)[1]:S,F=u.indexOf(b.nsseparator)>-1?u.split(b.nsseparator)[1]:u;if(q!==F)break}}else S=d(t,e);e.isFallbackLookup=!1}return S}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&((i=Number(arguments[1]))!=i?i=0:0!=i&&1/0!=i&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var o=i>=0?i:Math.max(n-Math.abs(i),0);n>o;o++)if(o in e&&e[o]===t)return o;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var i=n;arguments.length>1&&((i=Number(arguments[1]))!=i?i=0:0!=i&&i!=1/0&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i))));for(var o=i>=0?Math.min(i,n-1):n-Math.abs(i);o>=0;o--)if(o in e&&e[o]===t)return o;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var u,p=void 0,h={},f={},g=0,m=[],v=!1;sync={load:function(t,e,n){e.useLocalStorage?sync._loadLocal(t,e,function(i,o){for(var a=[],r=0,s=t.length;s>r;r++)o[t[r]]||a.push(t[r]);a.length>0?sync._fetch(a,e,function(t,e){x.extend(o,e),sync._storeLocal(e),n(null,o)}):n(null,o)}):sync._fetch(t,e,function(t,e){n(null,e)})},_loadLocal:function(t,e,n){var i={},o=(new Date).getTime();if(window.localStorage){var a=t.length;x.each(t,function(t,r){var s=window.localStorage.getItem("res_"+r);s&&(s=JSON.parse(s)).i18nStamp&&s.i18nStamp+e.localStorageExpirationTime>o&&(i[r]=s),0==--a&&n(null,i)})}},_storeLocal:function(t){if(window.localStorage)for(var e in t)t[e].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+e,JSON.stringify(t[e]))},_fetch:function(t,e,n){var o=e.ns,a={};if(e.dynamicLoad){var r=function(t,e){n(null,e)};if("function"==typeof e.customLoad)e.customLoad(t,o.namespaces,e,r);else{var s=i(e.resGetPath,{lng:t.join("+"),ns:o.namespaces.join("+")});x.ajax({url:s,success:function(t){x.log("loaded: "+s),r(0,t)},error:function(t,e,n){x.log("failed loading: "+s),r()},dataType:"json",async:e.getAsync})}}else{var l,c=o.namespaces.length*t.length;x.each(o.namespaces,function(i,o){x.each(t,function(t,i){var r=function(t,e){t&&(l=l||[]).push(t),a[i]=a[i]||{},a[i][o]=e,0==--c&&n(l,a)};"function"==typeof e.customLoad?e.customLoad(i,o,e,r):sync._fetchOne(i,o,e,r)})})}},_fetchOne:function(t,e,n,o){var a=i(n.resGetPath,{lng:t,ns:e});x.ajax({url:a,success:function(t){x.log("loaded: "+a),o(null,t)},error:function(t,e,n){if(e&&200==e||t&&t.status&&200==t.status)x.error("There is a typo in: "+a);else if(e&&404==e||t&&t.status&&404==t.status)x.log("Does not exist: "+a);else{var i=e||(t&&t.status?t.status:null);x.log(i+" when loading "+a)}o(n,{})},dataType:"json",async:n.getAsync})},postMissing:function(t,e,n,o,a){var r={};r[n]=o;var s=[];if("fallback"===b.sendMissingTo&&!1!==b.fallbackLng[0])for(var l=0;l<b.fallbackLng.length;l++)s.push({lng:b.fallbackLng[l],url:i(b.resPostPath,{lng:b.fallbackLng[l],ns:e})});else if("current"===b.sendMissingTo||"fallback"===b.sendMissingTo&&!1===b.fallbackLng[0])s.push({lng:t,url:i(b.resPostPath,{lng:t,ns:e})});else if("all"===b.sendMissingTo)for(var l=0,c=a.length;c>l;l++)s.push({lng:a[l],url:i(b.resPostPath,{lng:a[l],ns:e})});for(var d=0,u=s.length;u>d;d++){var p=s[d];x.ajax({url:p.url,type:b.sendType,data:r,success:function(){x.log("posted missing key '"+n+"' to: "+p.url);for(var t=n.split("."),i=0,a=f[p.lng][e];t[i];)a=a[t[i]]=i===t.length-1?o:a[t[i]]||{},i++},error:function(){x.log("failed posting missing key '"+n+"' to: "+p.url)},dataType:"json",async:b.postAsync})}}};var b={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:["dev"],fallbackNS:[],detectLngQS:"setLng",detectLngFromLocalStorage:!1,ns:"translation",fallbackOnNull:!0,fallbackOnEmpty:!1,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,indefiniteSuffix:"_indefinite",indefiniteNotFound:["indefinite_not_found",Math.random()].join(""),setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",cookieDomain:void 0,objectTreeKeyHandler:void 0,postProcess:void 0,parseMissingKey:void 0,missingKeyHandler:sync.postMissing,shortcutFunction:"sprintf"},y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},_={create:function(t,e,n,i){var o;if(n){var a=new Date;a.setTime(a.getTime()+6e4*n),o="; expires="+a.toGMTString()}else o="";i=i?"domain="+i+";":"",document.cookie=t+"="+e+o+";"+i+"path=/"},read:function(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null},remove:function(t){this.create(t,"",-1)}},x={extend:p?p.extend:function(t,e){if(!e||"function"==typeof e)return t;for(var n in e)t[n]=e[n];return t},deepExtend:function t(e,n){for(var i in n)i in e?t(e[i],n[i]):e[i]=n[i];return e},each:p?p.each:function(t,e,n){var i,o=0,a=t.length,r=void 0===a||"[object Array]"!==Object.prototype.toString.apply(t)||"function"==typeof t;if(n)if(r){for(i in t)if(!1===e.apply(t[i],n))break}else for(;a>o&&!1!==e.apply(t[o++],n););else if(r){for(i in t)if(!1===e.call(t[i],i,t[i]))break}else for(;a>o&&!1!==e.call(t[o],o,t[o++]););return t},ajax:p?p.ajax:"undefined"!=typeof document?function(t){var e=function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(192|i>>6),e+=String.fromCharCode(128|63&i)):(e+=String.fromCharCode(224|i>>12),e+=String.fromCharCode(128|63&i>>6),e+=String.fromCharCode(128|63&i))}return e}(t);var n,i,o,a,r,s,l,c="",d=0;do{n=t.charCodeAt(d++),i=t.charCodeAt(d++),o=t.charCodeAt(d++),a=n>>2,r=(3&n)<<4|i>>4,s=(15&i)<<2|o>>6,l=63&o,isNaN(i)?s=l=64:isNaN(o)&&(l=64),c+=e.charAt(a)+e.charAt(r)+e.charAt(s)+e.charAt(l),n=i=o="",a=r=s=l=""}while(d<t.length);return c},n=function(t,e,i,o){"function"==typeof i&&(o=i,i={}),i.cache=i.cache||!1,i.data=i.data||{},i.headers=i.headers||{},i.jsonp=i.jsonp||!1,i.async=void 0===i.async||i.async;var a,r=function(){for(var t=arguments[0],e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t}({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},n.headers,i.headers);if(a="application/json"===r["content-type"]?JSON.stringify(i.data):function(t){if("string"==typeof t)return t;var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}(i.data),"GET"===t){var s=[];if(a&&(s.push(a),a=null),i.cache||s.push("_="+(new Date).getTime()),i.jsonp&&(s.push("callback="+i.jsonp),s.push("jsonp="+i.jsonp)),(s=s.join("&")).length>1&&(e+=e.indexOf("?")>-1?"&"+s:"?"+s),i.jsonp){var l=document.getElementsByTagName("head")[0],c=document.createElement("script");return c.type="text/javascript",c.src=e,void l.appendChild(c)}}!function(t){if(window.XMLHttpRequest)return t(null,new XMLHttpRequest);if(window.ActiveXObject)try{return t(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(e){return t(null,new ActiveXObject("Microsoft.XMLHTTP"))}t(new Error)}(function(n,s){if(n)return o(n);for(var l in s.open(t,e,i.async),r)r.hasOwnProperty(l)&&s.setRequestHeader(l,r[l]);s.onreadystatechange=function(){if(4===s.readyState){var t=s.responseText||"";if(!o)return;o(s.status,{text:function(){return t},json:function(){return JSON.parse(t)}})}},s.send(a)})},i={authBasic:function(t,i){n.headers.Authorization="Basic "+e(t+":"+i)},connect:function(t,e,i){return n("CONNECT",t,e,i)},del:function(t,e,i){return n("DELETE",t,e,i)},get:function(t,e,i){return n("GET",t,e,i)},head:function(t,e,i){return n("HEAD",t,e,i)},headers:function(t){n.headers=t||{}},isAllowed:function(t,e,n){this.options(t,function(t,i){n(-1!==i.text().indexOf(e))})},options:function(t,e,i){return n("OPTIONS",t,e,i)},patch:function(t,e,i){return n("PATCH",t,e,i)},post:function(t,e,i){return n("POST",t,e,i)},put:function(t,e,i){return n("PUT",t,e,i)},trace:function(t,e,i){return n("TRACE",t,e,i)}},o=t.type?t.type.toLowerCase():"get";i[o](t.url,t,function(e,n){200===e||0===e&&n.text()?t.success(n.json(),e,null):t.error(n.text(),e,null)})}:function(){},cookie:"undefined"!=typeof document?_:{create:function(){},read:function(){return null},remove:function(){}},detectLanguage:function(){var t,e=[];if("undefined"!=typeof window&&(function(){for(var t=window.location.search.substring(1),n=t.split("&"),i=0;i<n.length;i++){var o=n[i].indexOf("=");if(o>0){var a=n[i].substring(0,o),r=n[i].substring(o+1);e[a]=r}}}(),e[b.detectLngQS]&&(t=e[b.detectLngQS])),!t&&"undefined"!=typeof document&&b.useCookie){var n=x.cookie.read(b.cookieName);n&&(t=n)}return!t&&"undefined"!=typeof document&&window.localstorage&&b.detectLngFromLocalStorage&&(t=window.localStorage.getItem("i18next_lng")),t||"undefined"==typeof navigator||(t=navigator.language?navigator.language:navigator.userLanguage),t||(t=b.fallbackLng[0]),t},escape:function(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,function(t){return y[t]}):t},log:function(t){b.debug&&"undefined"!=typeof console&&console.log(t)},error:function(t){"undefined"!=typeof console&&console.error(t)},getCountyIndexOfLng:function(t){var e=0;return("nb-NO"===t||"nn-NO"===t)&&(e=1),e},toLanguages:function(t){var e=this.log,n=[],i=b.lngWhitelist||!1,o=function(t){!i||i.indexOf(t)>-1?n.push(t):e("rejecting non-whitelisted language: "+t)};if("string"==typeof t&&t.indexOf("-")>-1){var a=t.split("-");t=b.lowerCaseLng?a[0].toLowerCase()+"-"+a[1].toLowerCase():a[0].toLowerCase()+"-"+a[1].toUpperCase(),"unspecific"!==b.load&&o(t),"current"!==b.load&&o(a[this.getCountyIndexOfLng(t)])}else o(t);for(var r=0;r<b.fallbackLng.length;r++)-1===n.indexOf(b.fallbackLng[r])&&b.fallbackLng[r]&&n.push(b.fallbackLng[r]);return n},regexEscape:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},regexReplacementEscape:function(t){return"string"==typeof t?t.replace(/\$/g,"$$$$"):t}};x.applyReplacement=i;var w={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(t){return Number(t>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ak:{name:"Akan",numbers:[1,2],plurals:function(t){return Number(t>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(t){return Number(t>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(t){return Number(0===t?0:1==t?1:2==t?2:t%100>=3&&10>=t%100?3:t%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(t){return Number(t>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ay:{name:"Aymar",numbers:[1],plurals:function(){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(t){return Number(1!=t)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(t){return Number(1==t%10&&11!=t%100?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(t){return Number(1!=t)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(t){return Number(1!=t)}},bo:{name:"Tibetan",numbers:[1],plurals:function(){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(t){return Number(t>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(t){return Number(1==t%10&&11!=t%100?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(t){return Number(1!=t)}},cgg:{name:"Chiga",numbers:[1],plurals:function(){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(t){return Number(1==t?0:t>=2&&4>=t?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(t){return Number(1==t?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(t){return Number(1!=t)}},de:{name:"German",numbers:[1,2],plurals:function(t){return Number(1!=t)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(t){return Number(1!=t)}},en:{name:"English",numbers:[1,2],plurals:function(t){return Number(1!=t)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(t){return Number(1!=t)}},es:{name:"Spanish",numbers:[1,2],plurals:function(t){return Number(1!=t)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(t){return Number(1!=t)}},et:{name:"Estonian",numbers:[1,2],plurals:function(t){return Number(1!=t)}},eu:{name:"Basque",numbers:[1,2],plurals:function(t){return Number(1!=t)}},fa:{name:"Persian",numbers:[1],plurals:function(){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(t){return Number(1!=t)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(t){return Number(t>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(t){return Number(1!=t)}},fr:{name:"French",numbers:[1,2],plurals:function(t){return Number(t>=2)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(t){return Number(1!=t)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(t){return Number(1==t?0:2==t?1:7>t?2:11>t?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&20>t?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(t){return Number(1!=t)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(t){return Number(1!=t)}},gun:{name:"Gun",numbers:[1,2],plurals:function(t){return Number(t>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(t){return Number(1!=t)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(t){return Number(1!=t)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(t){return Number(1!=t)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(t){return Number(1==t%10&&11!=t%100?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(t){return Number(1!=t)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(t){return Number(1!=t)}},id:{name:"Indonesian",numbers:[1],plurals:function(){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(t){return Number(1!=t%10||11==t%100)}},it:{name:"Italian",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ja:{name:"Japanese",numbers:[1],plurals:function(){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(t){return Number(0!==t)}},ka:{name:"Georgian",numbers:[1],plurals:function(){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ko:{name:"Korean",numbers:[1],plurals:function(){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(t){return Number(1!=t)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(t){return Number(1==t?0:2==t?1:3==t?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(t){return Number(t>1)}},lo:{name:"Lao",numbers:[1],plurals:function(){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(t){return Number(1==t%10&&11!=t%100?0:t%10>=2&&(10>t%100||t%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[1,2,0],plurals:function(t){return Number(1==t%10&&11!=t%100?0:0!==t?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(t){return Number(1!=t)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(t){return Number(t>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(t){return Number(t>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(t){return Number(t>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(t){return Number(1==t||1==t%10?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(t){return Number(1!=t)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(t){return Number(1!=t)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(t){return Number(1==t?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ms:{name:"Malay",numbers:[1],plurals:function(){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(t){return Number(1==t?0:0===t||t%100>1&&11>t%100?1:t%100>10&&20>t%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(t){return Number(1!=t)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(t){return Number(1!=t)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(t){return Number(1!=t)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(t){return Number(1!=t)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(t){return Number(1!=t)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(t){return Number(1!=t)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(t){return Number(1!=t)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(t){return Number(t>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(t){return Number(1!=t)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(t){return Number(1!=t)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(t){return Number(1!=t)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(t){return Number(1==t?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(t){return Number(1!=t)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(t){return Number(1!=t)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(t){return Number(1!=t)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(t){return Number(1==t?0:0===t||t%100>0&&20>t%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(t){return Number(1==t%10&&11!=t%100?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(t){return Number(1!=t)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(t){return Number(1!=t)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(t){return Number(1!=t)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(t){return Number(1==t?0:t>=2&&4>=t?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(t){return Number(1==t%100?1:2==t%100?2:3==t%100||4==t%100?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(t){return Number(1!=t)}},son:{name:"Songhay",numbers:[1,2],plurals:function(t){return Number(1!=t)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(t){return Number(1!=t)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(t){return Number(1==t%10&&11!=t%100?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(t){return Number(1!=t)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(t){return Number(1!=t)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(t){return Number(1!=t)}},te:{name:"Telugu",numbers:[1,2],plurals:function(t){return Number(1!=t)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(t){return Number(t>1)}},th:{name:"Thai",numbers:[1],plurals:function(){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(t){return Number(t>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(t){return Number(1!=t)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(t){return Number(t>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(t){return Number(1==t%10&&11!=t%100?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(t){return Number(1!=t)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(t){return Number(t>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(t){return Number(t>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(t){return Number(1!=t)}},zh:{name:"Chinese",numbers:[1],plurals:function(){return 0}}},addRule:function(t,e){w.rules[t]=e},setCurrentLng:function(t){if(!w.currentRule||w.currentRule.lng!==t){var e=t.split("-");w.currentRule={lng:t,rule:w.rules[e[0]]}}},needsPlural:function(t,e){var n,i=t.split("-");return!((n=w.currentRule&&w.currentRule.lng===t?w.currentRule.rule:w.rules[i[x.getCountyIndexOfLng(t)]])&&n.numbers.length<=1)&&1!==this.get(t,e)},get:function(t,e){var n=t.split("-");return function(e,n){var i;if(i=w.currentRule&&w.currentRule.lng===t?w.currentRule.rule:w.rules[e]){var o;o=i.noAbs?i.plurals(n):i.plurals(Math.abs(n));var a=i.numbers[o];return 2===i.numbers.length&&1===i.numbers[0]&&(2===a?a=-1:1===a&&(a=1)),a}return 1===n?"1":"-1"}(n[x.getCountyIndexOfLng(t)],e)}},D={},k=function(t,e){D[t]=e},T=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function e(t,e){for(var n=[];e>0;n[--e]=t);return n.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,i){var o,a,r,s,l,c,d,u=1,p=n.length,h="",f=[];for(a=0;p>a;a++)if("string"===(h=t(n[a])))f.push(n[a]);else if("array"===h){if((s=n[a])[2])for(o=i[u],r=0;r<s[2].length;r++){if(!o.hasOwnProperty(s[2][r]))throw T('[sprintf] property "%s" does not exist',s[2][r]);o=o[s[2][r]]}else o=s[1]?i[s[1]]:i[u++];if(/[^s]/.test(s[8])&&"number"!=t(o))throw T("[sprintf] expecting number but found %s",t(o));switch(s[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=s[7]?o.toExponential(s[7]):o.toExponential();break;case"f":o=s[7]?parseFloat(o).toFixed(s[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&s[7]?o.substring(0,s[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(s[8])&&s[3]&&o>=0?"+"+o:o,c=s[4]?"0"==s[4]?"0":s[4].charAt(1):" ",d=s[6]-String(o).length,l=s[6]?e(c,d):"",f.push(s[5]?o+l:l+o)}return f.join("")},n.cache={},n.parse=function(t){for(var e=t,n=[],i=[],o=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))i.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))i.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw"[sprintf] huh?";if(n[2]){o|=1;var a=[],r=n[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(r)))throw"[sprintf] huh?";for(a.push(s[1]);""!==(r=r.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(r)))a.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(r)))throw"[sprintf] huh?";a.push(s[1])}n[2]=a}else o|=2;if(3===o)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";i.push(n)}e=e.substring(n[0].length)}return i},n}();return k("sprintf",function(t,e,n){return n.sprintf?"[object Array]"===Object.prototype.toString.apply(n.sprintf)?function(t,e){return e.unshift(t),T.apply(null,e)}(t,n.sprintf):"object"==typeof n.sprintf?T(t,n.sprintf):t:t}),h.init=t,h.setLng=function(e,n,i){return"function"==typeof n?(i=n,n={}):n||(n={}),n.lng=e,t(n,i)},h.preload=function(e,n){"string"==typeof e&&(e=[e]);for(var i=0,o=e.length;o>i;i++)b.preload.indexOf(e[i])<0&&b.preload.push(e[i]);return t(n)},h.addResourceBundle=function(t,e,n,i){"string"!=typeof e?(n=e,e=b.ns.defaultNs):b.ns.namespaces.indexOf(e)<0&&b.ns.namespaces.push(e),f[t]=f[t]||{},f[t][e]=f[t][e]||{},i?x.deepExtend(f[t][e],n):x.extend(f[t][e],n)},h.addResource=e,h.addResources=function(t,n,i){for(var o in"string"!=typeof n?(resource=n,n=b.ns.defaultNs):b.ns.namespaces.indexOf(n)<0&&b.ns.namespaces.push(n),i)"string"==typeof i[o]&&e(t,n,o,i[o])},h.removeResourceBundle=function(t,e){"string"!=typeof e&&(e=b.ns.defaultNs),f[t]=f[t]||{},f[t][e]={}},h.loadNamespace=function(t,e){n([t],e)},h.loadNamespaces=n,h.setDefaultNamespace=function(t){b.ns.defaultNs=t},h.t=s,h.translate=s,h.exists=r,h.detectLanguage=x.detectLanguage,h.pluralExtensions=w,h.sync=sync,h.functions=x,h.lng=function(){return u},h.addPostProcessor=k,h.options=b,h}()},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({initialize:function(t,e){},parse:function(t,e){return t}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(3),n(0),n(4),n(6),n(2),n(1)],void 0===(o=function(t,e,n,i,o,a){"use strict";return t.ItemView.extend({template:n.mainLoadingContentTemplate,initialize:function(t){}})}.apply(e,i))||(t.exports=o)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){"use strict";var e,n=!1,i={userTypeID:t("#searchUserData").attr("data-userTypeID"),apiUserId:t("#searchUserData").attr("data-apiUserId"),timeout_sec:t("#searchUserData").attr("data-sessionTimeout")};function o(){if(!(this instanceof o))throw new TypeError("pqOneUtil constructor cannot be called as a function.");n="true"===t("#pqOne_key").val()}return o.prototype={isChannelPqOne:function(){return n},reload:function(){n?window.top.postMessage({reloadPage:""},"*"):-1==window.location.href.indexOf("#")?window.location.href=window.location.href:window.location.reload()},navigateURL:function(t){n?window.top.postMessage({loadURL:t},"*"):window.location.href=t},navigateLoginURL:function(e){if(n){var i=t("#mayitestpg").attr("data-ebcDomainPrefix");if(i&&i.length>0){e=(e=i+e).replace("http:","https:");t("<a>",{id:"dmLink",href:e,target:"_top"}).appendTo("body");t("#dmLink")[0].click()}}else window.location.href=e},pqSessionKeepAlive:function(){n&&function(t,n,i){var o=this,a=arguments,r=i&&!e;clearTimeout(e),e=setTimeout(function(){e=null,i||t.apply(o,a)},n),r&&t.apply(o,a)}(function(){window.top.postMessage({keepAlive:i},"*")},1e4,!0)},adjustReaderHeight:function(){n&&window.top.postMessage({PQFrameHeight:""},"*")}},o}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({initialize:function(t,e){},parse:function(t,e){return t}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({idAttribute:"detailToc",url:function(){return"detail.action?remote_id="+this.get("ssen")+"&asJson=1&docID="+this.get("docID")},initialize:function(t,e){}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(3),n(0),n(4),n(6),n(2),n(1),n(14)],void 0===(o=function(t,e,n,i,o,a,r){"use strict";return t.ItemView.extend({template:n.panelBookNotesTemplate,tagName:"li",className:"annotation-level-2",initialize:function(t){this.gbData=t.model.collection.gbData},onBeforeRender:function(){},truncateLabel:function(t,e,n){return t.length>e&&(t=(t=t.substring(0,e+1)).substring(0,Math.min(t.length,t.lastIndexOf(" "))),t+=n),t},onRender:function(){this.gbData.BiblioData=this.model.get("BiblioData")||{},this.model.collection.gbData.uAccsMdRR>0&&this.$el.attr({role:"listitem",tabindex:"0"})},modelEvents:{"change remove":"render"},events:{"click .annotation-page,.annotation-content":"lookupId","click .annotation-type":"lookupTypeId","click .annotation-delete":"trashAnnot"},lookupTypeId:function(t){t.preventDefault();var n=this.model.get("data").physicalPage;if(a.trigger("jtp",n,this.model.get("data")),"link"!==this.model.get("data").annotType||!this.model.get("data").bookMark){var i={annots:this.model.get("data"),chapterId:this.model.get("cptInd")};0===e("#mainViewerBookMark_"+n).length?setTimeout(function(){a.trigger("pAntSh",i)},650):a.trigger("pAntSh",i)}},lookupId:function(t){t.preventDefault();var e=this.model.get("data").physicalPage;a.trigger("jtp",e,"ok")},trashAnnot:function(t){t.preventDefault();var e={annots:this.model.get("data"),chapterId:this.model.get("cptInd")};a.trigger("pAntDel",e)}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(2),n(9)],void 0===(a=function(t,e,n,o,a,r){"use strict";return e.ItemView.extend({template:n.readerSideBarTemplate,id:"firstPrintWrapper",defaults:{tbPrintName:"firstprintDefaultWrapper"},initialize:function(t){var e=i.extend({},t);this.model=new r(e),this.model.bind("sync",this.render,this),this.render()},events:{"hidden.bs.modal":"goingToHideMode","keypress #shareBookLink":"lookForCopy"},onRender:function(){t.data(this,"testTimeoutFocus",setTimeout(function(){t("#shareUrl").focus()},550))},goingToHideMode:function(){this.doneCopy(),this.remove()},lookForCopy:function(e){var n=e.which;e.ctrlKey&&99===n&&(t("#shareUrl").focus(),t("#shareUrl").select())},doneCopy:function(e){t("#shareUrl").focus(),t("#shareUrl").select(),t("#shareUrl").trigger({type:"keydown",which:99})}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(0),n(3),n(4),n(1),n(2),n(9)],void 0===(o=function(t,e,n,i,o,a){"use strict";return e.ItemView.extend({template:n.dummyTemplate,el:"#dummyPrintWrapper",defaults:{tbPrintName:"radioPrint"},initialize:function(t){},onRender:function(){}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(3),n(0),n(4),n(6),n(2),n(1),n(110)],void 0===(a=function(t,e,n,o,a,r,s){"use strict";return t.ItemView.extend({template:n.panelBookSearchYouMeanResultTemplate,id:"didYouMeanSearchResult",defaults:{panelSearchResultName:"didYouMeanSearchResult"},initialize:function(t){this.gbData=t.model.collection.gbData;var e=i.extend({},t.model.collection.gbData,t.model.attributes);this.model=new s(e),this.model.bind("sync",this.render,this),this.model.fetch()},events:{"click .did-you-mean-result>a":"goToSearchByLink"},onBeforeRender:function(){},onRender:function(){},goToSearchByLink:function(t){t.preventDefault();var n=e(t.currentTarget);r.trigger("openBshT",n.text())}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){(function(i){var o,a;o=[n(3),n(0),n(4),n(6),n(2),n(1)],void 0===(a=function(t,e,n,o,a,r){"use strict";return t.ItemView.extend({template:n.panelBookSearchChapterResultChildSnipTemplate,el:function(){return"#chapterLevelSnips_"+this.model.get("cptInd")},initialize:function(t){var e=i.extend({},{tmpLpg:t.model.collection.gbData.tmpLpg},this.model.attributes);this.model.attributes=e,this.chptNum=this.model.get("cptInd")},events:{"click  [id^='snipHit_']":"lookupId","keypress .search-level-2":"lookupIdUp"},onRender:function(){if(this.model.collection.gbData.uAccsMdRR>0){var t=this;setTimeout(function(){e("#chapterLevelSnips_"+t.model.get("cptInd")).attr("role","group").focus()},2e3)}},templateHelpers:{findByPageNum:function(t){return"22"}},lookupId:function(t){t.preventDefault();var n=e(t.currentTarget).attr("id").split("_")[1];r.trigger("jtp",n,"ok")},lookupIdUp:function(t){var n=t.type;if("click"==n||"keypress"==n&&(13==t.which||32==t.which)){t.preventDefault();var i=e(t.currentTarget).attr("id").split("_")[1];r.trigger("jtp",i,"ok")}}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(7),n(0),n(113),n(6),n(2),n(1),n(8)],void 0===(o=function(t,e,n,i,o,a,r){"use strict";return t.Collection.extend({model:n,url:function(){return"termSnippet.action?remote_id="+this.gbData.ssen+"&docID="+this.gbData.docID+"&p00="+encodeURIComponent(this.gbData.searchTerm)+"&curInd=0&bksize=100&cptId="+this.gbData.tmpcpid},initialize:function(t,e){this.gbData=e},prepareData:function(t){this.gbData.tmpcpid=t||1;var n=e.trim(this.gbData.searchTerm);if(this.reset(),void 0!==n&&n.length>0){this.gbData.searchTerm=n;var i=this;e.ajax({url:i.url(),success:function(o){null!=o.snip?(i.add({id:t,cid:t,cptInd:t,searchTerm:n,data:o.snip},{add:!0,remove:!0,merge:!1}),o.snip.orderedPagesWithSnippet&&i.gbData.uAccsMdRR<1&&a.trigger("jtp",o.snip.orderedPagesWithSnippet[0].pageNumber,"ok")):e("#dialog-error-msg").show().find("#msg").empty().html(r.t("rr_error")+o["status-message"])},error:function(t,n,i){e("#dialog-error-msg").show().find("#msg").empty().html(r.t("rr_please_try_again"))}})}}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(7),n(0),n(114),n(6),n(2),n(1),n(8)],void 0===(a=function(t,e,n,o,a,r,s){"use strict";return t.Collection.extend({model:n,sort_key:"cptInd",sort_stru:"",sortColumn:null,sortDirection:"asc",reParts:/\d+|\D+/g,reDigit:/\d/,url:function(){return void 0!==this.gbData.tmpantop?"remoteDoc.api?remote_id="+this.gbData.ssen+"&cmd=pages&docid="+this.gbData.docID+"&op=cptSAnt&cst="+this.gbData.tmpantop.chapterStart+"&ced="+this.gbData.tmpantop.chapterEnd+"&cpid="+this.gbData.tmpantop.chapterId+"&rpgr=an0&dt=1":"remoteDoc.api?remote_id="+this.gbData.ssen+"&cmd=pages&docid="+this.gbData.docID+"&op=cptAnt&rpgr=an0&dt=1"},initialize:function(t,e){this.gbData=e},cmpStringsWithNumbers:function(t,e){t=1==t?"1":String(t),e=1==e?"1":String(e);var n,i=t.match(this.reParts),o=e.match(this.reParts);if(i&&o&&(n=this.reDigit.test(i[0]))==this.reDigit.test(o[0]))for(var a=Math.min(i.length,o.length),r=0;r<a;r++){var s=i[r],l=o[r];if(n&&(s=parseInt(s,10),l=parseInt(l,10)),s!=l)return s<l?-1:1;n=!n}return(t>=e)-(t<=e)},comparator:function(t,e){var n="data"===this.sort_stru?t.attributes.data:t.attributes,o="data"===this.sort_stru?e.attributes.data:e.attributes;return i.isUndefined(n.physicalPage)?n[this.sort_key]<o[this.sort_key]?-1:1:i.isUndefined(o)?1:n.physicalPage==o.physicalPage?null==o.annotType?-1:o.bookMark?1:n.bookMark?-1:n.pageLevelNote?-1:parseInt(n.startQuad)===parseInt(o.startQuad)?this.strcmp(n.annotType,o.annotType):parseInt(n.startQuad)<parseInt(o.startQuad)?-1:1:n.physicalPage<o.physicalPage?-1:1},strcmp:function(t,e){return t<e?-1:t>e?1:0},sortByField:function(t,e){this.sort_key=t,this.sort_stru=e,this.sort()},sortByFields:function(t,e,n){this.sortColumn=t,this.sort_stru=e,this.sortDirection=n,this.sort()},prepareData:function(t){this.gbData.antop=1,this.reset();parseInt(e("#current-page").val());var n=this;e.ajax({url:n.url(),success:function(t){if(0==t["status-code"]){var i=[];for(var o in t.chapAnnotDetails)i.push(o);if(i.length>0){var a=1,r=[];for(a=1;a<=i.length;a++){var l=t.chapAnnotDetails[i[a-1]];r[r.length]={panelNotesResultName:"notesResult",cptInd:l.chapterId,at:l.chapterId,cid:l.chapterId,_id:l.chapterId,title:l.chapterName,data:l}}n.add(r,{add:!0,remove:!0,merge:!1})}}else{e("#dialog-error-msg").show().find("#msg").empty().html(s.t("rr_error")+t["status-message"])}},error:function(t,n,i){e("#dialog-error-msg").show().find("#msg").empty().html(s.t("rr_please_try_again"))}})},prepareSnipData:function(t,n){this.gbData.antop=2,this.gbData.tmpantop=n,this.reset();parseInt(e("#current-page").val());this.sortByFields("physicalPage,bookMark,pageLevelNote,startQuad","data","asc,desc,desc,desc");var i=this;e.ajax({url:i.url(),success:function(t){if(0==t["status-code"]){var o=[];for(var a in t.annots)o.push(a);if(o.length>0){var r=1,l=[];for(r=1;r<=o.length;r++){var c=t.annots;l[l.length]={panelNotesResultName:"notesResult",name:c[r-1].annotID,cptInd:n.chapterId,at:c[r-1].annotID,cid:c[r-1].annotID,_id:c[r-1].annotID,data:c[r-1]}}i.add(l,{add:!0,remove:!0,merge:!1}),i.sortByFields("physicalPage,bookMark,pageLevelNote,startQuad","data","asc,desc,desc,desc")}}else{e("#dialog-error-msg").show().find("#msg").empty().html(s.t("rr_error")+t["status-message"])}},error:function(t,n,i){e("#dialog-error-msg").show().find("#msg").empty().html(s.t("rr_please_try_again"))}})}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(3),n(0),n(4),n(6),n(2),n(1)],void 0===(o=function(t,e,n,i,o,a){"use strict";return t.ItemView.extend({template:n.panelBookSearchFrequencyResultTemplate,id:"frequencySearchResult",defaults:{panelSearchResultName:"frequencySearchResult"},initialize:function(t){},onBeforeRender:function(){},onRender:function(){},events:{"click #searchResultByChapterInFq":"toggleChapterFrequency","click #searchResultByFrequenceyInFq":"toggleFrequencyChapter"},toggleChapterFrequency:function(t){e("#chapterSearchResult").show(),e("#frequencySearchResult").hide()},toggleFrequencyChapter:function(t){e("#chapterSearchResult").hide(),e("#frequencySearchResult").show()}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0),n(130),n(6),n(2),n(1),n(8)],void 0===(o=function(t,e,n,i,o,a,r){"use strict";return t.Collection.extend({model:n,docTmp:{},url:function(){var t="page=("+this.gbData.tmpFetchPageNum+")&zoom="+this.gbData.zm+"&encID="+this.gbData.encID+"&op="+(1===this.gbData.tmpOpt?"view":"fetch");return"remoteDocServer.api?remote_id="+this.gbData.ssen+"&encrypted="+this.pebr.enc(t)+"&nq=1&search="+encodeURIComponent(this.gbData.searchTerm)+"&tm=1"},initialize:function(t,e){this.comparator="pageNum";var n=o.readCookie("ESESSIONID");this.pebr=new i,this.pebr.init(n),this.gbData=e,this.prepareData()},prepareData:function(){var t=this.gbData.tmpFetchPageNum,n=parseInt(this.gbData.tmpzmMaxWidth*this.gbData.divzm),i=parseInt(this.gbData.tmpzmMaxHeight*this.gbData.divzm);this.gbData.orgWd=n,this.gbData.orgHgt=i;var o=this.gbData.tmpOpt=1;if(void 0===this.get(t)){var a=this;a.add({at:t,cid:t,_id:t,pageNum:t,ht:a.gbData.orgHgt,wd:a.gbData.orgWd,tmpOpt:o}).fetch({data:{cid:t,_id:t,pageNum:t,tmpOpt:o},remove:!1,add:!1,merge:!0,success:function(n,i,o){e("#mainViewerPagesContainerWrapper").css({height:(a.gbData.orgHgt+a.gbData.widthTest)*a.gbData.tpg,width:a.gbData.orgWd}),e("#mainViewerPagesContainer").css({height:a.gbData.orgHgt+20,width:a.gbData.orgWd});var r=e("#mainViewer");if(r.css({width:e(window).outerWidth()-e("#svgSideBarLayoutRegion").outerWidth()-e("#panelLayoutRegion").outerWidth()}),1==t&&a.gbData.tpg>=2)s=(s=115-r.scrollTop())%2==0?s+2:s+1,r.scrollTop(s);else if(r.length>0&&void 0!==r.offset()){var s=Math.ceil(r.scrollTop()-r.offset().top+e("#mainPageContainer_"+t).offset().top);r.scrollTop(s)}},error:function(n,i,o){e("#dialog-error-msg").show().find("#msg").empty().html(r.t("rr_failed_to_fetch_page")+t)}})}},prepareDataNewOrg:function(){var t=this.gbData.tmpFetchPageNum,n=parseInt(this.gbData.tmpzmMaxWidth*this.gbData.zm),i=parseInt(this.gbData.tmpzmMaxHeight*this.gbData.zm);this.gbData.orgWd=n,this.gbData.orgHgt=i,e("#mainViewerPagesContainerWrapper").css({height:(this.gbData.orgHgt+this.gbData.widthTest)*this.gbData.tpg,width:this.gbData.orgWd}),e("#mainViewerPagesContainer").css({height:this.gbData.orgHgt+20,width:this.gbData.orgWd});var o=this;o.fetch({at:t,cid:t,_id:t,pageNum:t,fst:2,ht:i,wd:n,remove:!1,merge:!1,success:function(a,s,l){var c=JSON.parse(a.pebr.dec(s.dcy));if(0===c["status-code"]){for(var d=[],u=1;u<=o.gbData.tpg;u++)d[d.length]={at:u,cid:u,_id:u,pageNum:u,ht:i,wd:n};1==t&&o.gbData.tpg>=2?e("#mainViewer").scrollTop(1):e("#mainViewer").scrollTop(e("#mainViewer").scrollTop()-e("#mainViewer").offset().top+e("#mainPageContainer_"+t).offset().top)}else{e("#dialog-error-msg").show().find("#msg").empty().html(r.t("rr_error")+c["status-message"])}},error:function(n,i,o){e("#dialog-error-msg").show().find("#msg").empty().html(r.t("rr_failed_to_fetch_page")+t)}})},prepareDataOrg:function(){},deleteAnnot:function(t,n){var i="ppg="+t+"&encID="+this.gbData.encID+"&id="+n+"&op=removeAnnot",o="remoteBookshelf.api?encrypted="+this.pebr.enc(i)+"&remote_id="+this.gbData.ssen+"&tm=1",s=!0;return e.ajax({dataType:"json",url:o,async:!1,success:function(t){void 0!==t.status&&void 0===t.errorCode?0===t["status-code"]&&(s=!0):(s=!1,void 0===t.errorCode||"SESSION_TIMED_OUT"!==t.errorCode&&"LOGIN_REQUIRED"!==t.errorCode?e("#dialogModalAlertError").modal("show").find("#msg").empty().html(r.t("rr_error")+t["status-message"]):a.trigger("tbsgn","to_delete"))},error:function(t,n,i){e("#dialogModalAlertError").modal("show").find("#msg").empty().html(r.t("rr_error_refresh_try_again"))}}),s}})}.apply(e,i))||(t.exports=o)},function(t,e,n){t.exports=n(25)},function(t,e,n){n(26).Promise.resolve().then(function(){(function(t){var e=[n(31),n(7),n(133),n(134),n(135),n(8),n(148)];(function(e,n,i,o,a,r,s){"use strict";r.init({ns:{namespaces:["reader"],defaultNs:"reader"},useLocalStorage:!0,resGetPath:"/locales/__ns_____lng__.mjson",lng:t("html").attr("lang"),detectLngFromHeaders:!1,fallbackLng:"en"},function(n){t(document).ready(function(){e.start(),e.desktopReaderRouter=new i({controller:o})})})}).apply(null,e)}).call(this,n(0))}).catch(n.oe)},function(t,e,n){(function(e,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.6+9869a4bc
 */var i;i=function(){"use strict";function t(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,a=void 0,r=void 0,s=function(t,e){f[o]=t,f[o+1]=e,2===(o+=2)&&(r?r(g):_())},l="undefined"!=typeof window?window:void 0,c=l||{},d=c.MutationObserver||c.WebKitMutationObserver,u="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(g,1)}}var f=new Array(1e3);function g(){for(var t=0;t<o;t+=2){(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0}o=0}var m,v,b,y,_=void 0;function x(t,e){var n=this,i=new this.constructor(k);void 0===i[D]&&F(i);var o=n._state;if(o){var a=arguments[o-1];s(function(){return O(o,i,a,n._result)})}else L(n,i,t,e);return i}function w(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(k);return P(e,t),e}u?_=function(){return e.nextTick(g)}:d?(v=0,b=new d(g),y=document.createTextNode(""),b.observe(y,{characterData:!0}),_=function(){y.data=v=++v%2}):p?((m=new MessageChannel).port1.onmessage=g,_=function(){return m.port2.postMessage(0)}):_=void 0===l?function(){try{var t=Function("return this")().require("vertx");return void 0!==(a=t.runOnLoop||t.runOnContext)?function(){a(g)}:h()}catch(t){return h()}}():h();var D=Math.random().toString(36).substring(2);function k(){}var T=void 0,C=1,S=2,N={error:null};function R(t){try{return t.then}catch(t){return N.error=t,N}}function I(e,n,i){n.constructor===e.constructor&&i===x&&n.constructor.resolve===w?function(t,e){e._state===C?A(t,e._result):e._state===S?M(t,e._result):L(e,void 0,function(e){return P(t,e)},function(e){return M(t,e)})}(e,n):i===N?(M(e,N.error),N.error=null):void 0===i?A(e,n):t(i)?function(t,e,n){s(function(t){var i=!1,o=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(n,e,function(n){i||(i=!0,e!==n?P(t,n):A(t,n))},function(e){i||(i=!0,M(t,e))},t._label);!i&&o&&(i=!0,M(t,o))},t)}(e,n,i):A(e,n)}function P(t,e){var n,i;t===e?M(t,new TypeError("You cannot resolve a promise with itself")):(i=typeof(n=e),null===n||"object"!==i&&"function"!==i?A(t,e):I(t,e,R(e)))}function E(t){t._onerror&&t._onerror(t._result),B(t)}function A(t,e){t._state===T&&(t._result=e,t._state=C,0!==t._subscribers.length&&s(B,t))}function M(t,e){t._state===T&&(t._state=S,t._result=e,s(E,t))}function L(t,e,n,i){var o=t._subscribers,a=o.length;t._onerror=null,o[a]=e,o[a+C]=n,o[a+S]=i,0===a&&t._state&&s(B,t)}function B(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,o=void 0,a=t._result,r=0;r<e.length;r+=3)i=e[r],o=e[r+n],i?O(n,i,o,a):o(a);t._subscribers.length=0}}function O(e,n,i,o){var a=t(i),r=void 0,s=void 0,l=void 0,c=void 0;if(a){if((r=function(t,e){try{return t(e)}catch(t){return N.error=t,N}}(i,o))===N?(c=!0,s=r.error,r.error=null):l=!0,n===r)return void M(n,new TypeError("A promises callback cannot return that same promise."))}else r=o,l=!0;n._state!==T||(a&&l?P(n,r):c?M(n,s):e===C?A(n,r):e===S&&M(n,r))}var q=0;function F(t){t[D]=q++,t._state=void 0,t._result=void 0,t._subscribers=[]}var U=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(k),this.promise[D]||F(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&A(this.promise,this._result))):M(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===T&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===w){var o=R(t);if(o===x&&t._state!==T)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===H){var a=new n(k);I(a,t,o),this._willSettleAt(a,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},t.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===T&&(this._remaining--,t===S?M(i,n):this._result[e]=n),0===this._remaining&&A(i,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;L(t,void 0,function(t){return n._settledAt(C,e,t)},function(t){return n._settledAt(S,e,t)})},t}(),H=function(){function e(t){this[D]=q++,this._result=this._state=void 0,this._subscribers=[],k!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){P(t,e)},function(e){M(t,e)})}catch(e){M(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return H.prototype.then=x,H.all=function(t){return new U(this,t).promise},H.race=function(t){var e=this;return i(t)?new e(function(n,i){for(var o=t.length,a=0;a<o;a++)e.resolve(t[a]).then(n,i)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},H.resolve=w,H.reject=function(t){var e=new this(k);return M(e,t),e},H._setScheduler=function(t){r=t},H._setAsap=function(t){s=t},H._asap=s,H.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=H},H.Promise=H,H},t.exports=i()}).call(this,n(27),n(11))},function(t,e){var n,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(t){i=r}}();var l,c=[],d=!1,u=-1;function p(){d&&l&&(d=!1,l.length?c=l.concat(c):u=-1,c.length&&h())}function h(){if(!d){var t=s(p);d=!0;for(var e=c.length;e;){for(l=c,c=[];++u<e;)l&&l[u].run();u=-1,e=c.length}l=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||d||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){(function(e){t.exports=e.jQuery=n(29)}).call(this,n(11))},function(t,e,n){(function(e){e.window||(e.window={}),t.exports=e.window.$=n(30)}).call(this,n(11))},function(t,e,n){var i,o,a;
/*!
 * jQuery JavaScript Library v1.11.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-17T15:27Z
 */
/*!
 * jQuery JavaScript Library v1.11.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-17T15:27Z
 */
o="undefined"!=typeof window?window:this,a=function(n,o){var a=[],r=a.slice,s=a.concat,l=a.push,c=a.indexOf,d={},u=d.toString,p=d.hasOwnProperty,h={},f=function(t,e){return new f.fn.init(t,e)},g=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,v=/-([\da-z])/gi,b=function(t,e){return e.toUpperCase()};function y(t){var e=t.length,n=f.type(t);return"function"!==n&&!f.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t))}f.fn=f.prototype={jquery:"1.11.2",constructor:f,selector:"",length:0,toArray:function(){return r.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:r.call(this)},pushStack:function(t){var e=f.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return f.each(this,t,e)},map:function(t){return this.pushStack(f.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:l,sort:a.sort,splice:a.splice},f.extend=f.fn.extend=function(){var t,e,n,i,o,a,r=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[s]||{},s++),"object"==typeof r||f.isFunction(r)||(r={}),s===l&&(r=this,s--);s<l;s++)if(null!=(o=arguments[s]))for(i in o)t=r[i],r!==(n=o[i])&&(c&&n&&(f.isPlainObject(n)||(e=f.isArray(n)))?(e?(e=!1,a=t&&f.isArray(t)?t:[]):a=t&&f.isPlainObject(t)?t:{},r[i]=f.extend(c,a,n)):void 0!==n&&(r[i]=n));return r},f.extend({expando:"jQuery"+("1.11.2"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===f.type(t)},isArray:Array.isArray||function(t){return"array"===f.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!f.isArray(t)&&t-parseFloat(t)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==f.type(t)||t.nodeType||f.isWindow(t))return!1;try{if(t.constructor&&!p.call(t,"constructor")&&!p.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(h.ownLast)for(e in t)return p.call(t,e);for(e in t);return void 0===e||p.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[u.call(t)]||"object":typeof t},globalEval:function(t){t&&f.trim(t)&&(n.execScript||function(t){n.eval.call(n,t)})(t)},camelCase:function(t){return t.replace(m,"ms-").replace(v,b)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var i=0,o=t.length,a=y(t);if(n){if(a)for(;i<o&&!1!==e.apply(t[i],n);i++);else for(i in t)if(!1===e.apply(t[i],n))break}else if(a)for(;i<o&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(g,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(y(Object(t))?f.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){var i;if(e){if(c)return c.call(e,t,n);for(i=e.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;)t[o++]=e[i++];if(n!=n)for(;void 0!==e[i];)t[o++]=e[i++];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,a=t.length,r=!n;o<a;o++)!e(t[o],o)!==r&&i.push(t[o]);return i},map:function(t,e,n){var i,o=0,a=t.length,r=[];if(y(t))for(;o<a;o++)null!=(i=e(t[o],o,n))&&r.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&r.push(i);return s.apply([],r)},guid:1,proxy:function(t,e){var n,i,o;if("string"==typeof e&&(o=t[e],e=t,t=o),f.isFunction(t))return n=r.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(r.call(arguments)))}).guid=t.guid=t.guid||f.guid++,i},now:function(){return+new Date},support:h}),f.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){d["[object "+e+"]"]=e.toLowerCase()});var _=
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
function(t){var e,n,i,o,a,r,s,l,c,d,u,p,h,f,g,m,v,b,y,_="sizzle"+1*new Date,x=t.document,w=0,D=0,k=rt(),T=rt(),C=rt(),S=function(t,e){return t===e&&(u=!0),0},N=1<<31,R={}.hasOwnProperty,I=[],P=I.pop,E=I.push,A=I.push,M=I.slice,L=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",O="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",F=q.replace("w","w#"),U="\\["+O+"*("+q+")(?:"+O+"*([*^$|!~]?=)"+O+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+O+"*\\]",H=":("+q+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",$=new RegExp(O+"+","g"),j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),z=new RegExp("^"+O+"*,"+O+"*"),W=new RegExp("^"+O+"*([>+~]|"+O+")"+O+"*"),V=new RegExp("="+O+"*([^\\]'\"]*?)"+O+"*\\]","g"),Q=new RegExp(H),Z=new RegExp("^"+F+"$"),G={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+O+"?|("+O+")|.)","ig"),it=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ot=function(){p()};try{A.apply(I=M.call(x.childNodes),x.childNodes),I[x.childNodes.length].nodeType}catch(t){A={apply:I.length?function(t,e){E.apply(t,M.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function at(t,e,i,o){var a,s,c,d,u,f,v,b,w,D;if((e?e.ownerDocument||e:x)!==h&&p(e),i=i||[],d=(e=e||h).nodeType,"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return i;if(!o&&g){if(11!==d&&(a=J.exec(t)))if(c=a[1]){if(9===d){if(!(s=e.getElementById(c))||!s.parentNode)return i;if(s.id===c)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(c))&&y(e,s)&&s.id===c)return i.push(s),i}else{if(a[2])return A.apply(i,e.getElementsByTagName(t)),i;if((c=a[3])&&n.getElementsByClassName)return A.apply(i,e.getElementsByClassName(c)),i}if(n.qsa&&(!m||!m.test(t))){if(b=v=_,w=e,D=1!==d&&t,1===d&&"object"!==e.nodeName.toLowerCase()){for(f=r(t),(v=e.getAttribute("id"))?b=v.replace(et,"\\$&"):e.setAttribute("id",b),b="[id='"+b+"'] ",u=f.length;u--;)f[u]=b+mt(f[u]);w=tt.test(t)&&ft(e.parentNode)||e,D=f.join(",")}if(D)try{return A.apply(i,w.querySelectorAll(D)),i}catch(t){}finally{v||e.removeAttribute("id")}}}return l(t.replace(j,"$1"),e,i,o)}function rt(){var t=[];return function e(n,o){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=o}}function st(t){return t[_]=!0,t}function lt(t){var e=h.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),o=t.length;o--;)i.attrHandle[n[o]]=e}function dt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||N)-(~t.sourceIndex||N);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ut(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ht(t){return st(function(e){return e=+e,st(function(n,i){for(var o,a=t([],n.length,e),r=a.length;r--;)n[o=a[r]]&&(n[o]=!(i[o]=n[o]))})})}function ft(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},a=at.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},p=at.setDocument=function(t){var e,o,r=t?t.ownerDocument||t:x;return r!==h&&9===r.nodeType&&r.documentElement?(h=r,f=r.documentElement,(o=r.defaultView)&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",ot,!1):o.attachEvent&&o.attachEvent("onunload",ot)),g=!a(r),n.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=lt(function(t){return t.appendChild(r.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(r.getElementsByClassName),n.getById=lt(function(t){return f.appendChild(t).id=_,!r.getElementsByName||!r.getElementsByName(_).length}),n.getById?(i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(t){var e=t.replace(nt,it);return function(t){return t.getAttribute("id")===e}}):(delete i.find.ID,i.filter.ID=function(t){var e=t.replace(nt,it);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,a=e.getElementsByTagName(t);if("*"===t){for(;n=a[o++];)1===n.nodeType&&i.push(n);return i}return a},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=Y.test(r.querySelectorAll))&&(lt(function(t){f.appendChild(t).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+O+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+O+"*(?:value|"+B+")"),t.querySelectorAll("[id~="+_+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+_+"+*").length||m.push(".#.+[+~]")}),lt(function(t){var e=r.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+O+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(b=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&lt(function(t){n.disconnectedMatch=b.call(t,"div"),b.call(t,"[s!='']:x"),v.push("!=",H)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=Y.test(f.compareDocumentPosition),y=e||Y.test(f.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},S=e?function(t,e){if(t===e)return u=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===r||t.ownerDocument===x&&y(x,t)?-1:e===r||e.ownerDocument===x&&y(x,e)?1:d?L(d,t)-L(d,e):0:4&i?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,i=0,o=t.parentNode,a=e.parentNode,s=[t],l=[e];if(!o||!a)return t===r?-1:e===r?1:o?-1:a?1:d?L(d,t)-L(d,e):0;if(o===a)return dt(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?dt(s[i],l[i]):s[i]===x?-1:l[i]===x?1:0},r):h},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if((t.ownerDocument||t)!==h&&p(t),e=e.replace(V,"='$1']"),n.matchesSelector&&g&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var i=b.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return at(e,h,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!==h&&p(t),y(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!==h&&p(t);var o=i.attrHandle[e.toLowerCase()],a=o&&R.call(i.attrHandle,e.toLowerCase())?o(t,e,!g):void 0;return void 0!==a?a:n.attributes||!g?t.getAttribute(e):(a=t.getAttributeNode(e))&&a.specified?a.value:null},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,i=[],o=0,a=0;if(u=!n.detectDuplicates,d=!n.sortStable&&t.slice(0),t.sort(S),u){for(;e=t[a++];)e===t[a]&&(o=i.push(a));for(;o--;)t.splice(i[o],1)}return d=null,t},o=at.getText=function(t){var e,n="",i=0,a=t.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===a||4===a)return t.nodeValue}else for(;e=t[i++];)n+=o(e);return n},(i=at.selectors={cacheLength:50,createPseudo:st,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(nt,it),t[3]=(t[3]||t[4]||t[5]||"").replace(nt,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&Q.test(n)&&(e=r(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(nt,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=k[t+" "];return e||(e=new RegExp("(^|"+O+")"+t+"("+O+"|$)"))&&k(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var o=at.attr(i,t);return null==o?"!="===e:!e||(o+="","="===e?o===n:"!="===e?o!==n:"^="===e?n&&0===o.indexOf(n):"*="===e?n&&o.indexOf(n)>-1:"$="===e?n&&o.slice(-n.length)===n:"~="===e?(" "+o.replace($," ")+" ").indexOf(n)>-1:"|="===e&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,o){var a="nth"!==t.slice(0,3),r="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,d,u,p,h,f,g=a!==r?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),b=!l&&!s;if(m){if(a){for(;g;){for(u=e;u=u[g];)if(s?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?m.firstChild:m.lastChild],r&&b){for(h=(c=(d=m[_]||(m[_]={}))[t]||[])[0]===w&&c[1],p=c[0]===w&&c[2],u=h&&m.childNodes[h];u=++h&&u&&u[g]||(p=h=0)||f.pop();)if(1===u.nodeType&&++p&&u===e){d[t]=[w,h,p];break}}else if(b&&(c=(e[_]||(e[_]={}))[t])&&c[0]===w)p=c[1];else for(;(u=++h&&u&&u[g]||(p=h=0)||f.pop())&&((s?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++p||(b&&((u[_]||(u[_]={}))[t]=[w,p]),u!==e)););return(p-=o)===i||p%i==0&&p/i>=0}}},PSEUDO:function(t,e){var n,o=i.pseudos[t]||i.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return o[_]?o(e):o.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,n){for(var i,a=o(t,e),r=a.length;r--;)t[i=L(t,a[r])]=!(n[i]=a[r])}):function(t){return o(t,0,n)}):o}},pseudos:{not:st(function(t){var e=[],n=[],i=s(t.replace(j,"$1"));return i[_]?st(function(t,e,n,o){for(var a,r=i(t,null,o,[]),s=t.length;s--;)(a=r[s])&&(t[s]=!(e[s]=a))}):function(t,o,a){return e[0]=t,i(e,null,a,n),e[0]=null,!n.pop()}}),has:st(function(t){return function(e){return at(t,e).length>0}}),contains:st(function(t){return t=t.replace(nt,it),function(e){return(e.textContent||e.innerText||o(e)).indexOf(t)>-1}}),lang:st(function(t){return Z.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(nt,it).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return X.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ht(function(){return[0]}),last:ht(function(t,e){return[e-1]}),eq:ht(function(t,e,n){return[n<0?n+e:n]}),even:ht(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:ht(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:ht(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:ht(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=ut(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=pt(e);function gt(){}function mt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function vt(t,e,n){var i=e.dir,o=n&&"parentNode"===i,a=D++;return e.first?function(e,n,a){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,a)}:function(e,n,r){var s,l,c=[w,a];if(r){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,r))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if((s=(l=e[_]||(e[_]={}))[i])&&s[0]===w&&s[1]===a)return c[2]=s[2];if(l[i]=c,c[2]=t(e,n,r))return!0}}}function bt(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function yt(t,e,n,i,o){for(var a,r=[],s=0,l=t.length,c=null!=e;s<l;s++)(a=t[s])&&(n&&!n(a,i,o)||(r.push(a),c&&e.push(s)));return r}function _t(t,e,n,i,o,a){return i&&!i[_]&&(i=_t(i)),o&&!o[_]&&(o=_t(o,a)),st(function(a,r,s,l){var c,d,u,p=[],h=[],f=r.length,g=a||function(t,e,n){for(var i=0,o=e.length;i<o;i++)at(t,e[i],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!a&&e?g:yt(g,p,t,s,l),v=n?o||(a?t:f||i)?[]:r:m;if(n&&n(m,v,s,l),i)for(c=yt(v,h),i(c,[],s,l),d=c.length;d--;)(u=c[d])&&(v[h[d]]=!(m[h[d]]=u));if(a){if(o||t){if(o){for(c=[],d=v.length;d--;)(u=v[d])&&c.push(m[d]=u);o(null,v=[],c,l)}for(d=v.length;d--;)(u=v[d])&&(c=o?L(a,u):p[d])>-1&&(a[c]=!(r[c]=u))}}else v=yt(v===r?v.splice(f,v.length):v),o?o(null,r,v,l):A.apply(r,v)})}function xt(t){for(var e,n,o,a=t.length,r=i.relative[t[0].type],s=r||i.relative[" "],l=r?1:0,d=vt(function(t){return t===e},s,!0),u=vt(function(t){return L(e,t)>-1},s,!0),p=[function(t,n,i){var o=!r&&(i||n!==c)||((e=n).nodeType?d(t,n,i):u(t,n,i));return e=null,o}];l<a;l++)if(n=i.relative[t[l].type])p=[vt(bt(p),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[_]){for(o=++l;o<a&&!i.relative[t[o].type];o++);return _t(l>1&&bt(p),l>1&&mt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(j,"$1"),n,l<o&&xt(t.slice(l,o)),o<a&&xt(t=t.slice(o)),o<a&&mt(t))}p.push(n)}return bt(p)}return gt.prototype=i.filters=i.pseudos,i.setFilters=new gt,r=at.tokenize=function(t,e){var n,o,a,r,s,l,c,d=T[t+" "];if(d)return e?0:d.slice(0);for(s=t,l=[],c=i.preFilter;s;){for(r in n&&!(o=z.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(a=[])),n=!1,(o=W.exec(s))&&(n=o.shift(),a.push({value:n,type:o[0].replace(j," ")}),s=s.slice(n.length)),i.filter)!(o=G[r].exec(s))||c[r]&&!(o=c[r](o))||(n=o.shift(),a.push({value:n,type:r,matches:o}),s=s.slice(n.length));if(!n)break}return e?s.length:s?at.error(t):T(t,l).slice(0)},s=at.compile=function(t,e){var n,o=[],a=[],s=C[t+" "];if(!s){for(e||(e=r(t)),n=e.length;n--;)(s=xt(e[n]))[_]?o.push(s):a.push(s);(s=C(t,function(t,e){var n=e.length>0,o=t.length>0,a=function(a,r,s,l,d){var u,p,f,g=0,m="0",v=a&&[],b=[],y=c,_=a||o&&i.find.TAG("*",d),x=w+=null==y?1:Math.random()||.1,D=_.length;for(d&&(c=r!==h&&r);m!==D&&null!=(u=_[m]);m++){if(o&&u){for(p=0;f=t[p++];)if(f(u,r,s)){l.push(u);break}d&&(w=x)}n&&((u=!f&&u)&&g--,a&&v.push(u))}if(g+=m,n&&m!==g){for(p=0;f=e[p++];)f(v,b,r,s);if(a){if(g>0)for(;m--;)v[m]||b[m]||(b[m]=P.call(l));b=yt(b)}A.apply(l,b),d&&!a&&b.length>0&&g+e.length>1&&at.uniqueSort(l)}return d&&(w=x,c=y),v};return n?st(a):a}(a,o))).selector=t}return s},l=at.select=function(t,e,o,a){var l,c,d,u,p,h="function"==typeof t&&t,f=!a&&r(t=h.selector||t);if(o=o||[],1===f.length){if((c=f[0]=f[0].slice(0)).length>2&&"ID"===(d=c[0]).type&&n.getById&&9===e.nodeType&&g&&i.relative[c[1].type]){if(!(e=(i.find.ID(d.matches[0].replace(nt,it),e)||[])[0]))return o;h&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(l=G.needsContext.test(t)?0:c.length;l--&&(d=c[l],!i.relative[u=d.type]);)if((p=i.find[u])&&(a=p(d.matches[0].replace(nt,it),tt.test(c[0].type)&&ft(e.parentNode)||e))){if(c.splice(l,1),!(t=a.length&&mt(c)))return A.apply(o,a),o;break}}return(h||s(t,f))(a,e,!g,o,tt.test(t)&&ft(e.parentNode)||e),o},n.sortStable=_.split("").sort(S).join("")===_,n.detectDuplicates=!!u,p(),n.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(h.createElement("div"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ct(B,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),at}(n);f.find=_,f.expr=_.selectors,f.expr[":"]=f.expr.pseudos,f.unique=_.uniqueSort,f.text=_.getText,f.isXMLDoc=_.isXML,f.contains=_.contains;var x=f.expr.match.needsContext,w=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,D=/^.[^:#\[\.,]*$/;function k(t,e,n){if(f.isFunction(e))return f.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return f.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(D.test(e))return f.filter(e,t,n);e=f.filter(e,t)}return f.grep(t,function(t){return f.inArray(t,e)>=0!==n})}f.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?f.find.matchesSelector(i,t)?[i]:[]:f.find.matches(t,f.grep(e,function(t){return 1===t.nodeType}))},f.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(f(t).filter(function(){for(e=0;e<o;e++)if(f.contains(i[e],this))return!0}));for(e=0;e<o;e++)f.find(t,i[e],n);return(n=this.pushStack(o>1?f.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(k(this,t||[],!1))},not:function(t){return this.pushStack(k(this,t||[],!0))},is:function(t){return!!k(this,"string"==typeof t&&x.test(t)?f(t):t||[],!1).length}});var T,C=n.document,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(f.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(!(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:S.exec(t))||!n[1]&&e)return!e||e.jquery?(e||T).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof f?e[0]:e,f.merge(this,f.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:C,!0)),w.test(n[1])&&f.isPlainObject(e))for(n in e)f.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if((i=C.getElementById(n[2]))&&i.parentNode){if(i.id!==n[2])return T.find(t);this.length=1,this[0]=i}return this.context=C,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):f.isFunction(t)?void 0!==T.ready?T.ready(t):t(f):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),f.makeArray(t,this))}).prototype=f.fn,T=f(C);var N=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}f.extend({dir:function(t,e,n){for(var i=[],o=t[e];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!f(o).is(n));)1===o.nodeType&&i.push(o),o=o[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),f.fn.extend({has:function(t){var e,n=f(t,this),i=n.length;return this.filter(function(){for(e=0;e<i;e++)if(f.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,a=[],r=x.test(t)||"string"!=typeof t?f(t,e||this.context):0;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&f.find.matchesSelector(n,t))){a.push(n);break}return this.pushStack(a.length>1?f.unique(a):a)},index:function(t){return t?"string"==typeof t?f.inArray(this[0],f(t)):f.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(f.unique(f.merge(this.get(),f(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),f.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return f.dir(t,"parentNode")},parentsUntil:function(t,e,n){return f.dir(t,"parentNode",n)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return f.dir(t,"nextSibling")},prevAll:function(t){return f.dir(t,"previousSibling")},nextUntil:function(t,e,n){return f.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return f.dir(t,"previousSibling",n)},siblings:function(t){return f.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return f.sibling(t.firstChild)},contents:function(t){return f.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:f.merge([],t.childNodes)}},function(t,e){f.fn[t]=function(n,i){var o=f.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=f.filter(i,o)),this.length>1&&(R[t]||(o=f.unique(o)),N.test(t)&&(o=o.reverse())),this.pushStack(o)}});var P,E=/\S+/g,A={};function M(){C.addEventListener?(C.removeEventListener("DOMContentLoaded",L,!1),n.removeEventListener("load",L,!1)):(C.detachEvent("onreadystatechange",L),n.detachEvent("onload",L))}function L(){(C.addEventListener||"load"===event.type||"complete"===C.readyState)&&(M(),f.ready())}f.Callbacks=function(t){t="string"==typeof t?A[t]||function(t){var e=A[t]={};return f.each(t.match(E)||[],function(t,n){e[n]=!0}),e}(t):f.extend({},t);var e,n,i,o,a,r,s=[],l=!t.once&&[],c=function(u){for(n=t.memory&&u,i=!0,a=r||0,r=0,o=s.length,e=!0;s&&a<o;a++)if(!1===s[a].apply(u[0],u[1])&&t.stopOnFalse){n=!1;break}e=!1,s&&(l?l.length&&c(l.shift()):n?s=[]:d.disable())},d={add:function(){if(s){var i=s.length;!function e(n){f.each(n,function(n,i){var o=f.type(i);"function"===o?t.unique&&d.has(i)||s.push(i):i&&i.length&&"string"!==o&&e(i)})}(arguments),e?o=s.length:n&&(r=i,c(n))}return this},remove:function(){return s&&f.each(arguments,function(t,n){for(var i;(i=f.inArray(n,s,i))>-1;)s.splice(i,1),e&&(i<=o&&o--,i<=a&&a--)}),this},has:function(t){return t?f.inArray(t,s)>-1:!(!s||!s.length)},empty:function(){return s=[],o=0,this},disable:function(){return s=l=n=void 0,this},disabled:function(){return!s},lock:function(){return l=void 0,n||d.disable(),this},locked:function(){return!l},fireWith:function(t,n){return!s||i&&!l||(n=[t,(n=n||[]).slice?n.slice():n],e?l.push(n):c(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},f.extend({Deferred:function(t){var e=[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",f.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return f.Deferred(function(n){f.each(e,function(e,a){var r=f.isFunction(t[e])&&t[e];o[a[1]](function(){var t=r&&r.apply(this,arguments);t&&f.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a[0]+"With"](this===i?n.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?f.extend(t,i):i}},o={};return i.pipe=i.then,f.each(e,function(t,a){var r=a[2],s=a[3];i[a[1]]=r.add,s&&r.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?i:this,arguments),this},o[a[0]+"With"]=r.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,a=r.call(arguments),s=a.length,l=1!==s||t&&f.isFunction(t.promise)?s:0,c=1===l?t:f.Deferred(),d=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?r.call(arguments):o,i===e?c.notifyWith(n,i):--l||c.resolveWith(n,i)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);o<s;o++)a[o]&&f.isFunction(a[o].promise)?a[o].promise().done(d(o,i,a)).fail(c.reject).progress(d(o,n,e)):--l;return l||c.resolveWith(i,a),c.promise()}}),f.fn.ready=function(t){return f.ready.promise().done(t),this},f.extend({isReady:!1,readyWait:1,holdReady:function(t){t?f.readyWait++:f.ready(!0)},ready:function(t){if(!0===t?!--f.readyWait:!f.isReady){if(!C.body)return setTimeout(f.ready);f.isReady=!0,!0!==t&&--f.readyWait>0||(P.resolveWith(C,[f]),f.fn.triggerHandler&&(f(C).triggerHandler("ready"),f(C).off("ready")))}}}),f.ready.promise=function(t){if(!P)if(P=f.Deferred(),"complete"===C.readyState)setTimeout(f.ready);else if(C.addEventListener)C.addEventListener("DOMContentLoaded",L,!1),n.addEventListener("load",L,!1);else{C.attachEvent("onreadystatechange",L),n.attachEvent("onload",L);var e=!1;try{e=null==n.frameElement&&C.documentElement}catch(t){}e&&e.doScroll&&function t(){if(!f.isReady){try{e.doScroll("left")}catch(e){return setTimeout(t,50)}M(),f.ready()}}()}return P.promise(t)};var B,O="undefined";for(B in f(h))break;h.ownLast="0"!==B,h.inlineBlockNeedsLayout=!1,f(function(){var t,e,n,i;(n=C.getElementsByTagName("body")[0])&&n.style&&(e=C.createElement("div"),(i=C.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==O&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",h.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=C.createElement("div");if(null==h.deleteExpando){h.deleteExpando=!0;try{delete t.test}catch(t){h.deleteExpando=!1}}t=null}(),f.acceptData=function(t){var e=f.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return(1===n||9===n)&&(!e||!0!==e&&t.getAttribute("classid")===e)};var q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,F=/([A-Z])/g;function U(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(F,"-$1").toLowerCase();if("string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:q.test(n)?f.parseJSON(n):n)}catch(t){}f.data(t,e,n)}else n=void 0}return n}function H(t){var e;for(e in t)if(("data"!==e||!f.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function $(t,e,n,i){if(f.acceptData(t)){var o,r,s=f.expando,l=t.nodeType,c=l?f.cache:t,d=l?t[s]:t[s]&&s;if(d&&c[d]&&(i||c[d].data)||void 0!==n||"string"!=typeof e)return d||(d=l?t[s]=a.pop()||f.guid++:s),c[d]||(c[d]=l?{}:{toJSON:f.noop}),"object"!=typeof e&&"function"!=typeof e||(i?c[d]=f.extend(c[d],e):c[d].data=f.extend(c[d].data,e)),r=c[d],i||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[f.camelCase(e)]=n),"string"==typeof e?null==(o=r[e])&&(o=r[f.camelCase(e)]):o=r,o}}function j(t,e,n){if(f.acceptData(t)){var i,o,a=t.nodeType,r=a?f.cache:t,s=a?t[f.expando]:f.expando;if(r[s]){if(e&&(i=n?r[s]:r[s].data)){o=(e=f.isArray(e)?e.concat(f.map(e,f.camelCase)):e in i?[e]:(e=f.camelCase(e))in i?[e]:e.split(" ")).length;for(;o--;)delete i[e[o]];if(n?!H(i):!f.isEmptyObject(i))return}(n||(delete r[s].data,H(r[s])))&&(a?f.cleanData([t],!0):h.deleteExpando||r!=r.window?delete r[s]:r[s]=null)}}}f.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?f.cache[t[f.expando]]:t[f.expando])&&!H(t)},data:function(t,e,n){return $(t,e,n)},removeData:function(t,e){return j(t,e)},_data:function(t,e,n){return $(t,e,n,!0)},_removeData:function(t,e){return j(t,e,!0)}}),f.fn.extend({data:function(t,e){var n,i,o,a=this[0],r=a&&a.attributes;if(void 0===t){if(this.length&&(o=f.data(a),1===a.nodeType&&!f._data(a,"parsedAttrs"))){for(n=r.length;n--;)r[n]&&0===(i=r[n].name).indexOf("data-")&&U(a,i=f.camelCase(i.slice(5)),o[i]);f._data(a,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){f.data(this,t)}):arguments.length>1?this.each(function(){f.data(this,t,e)}):a?U(a,t,f.data(a,t)):void 0},removeData:function(t){return this.each(function(){f.removeData(this,t)})}}),f.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=f._data(t,e),n&&(!i||f.isArray(n)?i=f._data(t,e,f.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=f.queue(t,e),i=n.length,o=n.shift(),a=f._queueHooks(t,e);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete a.stop,o.call(t,function(){f.dequeue(t,e)},a)),!i&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return f._data(t,n)||f._data(t,n,{empty:f.Callbacks("once memory").add(function(){f._removeData(t,e+"queue"),f._removeData(t,n)})})}}),f.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?f.queue(this[0],t):void 0===e?this:this.each(function(){var n=f.queue(this,t,e);f._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&f.dequeue(this,t)})},dequeue:function(t){return this.each(function(){f.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=f.Deferred(),a=this,r=this.length,s=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(n=f._data(a[r],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(e)}});var z=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,W=["Top","Right","Bottom","Left"],V=function(t,e){return t=e||t,"none"===f.css(t,"display")||!f.contains(t.ownerDocument,t)},Q=f.access=function(t,e,n,i,o,a,r){var s=0,l=t.length,c=null==n;if("object"===f.type(n))for(s in o=!0,n)f.access(t,e,s,n[s],!0,a,r);else if(void 0!==i&&(o=!0,f.isFunction(i)||(r=!0),c&&(r?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(f(t),n)})),e))for(;s<l;s++)e(t[s],n,r?i:i.call(t[s],s,e(t[s],n)));return o?t:c?e.call(t):l?e(t[0],n):a},Z=/^(?:checkbox|radio)$/i;!function(){var t=C.createElement("input"),e=C.createElement("div"),n=C.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",h.leadingWhitespace=3===e.firstChild.nodeType,h.tbody=!e.getElementsByTagName("tbody").length,h.htmlSerialize=!!e.getElementsByTagName("link").length,h.html5Clone="<:nav></:nav>"!==C.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),h.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,h.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){h.noCloneEvent=!1}),e.cloneNode(!0).click()),null==h.deleteExpando){h.deleteExpando=!0;try{delete e.test}catch(t){h.deleteExpando=!1}}}(),function(){var t,e,i=C.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})e="on"+t,(h[t+"Bubbles"]=e in n)||(i.setAttribute(e,"t"),h[t+"Bubbles"]=!1===i.attributes[e].expando);i=null}();var G=/^(?:input|select|textarea)$/i,K=/^key/,X=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,J=/^([^.]*)(?:\.(.+)|)$/;function tt(){return!0}function et(){return!1}function nt(){try{return C.activeElement}catch(t){}}function it(t){var e=ot.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}f.event={global:{},add:function(t,e,n,i,o){var a,r,s,l,c,d,u,p,h,g,m,v=f._data(t);if(v){for(n.handler&&(n=(l=n).handler,o=l.selector),n.guid||(n.guid=f.guid++),(r=v.events)||(r=v.events={}),(d=v.handle)||((d=v.handle=function(t){return typeof f===O||t&&f.event.triggered===t.type?void 0:f.event.dispatch.apply(d.elem,arguments)}).elem=t),s=(e=(e||"").match(E)||[""]).length;s--;)h=m=(a=J.exec(e[s])||[])[1],g=(a[2]||"").split(".").sort(),h&&(c=f.event.special[h]||{},h=(o?c.delegateType:c.bindType)||h,c=f.event.special[h]||{},u=f.extend({type:h,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&f.expr.match.needsContext.test(o),namespace:g.join(".")},l),(p=r[h])||((p=r[h]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,i,g,d)||(t.addEventListener?t.addEventListener(h,d,!1):t.attachEvent&&t.attachEvent("on"+h,d))),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,u):p.push(u),f.event.global[h]=!0);t=null}},remove:function(t,e,n,i,o){var a,r,s,l,c,d,u,p,h,g,m,v=f.hasData(t)&&f._data(t);if(v&&(d=v.events)){for(c=(e=(e||"").match(E)||[""]).length;c--;)if(h=m=(s=J.exec(e[c])||[])[1],g=(s[2]||"").split(".").sort(),h){for(u=f.event.special[h]||{},p=d[h=(i?u.delegateType:u.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=p.length;a--;)r=p[a],!o&&m!==r.origType||n&&n.guid!==r.guid||s&&!s.test(r.namespace)||i&&i!==r.selector&&("**"!==i||!r.selector)||(p.splice(a,1),r.selector&&p.delegateCount--,u.remove&&u.remove.call(t,r));l&&!p.length&&(u.teardown&&!1!==u.teardown.call(t,g,v.handle)||f.removeEvent(t,h,v.handle),delete d[h])}else for(h in d)f.event.remove(t,h+e[c],n,i,!0);f.isEmptyObject(d)&&(delete v.handle,f._removeData(t,"events"))}},trigger:function(t,e,i,o){var a,r,s,l,c,d,u,h=[i||C],g=p.call(t,"type")?t.type:t,m=p.call(t,"namespace")?t.namespace.split("."):[];if(s=d=i=i||C,3!==i.nodeType&&8!==i.nodeType&&!Y.test(g+f.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),r=g.indexOf(":")<0&&"on"+g,(t=t[f.expando]?t:new f.Event(g,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:f.makeArray(e,[t]),c=f.event.special[g]||{},o||!c.trigger||!1!==c.trigger.apply(i,e))){if(!o&&!c.noBubble&&!f.isWindow(i)){for(l=c.delegateType||g,Y.test(l+g)||(s=s.parentNode);s;s=s.parentNode)h.push(s),d=s;d===(i.ownerDocument||C)&&h.push(d.defaultView||d.parentWindow||n)}for(u=0;(s=h[u++])&&!t.isPropagationStopped();)t.type=u>1?l:c.bindType||g,(a=(f._data(s,"events")||{})[t.type]&&f._data(s,"handle"))&&a.apply(s,e),(a=r&&s[r])&&a.apply&&f.acceptData(s)&&(t.result=a.apply(s,e),!1===t.result&&t.preventDefault());if(t.type=g,!o&&!t.isDefaultPrevented()&&(!c._default||!1===c._default.apply(h.pop(),e))&&f.acceptData(i)&&r&&i[g]&&!f.isWindow(i)){(d=i[r])&&(i[r]=null),f.event.triggered=g;try{i[g]()}catch(t){}f.event.triggered=void 0,d&&(i[r]=d)}return t.result}},dispatch:function(t){t=f.event.fix(t);var e,n,i,o,a,s,l=r.call(arguments),c=(f._data(this,"events")||{})[t.type]||[],d=f.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,t)){for(s=f.event.handlers.call(this,t,c),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,a=0;(i=o.handlers[a++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(i.namespace)||(t.handleObj=i,t.data=i.data,void 0!==(n=((f.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l))&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,a,r=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(o=[],a=0;a<s;a++)void 0===o[n=(i=e[a]).selector+" "]&&(o[n]=i.needsContext?f(n,this).index(l)>=0:f.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&r.push({elem:l,handlers:o})}return s<e.length&&r.push({elem:this,handlers:e.slice(s)}),r},fix:function(t){if(t[f.expando])return t;var e,n,i,o=t.type,a=t,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=X.test(o)?this.mouseHooks:K.test(o)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,t=new f.Event(a),e=i.length;e--;)t[n=i[e]]=a[n];return t.target||(t.target=a.srcElement||C),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,a):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,a=e.button,r=e.fromElement;return null==t.pageX&&null!=e.clientX&&(o=(i=t.target.ownerDocument||C).documentElement,n=i.body,t.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&r&&(t.relatedTarget=r===t.target?e.toElement:r),t.which||void 0===a||(t.which=1&a?1:2&a?3:4&a?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==nt()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===nt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(f.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return f.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=f.extend(new f.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?f.event.trigger(o,null,e):f.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},f.removeEvent=C.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===O&&(t[i]=null),t.detachEvent(i,n))},f.Event=function(t,e){if(!(this instanceof f.Event))return new f.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?tt:et):this.type=t,e&&f.extend(this,e),this.timeStamp=t&&t.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=tt,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=tt,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=tt,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},f.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){f.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,o=t.handleObj;return i&&(i===this||f.contains(this,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),h.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=f.nodeName(e,"input")||f.nodeName(e,"button")?e.form:void 0;n&&!f._data(n,"submitBubbles")&&(f.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),f._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&f.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),h.changeBubbles||(f.event.special.change={setup:function(){if(G.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(f.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),f.event.simulate("change",this,t,!0)})),!1;f.event.add(this,"beforeactivate._change",function(t){var e=t.target;G.test(e.nodeName)&&!f._data(e,"changeBubbles")&&(f.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||f.event.simulate("change",this.parentNode,t,!0)}),f._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return f.event.remove(this,"._change"),!G.test(this.nodeName)}}),h.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){f.event.simulate(e,t.target,f.event.fix(t),!0)};f.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=f._data(i,e);o||i.addEventListener(t,n,!0),f._data(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=f._data(i,e)-1;o?f._data(i,e,o):(i.removeEventListener(t,n,!0),f._removeData(i,e))}}}),f.fn.extend({on:function(t,e,n,i,o){var a,r;if("object"==typeof t){for(a in"string"!=typeof e&&(n=n||e,e=void 0),t)this.on(a,e,n,t[a],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),!1===i)i=et;else if(!i)return this;return 1===o&&(r=i,(i=function(t){return f().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=f.guid++)),this.each(function(){f.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,f(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=et),this.each(function(){f.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){f.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return f.event.trigger(t,e,n,!0)}});var ot="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",at=/ jQuery\d+="(?:null|\d+)"/g,rt=new RegExp("<(?:"+ot+")[\\s/>]","i"),st=/^\s+/,lt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ct=/<([\w:]+)/,dt=/<tbody/i,ut=/<|&#?\w+;/,pt=/<(?:script|style|link)/i,ht=/checked\s*(?:[^=]|=\s*.checked.)/i,ft=/^$|\/(?:java|ecma)script/i,gt=/^true\/(.*)/,mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,vt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:h.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},bt=it(C).appendChild(C.createElement("div"));function yt(t,e){var n,i,o=0,a=typeof t.getElementsByTagName!==O?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==O?t.querySelectorAll(e||"*"):void 0;if(!a)for(a=[],n=t.childNodes||t;null!=(i=n[o]);o++)!e||f.nodeName(i,e)?a.push(i):f.merge(a,yt(i,e));return void 0===e||e&&f.nodeName(t,e)?f.merge([t],a):a}function _t(t){Z.test(t.type)&&(t.defaultChecked=t.checked)}function xt(t,e){return f.nodeName(t,"table")&&f.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function wt(t){return t.type=(null!==f.find.attr(t,"type"))+"/"+t.type,t}function Dt(t){var e=gt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function kt(t,e){for(var n,i=0;null!=(n=t[i]);i++)f._data(n,"globalEval",!e||f._data(e[i],"globalEval"))}function Tt(t,e){if(1===e.nodeType&&f.hasData(t)){var n,i,o,a=f._data(t),r=f._data(e,a),s=a.events;if(s)for(n in delete r.handle,r.events={},s)for(i=0,o=s[n].length;i<o;i++)f.event.add(e,n,s[n][i]);r.data&&(r.data=f.extend({},r.data))}}function Ct(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!h.noCloneEvent&&e[f.expando]){for(i in(o=f._data(e)).events)f.removeEvent(e,i,o.handle);e.removeAttribute(f.expando)}"script"===n&&e.text!==t.text?(wt(e).text=t.text,Dt(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),h.html5Clone&&t.innerHTML&&!f.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Z.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}vt.optgroup=vt.option,vt.tbody=vt.tfoot=vt.colgroup=vt.caption=vt.thead,vt.th=vt.td,f.extend({clone:function(t,e,n){var i,o,a,r,s,l=f.contains(t.ownerDocument,t);if(h.html5Clone||f.isXMLDoc(t)||!rt.test("<"+t.nodeName+">")?a=t.cloneNode(!0):(bt.innerHTML=t.outerHTML,bt.removeChild(a=bt.firstChild)),!(h.noCloneEvent&&h.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||f.isXMLDoc(t)))for(i=yt(a),s=yt(t),r=0;null!=(o=s[r]);++r)i[r]&&Ct(o,i[r]);if(e)if(n)for(s=s||yt(t),i=i||yt(a),r=0;null!=(o=s[r]);r++)Tt(o,i[r]);else Tt(t,a);return(i=yt(a,"script")).length>0&&kt(i,!l&&yt(t,"script")),i=s=o=null,a},buildFragment:function(t,e,n,i){for(var o,a,r,s,l,c,d,u=t.length,p=it(e),g=[],m=0;m<u;m++)if((a=t[m])||0===a)if("object"===f.type(a))f.merge(g,a.nodeType?[a]:a);else if(ut.test(a)){for(s=s||p.appendChild(e.createElement("div")),l=(ct.exec(a)||["",""])[1].toLowerCase(),d=vt[l]||vt._default,s.innerHTML=d[1]+a.replace(lt,"<$1></$2>")+d[2],o=d[0];o--;)s=s.lastChild;if(!h.leadingWhitespace&&st.test(a)&&g.push(e.createTextNode(st.exec(a)[0])),!h.tbody)for(o=(a="table"!==l||dt.test(a)?"<table>"!==d[1]||dt.test(a)?0:s:s.firstChild)&&a.childNodes.length;o--;)f.nodeName(c=a.childNodes[o],"tbody")&&!c.childNodes.length&&a.removeChild(c);for(f.merge(g,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=p.lastChild}else g.push(e.createTextNode(a));for(s&&p.removeChild(s),h.appendChecked||f.grep(yt(g,"input"),_t),m=0;a=g[m++];)if((!i||-1===f.inArray(a,i))&&(r=f.contains(a.ownerDocument,a),s=yt(p.appendChild(a),"script"),r&&kt(s),n))for(o=0;a=s[o++];)ft.test(a.type||"")&&n.push(a);return s=null,p},cleanData:function(t,e){for(var n,i,o,r,s=0,l=f.expando,c=f.cache,d=h.deleteExpando,u=f.event.special;null!=(n=t[s]);s++)if((e||f.acceptData(n))&&(r=(o=n[l])&&c[o])){if(r.events)for(i in r.events)u[i]?f.event.remove(n,i):f.removeEvent(n,i,r.handle);c[o]&&(delete c[o],d?delete n[l]:typeof n.removeAttribute!==O?n.removeAttribute(l):n[l]=null,a.push(o))}}}),f.fn.extend({text:function(t){return Q(this,function(t){return void 0===t?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||C).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||xt(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=xt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?f.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||f.cleanData(yt(n)),n.parentNode&&(e&&f.contains(n.ownerDocument,n)&&kt(yt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&f.cleanData(yt(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&f.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return f.clone(this,t,e)})},html:function(t){return Q(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(at,""):void 0;if("string"==typeof t&&!pt.test(t)&&(h.htmlSerialize||!rt.test(t))&&(h.leadingWhitespace||!st.test(t))&&!vt[(ct.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(lt,"<$1></$2>");try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(f.cleanData(yt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,f.cleanData(yt(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=s.apply([],t);var n,i,o,a,r,l,c=0,d=this.length,u=this,p=d-1,g=t[0],m=f.isFunction(g);if(m||d>1&&"string"==typeof g&&!h.checkClone&&ht.test(g))return this.each(function(n){var i=u.eq(n);m&&(t[0]=g.call(this,n,i.html())),i.domManip(t,e)});if(d&&(n=(l=f.buildFragment(t,this[0].ownerDocument,!1,this)).firstChild,1===l.childNodes.length&&(l=n),n)){for(o=(a=f.map(yt(l,"script"),wt)).length;c<d;c++)i=l,c!==p&&(i=f.clone(i,!0,!0),o&&f.merge(a,yt(i,"script"))),e.call(this[c],i,c);if(o)for(r=a[a.length-1].ownerDocument,f.map(a,Dt),c=0;c<o;c++)i=a[c],ft.test(i.type||"")&&!f._data(i,"globalEval")&&f.contains(r,i)&&(i.src?f._evalUrl&&f._evalUrl(i.src):f.globalEval((i.text||i.textContent||i.innerHTML||"").replace(mt,"")));l=n=null}return this}}),f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){f.fn[t]=function(t){for(var n,i=0,o=[],a=f(t),r=a.length-1;i<=r;i++)n=i===r?this:this.clone(!0),f(a[i])[e](n),l.apply(o,n.get());return this.pushStack(o)}});var St,Nt,Rt={};function It(t,e){var i,o=f(e.createElement(t)).appendTo(e.body),a=n.getDefaultComputedStyle&&(i=n.getDefaultComputedStyle(o[0]))?i.display:f.css(o[0],"display");return o.detach(),a}function Pt(t){var e=C,n=Rt[t];return n||("none"!==(n=It(t,e))&&n||((e=((St=(St||f("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||St[0].contentDocument).document).write(),e.close(),n=It(t,e),St.detach()),Rt[t]=n),n}h.shrinkWrapBlocks=function(){return null!=Nt?Nt:(Nt=!1,(e=C.getElementsByTagName("body")[0])&&e.style?(t=C.createElement("div"),(n=C.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(n).appendChild(t),typeof t.style.zoom!==O&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(C.createElement("div")).style.width="5px",Nt=3!==t.offsetWidth),e.removeChild(n),Nt):void 0);var t,e,n};var Et,At,Mt=/^margin/,Lt=new RegExp("^("+z+")(?!px)[a-z%]+$","i"),Bt=/^(top|right|bottom|left)$/;function Ot(t,e){return{get:function(){var n=t();if(null!=n){if(!n)return(this.get=e).apply(this,arguments);delete this.get}}}}n.getComputedStyle?(Et=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):n.getComputedStyle(t,null)},At=function(t,e,n){var i,o,a,r,s=t.style;return r=(n=n||Et(t))?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==r||f.contains(t.ownerDocument,t)||(r=f.style(t,e)),Lt.test(r)&&Mt.test(e)&&(i=s.width,o=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=n.width,s.width=i,s.minWidth=o,s.maxWidth=a)),void 0===r?r:r+""}):C.documentElement.currentStyle&&(Et=function(t){return t.currentStyle},At=function(t,e,n){var i,o,a,r,s=t.style;return null==(r=(n=n||Et(t))?n[e]:void 0)&&s&&s[e]&&(r=s[e]),Lt.test(r)&&!Bt.test(e)&&(i=s.left,(a=(o=t.runtimeStyle)&&o.left)&&(o.left=t.currentStyle.left),s.left="fontSize"===e?"1em":r,r=s.pixelLeft+"px",s.left=i,a&&(o.left=a)),void 0===r?r:r+""||"auto"}),function(){var t,e,i,o,a,r,s;function l(){var t,e,i,l;(e=C.getElementsByTagName("body")[0])&&e.style&&(t=C.createElement("div"),(i=C.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,s=!0,n.getComputedStyle&&(o="1%"!==(n.getComputedStyle(t,null)||{}).top,a="4px"===(n.getComputedStyle(t,null)||{width:"4px"}).width,(l=t.appendChild(C.createElement("div"))).style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",l.style.marginRight=l.style.width="0",t.style.width="1px",s=!parseFloat((n.getComputedStyle(l,null)||{}).marginRight),t.removeChild(l)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(l=t.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(r=0===l[0].offsetHeight)&&(l[0].style.display="",l[1].style.display="none",r=0===l[0].offsetHeight),e.removeChild(i))}(t=C.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(e=(i=t.getElementsByTagName("a")[0])&&i.style)&&(e.cssText="float:left;opacity:.5",h.opacity="0.5"===e.opacity,h.cssFloat=!!e.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===t.style.backgroundClip,h.boxSizing=""===e.boxSizing||""===e.MozBoxSizing||""===e.WebkitBoxSizing,f.extend(h,{reliableHiddenOffsets:function(){return null==r&&l(),r},boxSizingReliable:function(){return null==a&&l(),a},pixelPosition:function(){return null==o&&l(),o},reliableMarginRight:function(){return null==s&&l(),s}}))}(),f.swap=function(t,e,n,i){var o,a,r={};for(a in e)r[a]=t.style[a],t.style[a]=e[a];for(a in o=n.apply(t,i||[]),e)t.style[a]=r[a];return o};var qt=/alpha\([^)]*\)/i,Ft=/opacity\s*=\s*([^)]*)/,Ut=/^(none|table(?!-c[ea]).+)/,Ht=new RegExp("^("+z+")(.*)$","i"),$t=new RegExp("^([+-])=("+z+")","i"),jt={position:"absolute",visibility:"hidden",display:"block"},zt={letterSpacing:"0",fontWeight:"400"},Wt=["Webkit","O","Moz","ms"];function Vt(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=Wt.length;o--;)if((e=Wt[o]+n)in t)return e;return i}function Qt(t,e){for(var n,i,o,a=[],r=0,s=t.length;r<s;r++)(i=t[r]).style&&(a[r]=f._data(i,"olddisplay"),n=i.style.display,e?(a[r]||"none"!==n||(i.style.display=""),""===i.style.display&&V(i)&&(a[r]=f._data(i,"olddisplay",Pt(i.nodeName)))):(o=V(i),(n&&"none"!==n||!o)&&f._data(i,"olddisplay",o?n:f.css(i,"display"))));for(r=0;r<s;r++)(i=t[r]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?a[r]||"":"none"));return t}function Zt(t,e,n){var i=Ht.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function Gt(t,e,n,i,o){for(var a=n===(i?"border":"content")?4:"width"===e?1:0,r=0;a<4;a+=2)"margin"===n&&(r+=f.css(t,n+W[a],!0,o)),i?("content"===n&&(r-=f.css(t,"padding"+W[a],!0,o)),"margin"!==n&&(r-=f.css(t,"border"+W[a]+"Width",!0,o))):(r+=f.css(t,"padding"+W[a],!0,o),"padding"!==n&&(r+=f.css(t,"border"+W[a]+"Width",!0,o)));return r}function Kt(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,a=Et(t),r=h.boxSizing&&"border-box"===f.css(t,"boxSizing",!1,a);if(o<=0||null==o){if(((o=At(t,e,a))<0||null==o)&&(o=t.style[e]),Lt.test(o))return o;i=r&&(h.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+Gt(t,e,n||(r?"border":"content"),i,a)+"px"}function Xt(t,e,n,i,o){return new Xt.prototype.init(t,e,n,i,o)}f.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=At(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:h.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,a,r,s=f.camelCase(e),l=t.style;if(e=f.cssProps[s]||(f.cssProps[s]=Vt(l,s)),r=f.cssHooks[e]||f.cssHooks[s],void 0===n)return r&&"get"in r&&void 0!==(o=r.get(t,!1,i))?o:l[e];if("string"===(a=typeof n)&&(o=$t.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(f.css(t,e)),a="number"),null!=n&&n==n&&("number"!==a||f.cssNumber[s]||(n+="px"),h.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(r&&"set"in r&&void 0===(n=r.set(t,n,i)))))try{l[e]=n}catch(t){}}},css:function(t,e,n,i){var o,a,r,s=f.camelCase(e);return e=f.cssProps[s]||(f.cssProps[s]=Vt(t.style,s)),(r=f.cssHooks[e]||f.cssHooks[s])&&"get"in r&&(a=r.get(t,!0,n)),void 0===a&&(a=At(t,e,i)),"normal"===a&&e in zt&&(a=zt[e]),""===n||n?(o=parseFloat(a),!0===n||f.isNumeric(o)?o||0:a):a}}),f.each(["height","width"],function(t,e){f.cssHooks[e]={get:function(t,n,i){if(n)return Ut.test(f.css(t,"display"))&&0===t.offsetWidth?f.swap(t,jt,function(){return Kt(t,e,i)}):Kt(t,e,i)},set:function(t,n,i){var o=i&&Et(t);return Zt(0,n,i?Gt(t,e,i,h.boxSizing&&"border-box"===f.css(t,"boxSizing",!1,o),o):0)}}}),h.opacity||(f.cssHooks.opacity={get:function(t,e){return Ft.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=f.isNumeric(e)?"alpha(opacity="+100*e+")":"",a=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===f.trim(a.replace(qt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=qt.test(a)?a.replace(qt,o):a+" "+o)}}),f.cssHooks.marginRight=Ot(h.reliableMarginRight,function(t,e){if(e)return f.swap(t,{display:"inline-block"},At,[t,"marginRight"])}),f.each({margin:"",padding:"",border:"Width"},function(t,e){f.cssHooks[t+e]={expand:function(n){for(var i=0,o={},a="string"==typeof n?n.split(" "):[n];i<4;i++)o[t+W[i]+e]=a[i]||a[i-2]||a[0];return o}},Mt.test(t)||(f.cssHooks[t+e].set=Zt)}),f.fn.extend({css:function(t,e){return Q(this,function(t,e,n){var i,o,a={},r=0;if(f.isArray(e)){for(i=Et(t),o=e.length;r<o;r++)a[e[r]]=f.css(t,e[r],!1,i);return a}return void 0!==n?f.style(t,e,n):f.css(t,e)},t,e,arguments.length>1)},show:function(){return Qt(this,!0)},hide:function(){return Qt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){V(this)?f(this).show():f(this).hide()})}}),f.Tween=Xt,Xt.prototype={constructor:Xt,init:function(t,e,n,i,o,a){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=a||(f.cssNumber[n]?"":"px")},cur:function(){var t=Xt.propHooks[this.prop];return t&&t.get?t.get(this):Xt.propHooks._default.get(this)},run:function(t){var e,n=Xt.propHooks[this.prop];return this.options.duration?this.pos=e=f.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Xt.propHooks._default.set(this),this}},Xt.prototype.init.prototype=Xt.prototype,Xt.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=f.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){f.fx.step[t.prop]?f.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[f.cssProps[t.prop]]||f.cssHooks[t.prop])?f.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},Xt.propHooks.scrollTop=Xt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},f.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},f.fx=Xt.prototype.init,f.fx.step={};var Yt,Jt,te,ee,ne,ie,oe,ae=/^(?:toggle|show|hide)$/,re=new RegExp("^(?:([+-])=|)("+z+")([a-z%]*)$","i"),se=/queueHooks$/,le=[function(t,e,n){var i,o,a,r,s,l,c,d=this,u={},p=t.style,g=t.nodeType&&V(t),m=f._data(t,"fxshow");n.queue||(null==(s=f._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,f.queue(t,"fx").length||s.empty.fire()})}));1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=f.css(t,"display"),"inline"===("none"===c?f._data(t,"olddisplay")||Pt(t.nodeName):c)&&"none"===f.css(t,"float")&&(h.inlineBlockNeedsLayout&&"inline"!==Pt(t.nodeName)?p.zoom=1:p.display="inline-block"));n.overflow&&(p.overflow="hidden",h.shrinkWrapBlocks()||d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],ae.exec(o)){if(delete e[i],a=a||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;g=!0}u[i]=m&&m[i]||f.style(t,i)}else c=void 0;if(f.isEmptyObject(u))"inline"===("none"===c?Pt(t.nodeName):c)&&(p.display=c);else for(i in m?"hidden"in m&&(g=m.hidden):m=f._data(t,"fxshow",{}),a&&(m.hidden=!g),g?f(t).show():d.done(function(){f(t).hide()}),d.done(function(){var e;for(e in f._removeData(t,"fxshow"),u)f.style(t,e,u[e])}),u)r=pe(g?m[i]:0,i,d),i in m||(m[i]=r.start,g&&(r.end=r.start,r.start="width"===i||"height"===i?1:0))}],ce={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=re.exec(e),a=o&&o[3]||(f.cssNumber[t]?"":"px"),r=(f.cssNumber[t]||"px"!==a&&+i)&&re.exec(f.css(n.elem,t)),s=1,l=20;if(r&&r[3]!==a){a=a||r[3],o=o||[],r=+i||1;do{r/=s=s||".5",f.style(n.elem,t,r+a)}while(s!==(s=n.cur()/i)&&1!==s&&--l)}return o&&(r=n.start=+r||+i||0,n.unit=a,n.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),n}]};function de(){return setTimeout(function(){Yt=void 0}),Yt=f.now()}function ue(t,e){var n,i={height:t},o=0;for(e=e?1:0;o<4;o+=2-e)i["margin"+(n=W[o])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function pe(t,e,n){for(var i,o=(ce[e]||[]).concat(ce["*"]),a=0,r=o.length;a<r;a++)if(i=o[a].call(n,e,t))return i}function he(t,e,n){var i,o,a=0,r=le.length,s=f.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Yt||de(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),a=0,r=c.tweens.length;a<r;a++)c.tweens[a].run(i);return s.notifyWith(t,[c,i,n]),i<1&&r?n:(s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:f.extend({},e),opts:f.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Yt||de(),duration:n.duration,tweens:[],createTween:function(e,n){var i=f.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)c.tweens[n].run(1);return e?s.resolveWith(t,[c,e]):s.rejectWith(t,[c,e]),this}}),d=c.props;for(!function(t,e){var n,i,o,a,r;for(n in t)if(o=e[i=f.camelCase(n)],a=t[n],f.isArray(a)&&(o=a[1],a=t[n]=a[0]),n!==i&&(t[i]=a,delete t[n]),(r=f.cssHooks[i])&&"expand"in r)for(n in a=r.expand(a),delete t[i],a)n in t||(t[n]=a[n],e[n]=o);else e[i]=o}(d,c.opts.specialEasing);a<r;a++)if(i=le[a].call(c,t,d,c.opts))return i;return f.map(d,pe,c),f.isFunction(c.opts.start)&&c.opts.start.call(t,c),f.fx.timer(f.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}f.Animation=f.extend(he,{tweener:function(t,e){f.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;i<o;i++)n=t[i],ce[n]=ce[n]||[],ce[n].unshift(e)},prefilter:function(t,e){e?le.unshift(t):le.push(t)}}),f.speed=function(t,e,n){var i=t&&"object"==typeof t?f.extend({},t):{complete:n||!n&&e||f.isFunction(t)&&t,duration:t,easing:n&&e||e&&!f.isFunction(e)&&e};return i.duration=f.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in f.fx.speeds?f.fx.speeds[i.duration]:f.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){f.isFunction(i.old)&&i.old.call(this),i.queue&&f.dequeue(this,i.queue)},i},f.fn.extend({fadeTo:function(t,e,n,i){return this.filter(V).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=f.isEmptyObject(t),a=f.speed(e,n,i),r=function(){var e=he(this,f.extend({},t),a);(o||f._data(this,"finish"))&&e.stop(!0)};return r.finish=r,o||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",a=f.timers,r=f._data(this);if(o)r[o]&&r[o].stop&&i(r[o]);else for(o in r)r[o]&&r[o].stop&&se.test(o)&&i(r[o]);for(o=a.length;o--;)a[o].elem!==this||null!=t&&a[o].queue!==t||(a[o].anim.stop(n),e=!1,a.splice(o,1));!e&&n||f.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=f._data(this),i=n[t+"queue"],o=n[t+"queueHooks"],a=f.timers,r=i?i.length:0;for(n.finish=!0,f.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<r;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),f.each(["toggle","show","hide"],function(t,e){var n=f.fn[e];f.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,i,o)}}),f.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){f.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),f.timers=[],f.fx.tick=function(){var t,e=f.timers,n=0;for(Yt=f.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||f.fx.stop(),Yt=void 0},f.fx.timer=function(t){f.timers.push(t),t()?f.fx.start():f.timers.pop()},f.fx.interval=13,f.fx.start=function(){Jt||(Jt=setInterval(f.fx.tick,f.fx.interval))},f.fx.stop=function(){clearInterval(Jt),Jt=null},f.fx.speeds={slow:600,fast:200,_default:400},f.fn.delay=function(t,e){return t=f.fx&&f.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},(ee=C.createElement("div")).setAttribute("className","t"),ee.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ie=ee.getElementsByTagName("a")[0],oe=(ne=C.createElement("select")).appendChild(C.createElement("option")),te=ee.getElementsByTagName("input")[0],ie.style.cssText="top:1px",h.getSetAttribute="t"!==ee.className,h.style=/top/.test(ie.getAttribute("style")),h.hrefNormalized="/a"===ie.getAttribute("href"),h.checkOn=!!te.value,h.optSelected=oe.selected,h.enctype=!!C.createElement("form").enctype,ne.disabled=!0,h.optDisabled=!oe.disabled,(te=C.createElement("input")).setAttribute("value",""),h.input=""===te.getAttribute("value"),te.value="t",te.setAttribute("type","radio"),h.radioValue="t"===te.value;var fe=/\r/g;f.fn.extend({val:function(t){var e,n,i,o=this[0];return arguments.length?(i=f.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(null==(o=i?t.call(this,n,f(this).val()):t)?o="":"number"==typeof o?o+="":f.isArray(o)&&(o=f.map(o,function(t){return null==t?"":t+""})),(e=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))})):o?(e=f.valHooks[o.type]||f.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(fe,""):null==n?"":n:void 0}}),f.extend({valHooks:{option:{get:function(t){var e=f.find.attr(t,"value");return null!=e?e:f.trim(f.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,a="select-one"===t.type||o<0,r=a?null:[],s=a?o+1:i.length,l=o<0?s:a?o:0;l<s;l++)if(((n=i[l]).selected||l===o)&&(h.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!f.nodeName(n.parentNode,"optgroup"))){if(e=f(n).val(),a)return e;r.push(e)}return r},set:function(t,e){for(var n,i,o=t.options,a=f.makeArray(e),r=o.length;r--;)if(i=o[r],f.inArray(f.valHooks.option.get(i),a)>=0)try{i.selected=n=!0}catch(t){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),o}}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]={set:function(t,e){if(f.isArray(e))return t.checked=f.inArray(f(t).val(),e)>=0}},h.checkOn||(f.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ge,me,ve=f.expr.attrHandle,be=/^(?:checked|selected)$/i,ye=h.getSetAttribute,_e=h.input;f.fn.extend({attr:function(t,e){return Q(this,f.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){f.removeAttr(this,t)})}}),f.extend({attr:function(t,e,n){var i,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return typeof t.getAttribute===O?f.prop(t,e,n):(1===a&&f.isXMLDoc(t)||(e=e.toLowerCase(),i=f.attrHooks[e]||(f.expr.match.bool.test(e)?me:ge)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:null==(o=f.find.attr(t,e))?void 0:o:null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void f.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,a=e&&e.match(E);if(a&&1===t.nodeType)for(;n=a[o++];)i=f.propFix[n]||n,f.expr.match.bool.test(n)?_e&&ye||!be.test(n)?t[i]=!1:t[f.camelCase("default-"+n)]=t[i]=!1:f.attr(t,n,""),t.removeAttribute(ye?n:i)},attrHooks:{type:{set:function(t,e){if(!h.radioValue&&"radio"===e&&f.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),me={set:function(t,e,n){return!1===e?f.removeAttr(t,n):_e&&ye||!be.test(n)?t.setAttribute(!ye&&f.propFix[n]||n,n):t[f.camelCase("default-"+n)]=t[n]=!0,n}},f.each(f.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ve[e]||f.find.attr;ve[e]=_e&&ye||!be.test(e)?function(t,e,i){var o,a;return i||(a=ve[e],ve[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,ve[e]=a),o}:function(t,e,n){if(!n)return t[f.camelCase("default-"+e)]?e.toLowerCase():null}}),_e&&ye||(f.attrHooks.value={set:function(t,e,n){if(!f.nodeName(t,"input"))return ge&&ge.set(t,e,n);t.defaultValue=e}}),ye||(ge={set:function(t,e,n){var i=t.getAttributeNode(n);if(i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n))return e}},ve.id=ve.name=ve.coords=function(t,e,n){var i;if(!n)return(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},f.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);if(n&&n.specified)return n.value},set:ge.set},f.attrHooks.contenteditable={set:function(t,e,n){ge.set(t,""!==e&&e,n)}},f.each(["width","height"],function(t,e){f.attrHooks[e]={set:function(t,n){if(""===n)return t.setAttribute(e,"auto"),n}}})),h.style||(f.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var xe=/^(?:input|select|textarea|button|object)$/i,we=/^(?:a|area)$/i;f.fn.extend({prop:function(t,e){return Q(this,f.prop,t,e,arguments.length>1)},removeProp:function(t){return t=f.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(t){}})}}),f.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,n){var i,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return(1!==a||!f.isXMLDoc(t))&&(e=f.propFix[e]||e,o=f.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=f.find.attr(t,"tabindex");return e?parseInt(e,10):xe.test(t.nodeName)||we.test(t.nodeName)&&t.href?0:-1}}}}),h.hrefNormalized||f.each(["href","src"],function(t,e){f.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),h.optSelected||(f.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),f.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){f.propFix[this.toLowerCase()]=this}),h.enctype||(f.propFix.enctype="encoding");var De=/[\t\r\n\f]/g;f.fn.extend({addClass:function(t){var e,n,i,o,a,r,s=0,l=this.length,c="string"==typeof t&&t;if(f.isFunction(t))return this.each(function(e){f(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(E)||[];s<l;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(De," "):" ")){for(a=0;o=e[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r=f.trim(i),n.className!==r&&(n.className=r)}return this},removeClass:function(t){var e,n,i,o,a,r,s=0,l=this.length,c=0===arguments.length||"string"==typeof t&&t;if(f.isFunction(t))return this.each(function(e){f(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(E)||[];s<l;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(De," "):"")){for(a=0;o=e[a++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");r=t?f.trim(i):"",n.className!==r&&(n.className=r)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):f.isFunction(t)?this.each(function(n){f(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,o=f(this),a=t.match(E)||[];e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else n!==O&&"boolean"!==n||(this.className&&f._data(this,"__className__",this.className),this.className=this.className||!1===t?"":f._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(De," ").indexOf(e)>=0)return!0;return!1}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){f.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),f.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var ke=f.now(),Te=/\?/,Ce=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;f.parseJSON=function(t){if(n.JSON&&n.JSON.parse)return n.JSON.parse(t+"");var e,i=null,o=f.trim(t+"");return o&&!f.trim(o.replace(Ce,function(t,n,o,a){return e&&n&&(i=0),0===i?t:(e=o||n,i+=!a-!o,"")}))?Function("return "+o)():f.error("Invalid JSON: "+t)},f.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{n.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t))}catch(t){e=void 0}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||f.error("Invalid XML: "+t),e};var Se,Ne,Re=/#.*$/,Ie=/([?&])_=[^&]*/,Pe=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ee=/^(?:GET|HEAD)$/,Ae=/^\/\//,Me=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Le={},Be={},Oe="*/".concat("*");try{Ne=location.href}catch(t){(Ne=C.createElement("a")).href="",Ne=Ne.href}function qe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,a=e.toLowerCase().match(E)||[];if(f.isFunction(n))for(;i=a[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Fe(t,e,n,i){var o={},a=t===Be;function r(s){var l;return o[s]=!0,f.each(t[s]||[],function(t,s){var c=s(e,n,i);return"string"!=typeof c||a||o[c]?a?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}return r(e.dataTypes[0])||!o["*"]&&r("*")}function Ue(t,e){var n,i,o=f.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&f.extend(!0,t,n),t}Se=Me.exec(Ne.toLowerCase())||[],f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ne,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Se[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ue(Ue(t,f.ajaxSettings),e):Ue(f.ajaxSettings,t)},ajaxPrefilter:qe(Le),ajaxTransport:qe(Be),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,a,r,s,l,c,d=f.ajaxSetup({},e),u=d.context||d,p=d.context&&(u.nodeType||u.jquery)?f(u):f.event,h=f.Deferred(),g=f.Callbacks("once memory"),m=d.statusCode||{},v={},b={},y=0,_="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!c)for(c={};e=Pe.exec(a);)c[e[1].toLowerCase()]=e[2];e=c[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return y||(t=b[n]=b[n]||t,v[t]=e),this},overrideMimeType:function(t){return y||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(y<2)for(e in t)m[e]=[m[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||_;return l&&l.abort(e),w(0,e),this}};if(h.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,d.url=((t||d.url||Ne)+"").replace(Re,"").replace(Ae,Se[1]+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=f.trim(d.dataType||"*").toLowerCase().match(E)||[""],null==d.crossDomain&&(n=Me.exec(d.url.toLowerCase()),d.crossDomain=!(!n||n[1]===Se[1]&&n[2]===Se[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Se[3]||("http:"===Se[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=f.param(d.data,d.traditional)),Fe(Le,d,e,x),2===y)return x;for(i in(s=f.event&&d.global)&&0==f.active++&&f.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ee.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(Te.test(o)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=Ie.test(o)?o.replace(Ie,"$1_="+ke++):o+(Te.test(o)?"&":"?")+"_="+ke++)),d.ifModified&&(f.lastModified[o]&&x.setRequestHeader("If-Modified-Since",f.lastModified[o]),f.etag[o]&&x.setRequestHeader("If-None-Match",f.etag[o])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Oe+"; q=0.01":""):d.accepts["*"]),d.headers)x.setRequestHeader(i,d.headers[i]);if(d.beforeSend&&(!1===d.beforeSend.call(u,x,d)||2===y))return x.abort();for(i in _="abort",{success:1,error:1,complete:1})x[i](d[i]);if(l=Fe(Be,d,e,x)){x.readyState=1,s&&p.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(r=setTimeout(function(){x.abort("timeout")},d.timeout));try{y=1,l.send(v,w)}catch(t){if(!(y<2))throw t;w(-1,t)}}else w(-1,"No Transport");function w(t,e,n,i){var c,v,b,_,w,D=e;2!==y&&(y=2,r&&clearTimeout(r),l=void 0,a=i||"",x.readyState=t>0?4:0,c=t>=200&&t<300||304===t,n&&(_=function(t,e,n){for(var i,o,a,r,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(r in s)if(s[r]&&s[r].test(o)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){a=r;break}i||(i=r)}a=a||i}if(a)return a!==l[0]&&l.unshift(a),n[a]}(d,x,n)),_=function(t,e,n,i){var o,a,r,s,l,c={},d=t.dataTypes.slice();if(d[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(a=d.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=d.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(r=c[l+" "+a]||c["* "+a]))for(o in c)if((s=o.split(" "))[1]===a&&(r=c[l+" "+s[0]]||c["* "+s[0]])){!0===r?r=c[o]:!0!==c[o]&&(a=s[0],d.unshift(s[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}(d,_,x,c),c?(d.ifModified&&((w=x.getResponseHeader("Last-Modified"))&&(f.lastModified[o]=w),(w=x.getResponseHeader("etag"))&&(f.etag[o]=w)),204===t||"HEAD"===d.type?D="nocontent":304===t?D="notmodified":(D=_.state,v=_.data,c=!(b=_.error))):(b=D,!t&&D||(D="error",t<0&&(t=0))),x.status=t,x.statusText=(e||D)+"",c?h.resolveWith(u,[v,D,x]):h.rejectWith(u,[x,D,b]),x.statusCode(m),m=void 0,s&&p.trigger(c?"ajaxSuccess":"ajaxError",[x,d,c?v:b]),g.fireWith(u,[x,D]),s&&(p.trigger("ajaxComplete",[x,d]),--f.active||f.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,n){return f.get(t,e,n,"json")},getScript:function(t,e){return f.get(t,void 0,e,"script")}}),f.each(["get","post"],function(t,e){f[e]=function(t,n,i,o){return f.isFunction(n)&&(o=o||i,i=n,n=void 0),f.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),f._evalUrl=function(t){return f.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},f.fn.extend({wrapAll:function(t){if(f.isFunction(t))return this.each(function(e){f(this).wrapAll(t.call(this,e))});if(this[0]){var e=f(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return f.isFunction(t)?this.each(function(e){f(this).wrapInner(t.call(this,e))}):this.each(function(){var e=f(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=f.isFunction(t);return this.each(function(n){f(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()}}),f.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!h.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||f.css(t,"display"))},f.expr.filters.visible=function(t){return!f.expr.filters.hidden(t)};var He=/%20/g,$e=/\[\]$/,je=/\r?\n/g,ze=/^(?:submit|button|image|reset|file)$/i,We=/^(?:input|select|textarea|keygen)/i;function Ve(t,e,n,i){var o;if(f.isArray(e))f.each(e,function(e,o){n||$e.test(t)?i(t,o):Ve(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==f.type(e))i(t,e);else for(o in e)Ve(t+"["+o+"]",e[o],n,i)}f.param=function(t,e){var n,i=[],o=function(t,e){e=f.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=f.ajaxSettings&&f.ajaxSettings.traditional),f.isArray(t)||t.jquery&&!f.isPlainObject(t))f.each(t,function(){o(this.name,this.value)});else for(n in t)Ve(n,t[n],e,o);return i.join("&").replace(He,"+")},f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=f.prop(this,"elements");return t?f.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!f(this).is(":disabled")&&We.test(this.nodeName)&&!ze.test(t)&&(this.checked||!Z.test(t))}).map(function(t,e){var n=f(this).val();return null==n?null:f.isArray(n)?f.map(n,function(t){return{name:e.name,value:t.replace(je,"\r\n")}}):{name:e.name,value:n.replace(je,"\r\n")}}).get()}}),f.ajaxSettings.xhr=void 0!==n.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Ke()||function(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}()}:Ke;var Qe=0,Ze={},Ge=f.ajaxSettings.xhr();function Ke(){try{return new n.XMLHttpRequest}catch(t){}}n.attachEvent&&n.attachEvent("onunload",function(){for(var t in Ze)Ze[t](void 0,!0)}),h.cors=!!Ge&&"withCredentials"in Ge,(Ge=h.ajax=!!Ge)&&f.ajaxTransport(function(t){var e;if(!t.crossDomain||h.cors)return{send:function(n,i){var o,a=t.xhr(),r=++Qe;if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];for(o in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)void 0!==n[o]&&a.setRequestHeader(o,n[o]+"");a.send(t.hasContent&&t.data||null),e=function(n,o){var s,l,c;if(e&&(o||4===a.readyState))if(delete Ze[r],e=void 0,a.onreadystatechange=f.noop,o)4!==a.readyState&&a.abort();else{c={},s=a.status,"string"==typeof a.responseText&&(c.text=a.responseText);try{l=a.statusText}catch(t){l=""}s||!t.isLocal||t.crossDomain?1223===s&&(s=204):s=c.text?200:404}c&&i(s,l,c,a.getAllResponseHeaders())},t.async?4===a.readyState?setTimeout(e):a.onreadystatechange=Ze[r]=e:e()},abort:function(){e&&e(void 0,!0)}}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return f.globalEval(t),t}}}),f.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),f.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=C.head||f("head")[0]||C.documentElement;return{send:function(i,o){(e=C.createElement("script")).async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||o(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var Xe=[],Ye=/(=)\?(?=&|$)|\?\?/;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Xe.pop()||f.expando+"_"+ke++;return this[t]=!0,t}}),f.ajaxPrefilter("json jsonp",function(t,e,i){var o,a,r,s=!1!==t.jsonp&&(Ye.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=f.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ye,"$1"+o):!1!==t.jsonp&&(t.url+=(Te.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return r||f.error(o+" was not called"),r[0]},t.dataTypes[0]="json",a=n[o],n[o]=function(){r=arguments},i.always(function(){n[o]=a,t[o]&&(t.jsonpCallback=e.jsonpCallback,Xe.push(o)),r&&f.isFunction(a)&&a(r[0]),r=a=void 0}),"script"}),f.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||C;var i=w.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=f.buildFragment([t],e,o),o&&o.length&&f(o).remove(),f.merge([],i.childNodes))};var Je=f.fn.load;f.fn.load=function(t,e,n){if("string"!=typeof t&&Je)return Je.apply(this,arguments);var i,o,a,r=this,s=t.indexOf(" ");return s>=0&&(i=f.trim(t.slice(s,t.length)),t=t.slice(0,s)),f.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(a="POST"),r.length>0&&f.ajax({url:t,type:a,dataType:"html",data:e}).done(function(t){o=arguments,r.html(i?f("<div>").append(f.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){r.each(n,o||[t.responseText,e,t])}),this},f.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){f.fn[e]=function(t){return this.on(e,t)}}),f.expr.filters.animated=function(t){return f.grep(f.timers,function(e){return t===e.elem}).length};var tn=n.document.documentElement;function en(t){return f.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}f.offset={setOffset:function(t,e,n){var i,o,a,r,s,l,c=f.css(t,"position"),d=f(t),u={};"static"===c&&(t.style.position="relative"),s=d.offset(),a=f.css(t,"top"),l=f.css(t,"left"),("absolute"===c||"fixed"===c)&&f.inArray("auto",[a,l])>-1?(r=(i=d.position()).top,o=i.left):(r=parseFloat(a)||0,o=parseFloat(l)||0),f.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(u.top=e.top-s.top+r),null!=e.left&&(u.left=e.left-s.left+o),"using"in e?e.using.call(t,u):d.css(u)}},f.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){f.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},o=this[0],a=o&&o.ownerDocument;return a?(e=a.documentElement,f.contains(e,o)?(typeof o.getBoundingClientRect!==O&&(i=o.getBoundingClientRect()),n=en(a),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===f.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),f.nodeName(t[0],"html")||(n=t.offset()),n.top+=f.css(t[0],"borderTopWidth",!0),n.left+=f.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-f.css(i,"marginTop",!0),left:e.left-n.left-f.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||tn;t&&!f.nodeName(t,"html")&&"static"===f.css(t,"position");)t=t.offsetParent;return t||tn})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);f.fn[t]=function(i){return Q(this,function(t,i,o){var a=en(t);if(void 0===o)return a?e in a?a[e]:a.document.documentElement[i]:t[i];a?a.scrollTo(n?f(a).scrollLeft():o,n?o:f(a).scrollTop()):t[i]=o},t,i,arguments.length,null)}}),f.each(["top","left"],function(t,e){f.cssHooks[e]=Ot(h.pixelPosition,function(t,n){if(n)return n=At(t,e),Lt.test(n)?f(t).position()[e]+"px":n})}),f.each({Height:"height",Width:"width"},function(t,e){f.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){f.fn[i]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),r=n||(!0===i||!0===o?"margin":"border");return Q(this,function(e,n,i){var o;return f.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?f.css(e,n,r):f.style(e,n,i,r)},e,a?i:void 0,a,null)}})}),f.fn.size=function(){return this.length},f.fn.andSelf=f.fn.addBack,void 0===(i=function(){return f}.apply(e,[]))||(t.exports=i);var nn=n.jQuery,on=n.$;return f.noConflict=function(t){return n.$===f&&(n.$=on),t&&n.jQuery===f&&(n.jQuery=nn),f},typeof o===O&&(n.jQuery=n.$=f),f},"object"==typeof t.exports?t.exports=o.document?a(o,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return a(t)}:a(o)},function(t,e,n){(function(i){var o,a;o=[n(3),n(0),n(8),n(1),n(2),n(12),n(32),n(81),n(104),n(105),n(127),n(131),n(23)],void 0===(a=function(t,e,n,o,a,r,s,l,c,d,u,p,h){"use strict";var f=new t.Application;f.addRegions({headerRegion:"#ebtop1",contentRegion:"#readerRegion"});var g={};function m(t,e,n,i){"event"===t?window.ga("send","event",e,n,i):window.ga("send","pageview",e,n)}function v(){var t=g.docID;e.post("accessLive.api",{docid:t}).done(function(t){"SUCCESS"==t.status&&setTimeout(v,174e4)})}return f.addInitializer(function(h){if(g.pqOneSite=!1,r=new r,g.pqOneSite=r.isChannelPqOne(),"true"!==e("#fromReaderRedirectPQ").val()){var b;r.adjustReaderHeight(),b=t.Renderer.render,t.Renderer.render=function(t,e){return e=i.extend(e,{_t:n.t}),b(t,e)},o.on("gaTk",m,this);var y=new s;f.contentRegion.show(y);var _=parseInt(a.getParameterByName("ppg"));isNaN(_)&&(_=1),g.ppg=_;var x=a.getParameterByName("docID"),w=a.getParameterByName("q");g.searchTerm=w,g.docID=x;var D=a.readCookie("ESESSIONID"),k=e("#mainViewer").get(0).scrollWidth,T=e("<div><br/></div>").appendTo("body");g.widthTest=T.height(),T.remove(),g.showSearhHits=!0,g.whatClicked="",g.selectedZone={active:!1,tracking:!1,s_quad:-1,e_quad:-1,s_floats:!1,e_floats:!1,active_page:-1},g.finalSelections={active:!1,s_quad:-1,e_quad:-1,active_page:-1},g.uAccsMdRR="no"===e("#enableAccessiblity").val()?1:0,g.pqOneSite?e("#icon-defs").load("img/icons-pqone-symbols.svg"):e("#icon-defs").load("img/icons-symbols.svg"),e.ajax({url:"docAccess.api?rpgr=eb&docid="+x+"&remote_id="+D,async:!1,success:function(t){if("SUCCESS"===t.status)g.hasAc=1,g.encID=t.encryptedDocID,g.tmpFetchPageNum=_,g.ssen=D,g.tpg=t.tpg||0,g.zmMaxWidth=t.pg&&t.pg.width?t.pg.width:0,g.zmMaxHeight=t.pg&&t.pg.height?t.pg.height:0,g.tmpLpg=t.lpg,g.tmpzmMaxWidth=g.zmMaxWidth,g.tmpzmMaxHeight=g.zmMaxHeight,g.zm=t.pg&&t.pg.width?(k-2*g.widthTest)/t.pg.width:1,g.zm=g.zm>.5?g.zm:.5,g.zm=g.zm>10?10:g.zm,g.divzm=g.zm,g.zm=g.divzm-.1,g.orgWd=parseInt(g.tmpzmMaxWidth*g.divzm),g.orgHgt=parseInt(g.tmpzmMaxHeight*g.divzm);else{g.hasAc=0;var n=void 0===t["status-message"]?t.errorCode:t["status-message"];n=n||"Login Required. Please <a href='login.action'>Sign-In</a>.",e("#dialog-error-msg").show().find("#msg").empty().html(n)}},error:function(t,n,i){g.hasAc=0,e("#dialog-error-msg").show().find("#msg").empty().html("<strong>Error!</strong> Please try again.")}});var C=new c(g);y.sideBarRegion.show(C);var S={gbData:g},N=new d(S);y.panelRegion.show(N);var R={gbData:g};if(g.uAccsMdRR>0){var I=new p(S);y.mainRegion.show(I)}else{var P=new u(R);y.mainRegion.show(P)}g.uAccsMdRR>0&&setTimeout(v,174e4);var E=new l(g);y.toolBarRegion.show(E);var A=e(window).width(),M=e("#sideBar").outerWidth(),L=e(document).height();L=L-e("#headerContainer").outerHeight()-e("#svgToolBarLayoutRegion").outerHeight(),e("#coBrandContainer")&&(L-=e("#coBrandContainer").outerHeight()),e("#mainViewer").css({height:L}),g.uAccsMdRR>0&&(e("#mainLayoutRegion").css({"background-color":"white"}),e("#access-containerWrapper").css({width:A-400-M,height:L,"background-color":"white"})),e("#readerContentInner").height(L),e("#panel").css({height:L});var B=0;e(window).resize(function(t){(function(){var t=e(window).width(),n=e("#sideBar").outerWidth(),i=e("#panelLayoutRegion").outerWidth();t=t-(i=i>25?400:1)-n;var o=e(document).height(),a=e("#headerContainer").outerHeight(),r=e("#svgToolBarLayoutRegion").outerHeight();o=o-a-r,e("#coBrandContainer")&&(o-=e("#coBrandContainer").outerHeight());if(Math.abs(e("#mainViewer").height()-o)<=5&&Math.abs(e("#mainViewer").width()-t)<=5)return!0;e("#mainViewer").css({height:o,width:t}),g.uAccsMdRR>0&&(e("#panelLayoutRegion").css({width:"400px"}),e("#panel").css({width:"400px"}),i=400,e("#access-containerWrapper").css({width:t,height:o,"background-color":"white"}));e("#readerContentInner").height(o),e("#panel").css({height:o})})()||(clearTimeout(B),B=setTimeout(function(){o.trigger("fttowd",e.Event("click"))},1e3))}),e("#signGlobalTool").on("click",function(t){e("#search-block").length>0?o.trigger("tbgbsgn","to_proceed","s"):e.data(this,"testTimeoutload",setTimeout(function(){o.trigger("tbgbsgn","to_proceed","s")},850)),t.preventDefault()}),e('.navbar-collapse ul li>:not(".ebStaySeen"), #tool-viewsmaller,#tool-viewlarger').click(function(){var t=e(this);(e("#toolbar-navbar-collapse").hasClass("in")||e("#nav-bar-links").hasClass("in"))&&setTimeout(function(){t.closest(".navbar-collapse").collapse("hide")},650)}),e(window).on("beforeunload",function(){var t="releaseDocSession.action?dt="+(new Date).getTime();navigator&&navigator.sendBeacon?navigator.sendBeacon(t+"&type=beacon&docID="+x):e.ajax({url:t,data:{docID:x},type:"POST",async:!1})}),e(document).ready(function(){r.pqSessionKeepAlive(),e("body").on("click",r.pqSessionKeepAlive),"true"===e("#consentModal").attr("data-modal-enable")&&(e("#consentModal #cmErrorMsg").html(""),e("#consentModal").modal({backdrop:"static",keyboard:!1}))}),e("#consentModal").on("shown.bs.modal",function(t){var n=e(this).find("a, button, input, select"),i=n.first(),o=[{elem:n.last(),next:i}];e.each(o,function(t,n){e.each(n,function(t,e){e.on("keydown",function(e){9==(e.keyCode||e.which)&&("elem"===t?!e.shiftKey:e.shiftKey)&&(e.preventDefault(),"elem"===t?n.next.focus():n.elem.focus())})})}),i.focus()}),e("#cmAcceptBtn, #cmDeclineBtn").on("click keydown",function(t){if("keydown"!==t.type||13==t.which||32==t.which){t.preventDefault();var n=e(t.target).attr("data-consent");e.ajax({type:"GET",url:e("#consentModal").attr("data-url")+n,async:!1,success:function(t){e.isPlainObject(t)&&!0===t.success?"accept"===n?e("#consentModal").modal("hide"):window.location.href=e("#consentModal #cmDeclineBtn").attr("data-logout-url"):e("#consentModal #cmErrorMsg").html(e("#generic_error_msg").html())},error:function(t,n,i){e("#consentModal #cmErrorMsg").html(e("#generic_error_msg").html())}})}}),function(t){var e=t.fn.modal.Constructor.prototype.show,n=t.fn.modal.Constructor.prototype.hideModal;t.extend(t.fn.modal.Constructor.prototype,{show:function(t){return this.$element.css("pointer-events","auto"),e.call(this,t)},hideModal:function(e){var i=n.call(this,e),o=t("[id^='myNotePopId_']");return o&&o.length>0&&setTimeout(function(){o.find("#note-content").focus()},500),i}})}(jQuery)}else{var O=e("#detailPQURL").html();O&&r.navigateURL(O)}}),f}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(3),n(33),n(4),n(1)],void 0===(o=function(t,e,n,i){"use strict";return t.Layout.extend({template:n.readerSkeltonLayoutTemplate,id:"readerLayout",initialize:function(){this.readrArgs=new e},regions:{toolBarRegion:"#svgToolBarLayoutRegion",sideBarRegion:"#svgSideBarLayoutRegion",panelRegion:"#panelLayoutRegion",mainRegion:"#mainLayoutRegion"}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(34)],void 0===(o=function(t){"use strict";return t.Model.extend({localStorage:new t.LocalStorage("qv-reader-backbone"),defaults:{docid:"",page:1,next:"",prev:"",session:""}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;n(7);(function(){var a,r;r=function(t,e){function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e.LocalStorage=window.Store=function(t){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=t;var e=this.localStorage().getItem(this.name);this.records=e&&e.split(",")||[]},t.extend(e.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(t){return t.id||(t.id=n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n(),t.set(t.idAttribute,t.id)),this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t)),this.records.push(t.id.toString()),this.save(),this.find(t)},update:function(e){return this.localStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),t.include(this.records,e.id.toString())||this.records.push(e.id.toString()),this.save(),this.find(e)},find:function(t){return this.jsonData(this.localStorage().getItem(this.name+"-"+t.id))},findAll:function(){return(t.chain||t)(this.records).map(function(t){return this.jsonData(this.localStorage().getItem(this.name+"-"+t))},this).compact().value()},destroy:function(e){return!e.isNew()&&(this.localStorage().removeItem(this.name+"-"+e.id),this.records=t.reject(this.records,function(t){return t===e.id.toString()}),this.save(),e)},localStorage:function(){return localStorage},jsonData:function(t){return t&&JSON.parse(t)},_clear:function(){var e=this.localStorage(),n=new RegExp("^"+this.name+"-");e.removeItem(this.name),(t.chain||t)(e).keys().filter(function(t){return n.test(t)}).each(function(t){e.removeItem(t)}),this.records.length=0},_storageSize:function(){return this.localStorage().length}}),e.LocalStorage.sync=window.Store.sync=e.localSync=function(t,n,i){var o,a,r=n.localStorage||n.collection.localStorage,s=e.$.Deferred&&e.$.Deferred();try{switch(t){case"read":o=null!=n.id?r.find(n):r.findAll();break;case"create":o=r.create(n);break;case"update":o=r.update(n);break;case"delete":o=r.destroy(n)}}catch(t){a=22===t.code&&0===r._storageSize()?"Private browsing is unsupported":t.message}return o?(i&&i.success&&("0.9.10"===e.VERSION?i.success(n,o,i):i.success(o)),s&&s.resolve(o)):(a=a||"Record Not Found",i&&i.error&&("0.9.10"===e.VERSION?i.error(n,a,i):i.error(a)),s&&s.reject(a)),i&&i.complete&&i.complete(o),s&&s.promise()},e.ajaxSync=e.sync,e.getSyncMethod=function(t){return t.localStorage||t.collection&&t.collection.localStorage?e.localSync:e.ajaxSync},e.sync=function(t,n,i){return e.getSyncMethod(n).apply(this,[t,n,i])},e.LocalStorage},(a=this).require?t.exports=r(n(5),n(7)):(i=[n(5),n(7)],void 0===(o=function(t,e){return r(t||a._,e||a.Backbone)}.apply(e,i))||(t.exports=o))}).call(window)},function(t,e){t.exports='<script type="text/template" id="readerLayoutTemplate">\n\t\t\t<div id="svgToolBarLayoutRegion"></div>\n\t\t\t<div id="readerContent">\n\t\t\t \t<div id="readerContentInner">\n\t\t\t\t\t<div id="svgSideBarLayoutRegion" class=""></div>\n\t\t\t\t\t<div id="panelLayoutRegion" class="hidden-xs hidden-sm hidden-md"></div>\n\t\t\t\t\t<div id="mainLayoutRegion" role="main">\n\t\t\t\t\t\t<div id="mainViewer" ></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n  <\/script>\n\n'},function(t,e){t.exports='<script type="text/template" id="toolbar">\n     <nav id="navbar-toolbar" class="navbar navbar-default navbar-static-top" role="toolbar">\n        <div class="navbar-header">\n          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#toolbar-navbar-collapse">\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n          </button>\n        </div>\n        <div class="navbar-collapse collapse" id="toolbar-navbar-collapse">\n\t\t  <ul class="nav navbar-nav pull-right">\n\t\t\t<li>\n\t\t\t\t<span class="btn-tools-group">\n\t\t\t\t\t<ul class="btn-sublist">\n\t\t\t\t\t\t<li class="btn-sublist-item"><button id="toolDownload" aria-label="<%= _t(\'rr_fd\') %>" data-toggle="modal" title="<%= _t(\'rr_fd\') %>" class="icon-download ga_reader_toolbar_book_download_btn"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-download" /></svg><span class="btn-label-hidden"><%= _t(\'rr_fd\') %></span></button></li>\n\t\t\t\t\t\t<li class="btn-sublist-item"><button id="toolChapterDownload" aria-label=\'<%= _t(\'rr_chapter_d\') %>\' data-toggle="modal" title="<%= _t(\'rr_chapter_d\') %>" class="icon-chapter-download ga_reader_toolbar_chapter_download_btn" data-target="#printModal"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-chapter-download" /></svg><span class="btn-label-hidden"><%= _t(\'rr_chapter_d\') %></span></button></li>\n\t\t\t\t\t\t<li class="btn-sublist-item"><button id="toolCopy" aria-label="<%= _t(\'rr_copy\') %>" data-toggle="tooltip" title="<%= _t(\'rr_copy\') %>" class="icon-copy ga_reader_toolbar_copy_btn"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-copy" /></svg><span class="btn-label-hidden"><%= _t(\'rr_copy\') %></span></button></li>\n\t\t\t\t\t\t<li class="btn-sublist-item"><button id="toolPrint" aria-label="<%= _t(\'rr_print_PDF\') %>" data-toggle="modal" title="<%= _t(\'rr_print_PDF\') %>" class="icon-print ga_reader_toolbar_print_btn" data-target="#printModal" ><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-print" /></svg><span class="btn-label-hidden"><%= _t(\'rr_print_PDF\') %></span></button></li>\n\t\t\t\t\t\t<li class="btn-sublist-item"><button id="toolAddToBookshelf" aria-label="<%= _t(\'rr_add_bookshelf\') %>" data-toggle="modal" title="<%= _t(\'rr_add_bookshelf\') %>" class="icon-bookshelf-add ga_reader_toolbar_add_to_bookshelf_btn">\n\t\t\t\t\t\t   <span class="icon-bookshelf-add"><svg focusable=\'false\' width=\'20\' height=\'20\' style=\'pointer-events:none;\'><use xlink:href="#icon-add-to-bookshelf" /></svg></span>\n\t\t\t\t\t\t   <span class="btn-label-hidden"><%= _t(\'rr_add_bookshelf\') %></span>\n\t\t\t\t\t\t</button></li>\n\t\t\t\t\t\t<li class="btn-sublist-item"><button id="toolLink" aria-label="<%= _t(\'rr_share_link\') %>" data-toggle="tooltip" title="<%= _t(\'rr_share_link\') %>" class="icon-link ga_reader_toolbar_share_btn" data-target="#shareBookLink"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-create-link" /></svg><span class="btn-label-hidden"><%= _t(\'rr_share_link\') %></span></button></li>\n\t\t\t\t\t\t<li class="btn-sublist-item"><button id="toolCite" aria-label="<%= _t(\'rr_get_citation\') %>" data-toggle="tooltip" title="<%= _t(\'rr_get_citation\') %>" class="icon-book-cite ga_reader_toolbar_citation_btn"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-create-citation" /></svg><span class="btn-label-hidden"><%= _t(\'rr_get_citation\') %></span></button></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\n\t\t\t<li>\n\t\t\t\t<span class="btn-tools-group">\n\t\t\t\t\t<ul class="btn-sublist">\n\t\t\t\t\t\t<li class="btn-sublist-item"><button id="toolHighlight" aria-label="<%= _t(\'rr_highlight\') %>" data-toggle="tooltip" title="<%= _t(\'rr_highlight\') %>" class="icon-highlight ga_reader_toolbar_highlight_btn"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-create-highlight"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_highlight\') %></span></button></li>\n\t\t\t\t\t\t<li class="btn-sublist-item"><button id="toolNote" aria-label="<%= _t(\'rr_add_note\') %>" data-toggle="tooltip" title="<%= _t(\'rr_add_note\') %>" class="icon-note ga_reader_toolbar_note_btn"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-create-note"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_add_note\') %></span></button></li>\n\t\t\t\t\t\t<li class="btn-sublist-item"><button id="toolBookmark" aria-label="<%= _t(\'rr_add_bookmark\') %>" data-toggle="tooltip" title="<%= _t(\'rr_add_bookmark\') %>" class="icon-bookmark ga_reader_toolbar_bookmark_btn"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-create-bookmark"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_add_bookmark\') %></span></button></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\n\t\t\t\n\t\t\t<li>\n\t\t\t\t<span class="btn-tools-group ebStaySeen">\n\t\t\t\t\t<ul class="btn-sublist">\n\t\t\t\t\t\t<li class="btn-sublist-item"><button class="icon-page-zoom-out ga_reader_toolbar_zoom_out_btn" aria-label="<%= _t(\'rr_zoom_out\') %>"  title="<%= _t(\'rr_zoom_out\') %>" data-toggle="tooltip" id="tool-viewsmaller"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-page-zoom-out"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_zoom_out\') %></span></button></li>\n\t\t\t\t\t\t<li class="btn-sublist-item"><button class="icon-page-zoom-in ga_reader_toolbar_zoom_in_btn" aria-label="<%= _t(\'rr_zoom_in\') %>"  title="<%= _t(\'rr_zoom_in\') %>" data-toggle="tooltip" id="tool-viewlarger"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-page-zoom-in"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_zoom_in\') %></span></button></li>\n\t\t\t\t\t\t<li class="btn-sublist-item"><span class="dropdown">\n\t\t\t\t\t\t\t<button type="button" id="zoom-dropdown-button" aria-label=\'<%= _t(\'rr_zoomMenu\') %>\' title="<%= _t(\'rr_zoom\') %>" data-toggle="dropdown" class="dropdown-toggle icon-page-zoom-menu ga_reader_toolbar_zoom_menu_btn"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-page-zoom-menu"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_zoomMenu\') %></span></button>\n\t\t\t\t\t\t\t<ul aria-labelledby="zoom-dropdown-button" role="menu" class="dropdown-menu">\n\t\t\t\t\t\t\t\t<li role="presentation"><a id="tool-fitToWidth" class="ga_reader_toolbar_zoom_to_width_link" href="#" tabindex="-1" role="menuitem"><%= _t(\'rr_fit_width\') %></a></li>\n\t\t\t\t\t\t\t\t<li role="presentation"><a id="tool-fitToHeight" class="ga_reader_toolbar_zoom_to_height_link" href="#" tabindex="-1" role="menuitem"><%= _t(\'rr_fit_page\') %></a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</span></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</span>\n\t\t\t</li>\n\n\t\t\t<li>\n\t\t\t\t<span id="tool-pageloc" class="ebStaySeen">\x3c!-- page location --\x3e\n\t\t\t\t\t<button class="pageloc-button ga_reader_toolbar_page_location_btn" aria-label="<%= _t(\'rr_goToPageAria\') %>"  data-toggle="tooltip" title="<%= _t(\'rr_go_to_page\') %>" ><span class="dotted"><%= _t(\'rr_page\') %> </span><span class="dotted"  id=\'tool-current-page-loc\' >1</span><span class="total-number-of-pages">of 350</span></button>\n\t\t\t\t\t<input  id=\'current-page\' type=\'hidden\' value="1" size="2" />\n\t\t\t\t</span>\n\t\t\t</li>\n\n\t\t\t<li>\n\t\t\t\t<span id="tool-pagegoto"  class="ebStaySeen">\n\t\t\t\t\t<div class="input-group col-xs-1" role="goToPage" >\n\t\t\t\t\t\t<label class="sr-only" for="tool-pagegoto-text">Go to page</label>\n\t\t\t\t\t\t<input class="form-control" type="text" placeholder=\'<%= _t(\'rr_go_to_page\') %>\' id="tool-pagegoto-text" maxlength="6" value=""/>\n\t\t\t\t\t\t <span class="input-group-addon total-number-of-pages"> of 350</span>\n\t\t\t\t    </div>\n\t\t\t\t</span>\n\t\t\t</li>\n\n\t\t\t<li>\n\t\t\t\t<span class="btn-tools-group btn-tools-group-last">\n\t\t\t\t\t<ul class="btn-sublist">\n\t\t\t\t\t\t<li class="btn-sublist-item"><button id="tool-pager-prev" aria-label="<%= _t(\'rr_goToPrePageAria\') %>" data-toggle="tooltip" title="<%= _t(\'rr_previous\') %>" class="icon-page-prev ga_reader_toolbar_prev_page_btn"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-page-prev"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_goToPrePageAria\') %></span></button></li>\n\t\t\t\t\t\t<li class="btn-sublist-item"><button id="tool-pager-next" aria-label="<%= _t(\'rr_goToNexPageAria\') %>"ndata-toggle="tooltip" title="<%= _t(\'rr_next\') %>" class="icon-page-next ga_reader_toolbar_next_page_btn"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-page-next"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_goToNexPageAria\') %></span></button></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</span>\n\t\t\t</li>\n          </ul>\n        </div>\x3c!-- EndOf Tools nav-collapse --\x3e\n      </nav> \x3c!-- EndOf Tools nav --\x3e\n\n\n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="shareLinkTemp">\n \t\n\t<div class="modal fade" id="shareBookLink" tabindex="-1" role="dialog"  aria-hidden="true" >\n\t  <div class="modal-dialog">\n\t    <div class="modal-content">\n\t      <div class="modal-header">\n\t        <button type="button"  class="ga_share_close close btn-close" data-dismiss="modal" ><span class="icon-close" aria-hidden="true"><svg focusable=\'false\' width=\'12\' height=\'12\' fill=\'white\' style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></span><span class="sr-only">Close</span></button>\n\t        <h4 class="modal-title" id="myShareModalLabel"><%= _t(\'rr_share_this_book\') %></h4>\n\t      </div>\n\t      <div class="modal-body">\n\t        <div class="modal-book-title"><%= BiblioData.title !== "undefined"?BiblioData.title:_t(\'rr_na\')%><span class=\'modal-book-byline\'> <%=_t(\'rr_by\') %> </span><span class=\'modal-book-author\'><% if(typeof BiblioData.contibutors !== "undefined"){ var tmpCtbs= (BiblioData.contibutors.slice(0,3)); %><%=tmpCtbs.join()%> <% }else{%> <%=_t(\'rr_na\') %> <% }%></span></div>\n\t      </div>\n\t\n\t\t\t<form id="shareLinkForm" class="form-horizontal" role="form">\n\t\t\t\t<div class="form-group row">\n\t\t\t\t\t<label for="shareUrl" class="col-sm-3 control-label modal-control-label"><%= _t(\'rr_copy_link\') %></label>\n\t\t\t\t\t<div class="col-sm-8">\n\t\t\t\t\t<textarea type="textarea" rows=\'4\' style="resize:none" class="form-control" name="shareUrl" id="shareUrl"><%= shareURL %></textarea>\n\t\t\t\t\t<% if ( navigator.userAgent.match(/(iPad|iPhone|iPod|Android)/i) ) {%>\n\t\t\t\t\t\t<p class="modal-helptext"><%= _t(\'rr_copy_option_md\') %></p>\n\t\t\t\t\t<%}else{%>\t\n\t\t\t\t\t\t<p class="modal-helptext">\n\t\t\t\t\t\t   <% if (navigator.appVersion.indexOf("Mac")!=-1) { %> \n\t\t\t\t\t\t\t\t<%= _t(\'rr_command_c\') %>\n\t\t\t\t\t       <% } else { %> \n\t\t\t\t\t            <%= _t(\'rr_control_c\') %>      \n\t\t\t\t\t       <% } %>\t\t\t\t\t   \n\t\t\t\t\t\t</p>\n\t\t\t\t\t<%}%>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group row" >\n\t\t\t\t\t<div class="col-sm-11 col-sm-offset-1"><span class="modal-tip-helptext"> <strong><%= _t(\'rr_tip\') %></strong></span> <strong><%= _t(\'rr_back_to_current_page\') %></strong> </div>\t\t\t\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button type="button" class="ga_share_cancel btn btn-default" data-dismiss="modal"><%= _t(\'rr_close\') %></button>\n\t\t\t\t<button type="button" class="btn btn-primary" data-dismiss="modal" id="shareLinkDone" ><%= _t(\'rr_done\') %></button>\n\t      </div>\n\t    </div>\x3c!-- /.modal-content --\x3e\n\t  </div>\x3c!-- /.modal-dialog --\x3e\n\t</div>\x3c!-- /.modal --\x3e\n \n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="copyTextTemp">\n \t\n\t\x3c!-- Modal --\x3e\n\t<div class="modal fade" id="copyModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n\t  <div class="modal-dialog">\n\t    <div class="modal-content">\n\t      <div class="modal-header">\n\t        <button type="button"  class="ga_copy_close close btn-close" data-dismiss="modal" ><span class="icon-close" aria-hidden="true"><svg focusable=\'false\' width=\'12\' height=\'12\' fill=\'white\' style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></span><span class="sr-only"><%= _t(\'rr_close\') %></span></button>\n\t        <h4 class="modal-title" id="myModalLabel"><%= _t(\'rr_copy\') %></h4>\n\t      </div>\n\t\t     <div class="modal-body modal-tightspace-bottom"> \n\t\t\t\t<form id="copyModalForm" class="form-horizontal" role="form">\n\t\t\t\t\t\t<div class="">\n\t\t\t\t\t\t<% if(typeof (status) !== "undefined" && (status === "false" || status === "FAILURE" )) {%>\n\t\t\t\t\t\t\t<div class="alert alert-danger alert-error">\n\t\t\t\t\t\t\t      <% if (typeof errorCode !== "undefined" && (errorCode === "SESSION_TIMED_OUT" || errorCode === "SESSION_TIMEDOUT")) {   %>\n\t\t\t\t\t\t\t             <%=   _t(\'rr_session_timed_out_refresh\')   %>\n\t\t\t\t\t\t\t      <%  } else {   %>\n\t\t\t\t\t\t\t           <%=wrapDashErrorMessage()%>\n\t\t\t\t\t\t\t       <% }  %> \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<% if(typeof (error) !== "undefined" && error === false) {%>\n\t\t\t\t\t\t\t <div class="form-control modal-editable-div" name="copyContent" id="copyContent" contenteditable="true" style="height: 206px !important;"><%=copiedText%><br><%=citation%></div>\n\t\t\t\t\t\t\t<% if ( navigator.userAgent.match(/(iPad|iPhone|iPod|Android)/i) ) {%>\n\t\t\t\t\t\t\t\t<p class="modal-helptext"><%= _t(\'rr_copy_option_md\') %></p>\n\t\t\t\t\t\t\t<%}else{%>\t\n\t\t\t\t\t\t\t\t<p class="modal-helptext">\n\t\t\t\t\t\t\t\t   <% if (navigator.appVersion.indexOf("Mac")!=-1) { %>\n\t\t\t\t\t\t\t\t        <%= _t(\'rr_command_c\') %>\n\t\t\t\t\t\t\t\t    <% } else { %>\n\t\t\t\t\t\t\t\t        <%= _t(\'rr_control_c\') %>\n\t\t\t\t\t\t\t\t    <% } %>\t\t\t\t\t\t\t\t  \n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<%}%>\t\t\t\t\t\t\t\n\t\t\t\t\t\t<% } %>\n\t\t\t\t      </div>\n\t\t\t\n\t\t\t\n\t\t\t\t\t<div class="modal-footer modal-tightspace-top">\n\t\t\t\t\t\t<button id=\'modalCancel\' type="button" class="btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button>\n\t\t\t\t\t\t<button id=\'modalDone\' type="button" class="btn btn-primary"   data-dismiss="modal" ><%= _t(\'rr_done\') %></button>\n\t\t\t      \t</div>\n\t\t\t      </form>\n\t       \t</div>\n\t    </div>\x3c!-- /.modal-content --\x3e\n\t  </div>\x3c!-- /.modal-dialog --\x3e\n\t</div>\x3c!-- /.modal --\x3e\n\n\n\n\n\n \n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="printWrapperpanel">\n\t\t\n\n\x3c!-- Modal --\x3e\n<div class="modal fade" id="printModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button"  class="ga_print_close close btn-close" data-dismiss="modal" ><span class="icon-close" aria-hidden="true"><svg focusable=\'false\' width=\'12\' height=\'12\' fill=\'white\'  style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></span><span class="sr-only"><%= _t(\'rr_close\') %></span></button>\n        <h4 class="modal-title" id="myModalLabelPrint"><%= _t(\'rr_print_PDF\') %></h4>\n      </div>\n\n\t\t<form class="form-horizontal" role="form">\n\n\t\t\t\x3c!-- DefaultScreensContainers --\x3e\n\t\t\t<div id="printDefaultWrapper">\n\t\t\t\n\t\t\t</div>\n\n      </form>\n    </div>\x3c!-- /.modal-content --\x3e\n  </div>\x3c!-- /.modal-dialog --\x3e\n</div>\x3c!-- /.modal --\x3e\n\n\n\n\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="printWrapperpanel">\n\t\t\n\t\t\t\x3c!-- print screen 1 --\x3e\n\t\t\t<div id="print1" class=\'print-screen\'>\n\t\t\t\t<div class="form-group">\n\t\t\t\t<label for="inputEmail3" class="col-sm-4 control-label modal-control-label"><%= _t(\'rr_page_range\') %></label>\n\t\t\t\t<div class="col-sm-8">\n\t\t\t\t\n\t\t\t\t\t\x3c!-- page range radio buttons --\x3e\n\t\t\t\t\t<div id="currentPageDiv" class="radio">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type="radio" name="optionsRadios" id="optionsRadios1" value="page" checked>\n\t\t\t\t\t\t<%= _t(\'rr_current_page\') %>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div id=\'printCurrentPageError\' class="text-danger"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="pageSelDiv" class="radio">\n\t\t\t\t\t\t<label for="optionsRadios2">\n\t\t\t\t\t\t<input type="radio" name="optionsRadios" id="optionsRadios2" value="range">\n\t\t\t\t\t\t<%= _t(\'rr_pages_from\') %> </label> <input type="text" name="startPage" id="startPage" size=\'3\'> <%= _t(\'rr_to\') %> <input type="text" name="endPage" id="endPage" size=\'3\'>\n\t\t\t\t\t\t<div id=\'printPageAllowance\'></div>\n\t\t\t\t\t\t<div id=\'printPageRangeError\' class="text-danger"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="currentChptDiv" class="radio">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type="radio" name="optionsRadios" id="optionsRadios2" value="chapter">\n\t\t\t\t\t\t<%= _t(\'rr_current_chapter\') %>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div id=\'printChapterError\' class="text-danger"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- end page range radio buttons --\x3e\n\n\t\t\t\t</div>\x3c!-- end col-sm-8 --\x3e\n\t\t\t</div>\n\n\t\t\t<div class="form-group">\n\t\t\t\t<label for="citationStyle" class="col-sm-4 control-label modal-control-label"><%= _t(\'rr_citation_style\') %></label>\n\t\t\t\t<div class="col-sm-7">\n\t\t\t\t\t<select name="citationStyle" id="citationStyle" class="form-control">\n\t\t\t\t\t\t<option value="APA">APA</option>\n\t\t\t\t\t\t<option value="CTNB">Chicago/Turabian  Notes-Bibliography</option>\n\t\t\t\t\t\t<option value="CTAD">Chicago/Turabian  Author-Date</option>\n\t\t\t\t\t\t<option value="Harvard">Harvard</option>\n\t\t\t\t\t\t<option value="MLA">MLA</option>\n\t\t\t\t\t\t<option value="Vancouver">Vancouver</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\x3c!-- end col-sm-7 --\x3e\n\t\t\t\t<div class="col-sm-1"></div>\n\t\t\t</div>\n\n\t\t\t\x3c!-- if we need buttons for each screen --\x3e\n\t\t\t\x3c!-- <div class="print-buttonset">\n\t\t\t\t<button type="button" class="btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button>\n\t\t\t\t<button type="button" class="btn btn-primary"><%= _t(\'rr_continue\') %></button>\n\t\t\t</div> --\x3e\n\t\t\t\n\n\t\t\t</div>\x3c!-- end print1 --\x3e\n\t\t\t\x3c!-- end print screen 1 --\x3e\n\n\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button id="printCancel" type="button" class="btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button>\n\t\t\t\t<button id="printContinue" type="button" class="btn btn-primary"><%= _t(\'rr_continue\') %></button>\n\t\t\t</div>\n\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="printWrapperpanel">\n\t\t\n\t\t\t\x3c!-- print screen 5 --\x3e\n\t\t\t<div id="print5" class=\'print-screen clearfix\'>\n\t\t\t<div class="print-5-msg">\n\n\t\t\t<div id=\'print-5-msg-icon\' class="icon-hand pull-left"><svg focusable=\'false\' width=\'40\' height=\'40\'  style=\'pointer-events:none;\' ><use xlink:href="#icon-hand" /></svg></div>\n\t\t\t<div><%= _t(\'rr_multiple_sections\') %></div>\n\n\t\t\t\t\x3c!-- <div class="row">\n\t\t\t\t\t<div class="col-sm-2">\n\t\t\t\t\t\t<div id=\'print-5-msg-icon\' class="icon-hand"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-sm-9"><%= _t(\'rr_multiple_sections\') %></div>\n\t\t\t\t</div> --\x3e\n\t\t\t</div>\n\t\t\t<select id=\'printSelectSection\' class="form-control" size=\'5\'>\n\t\t\t  <%  var counterLevel1=-1;  _.each(pnt.multipleRangeSelection, function(tmpSelectedChapter) { counterLevel1++; %>\n\t\t\t\t<option value="<%= "pgRangeInd_"+counterLevel1 %>"><%= tmpSelectedChapter.chapterName %></option>\n\t\t\t <% }); %>\n\t\t\t</select>\n\t\t\t\n\t\t\t</div>\n\t\t\t\x3c!-- end print screen 5 --\x3e\n\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button type="button" class="ga_print_cancel btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button>\n\t\t\t\t<button id="selectionPrintPreview" type="button" class="btn btn-primary"><%= _t(\'rr_preview\') %></button>\n\t\t\t</div>\n\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="printWrapperpanel">\n\t\t\n\t\t\t\x3c!-- print screen 2 --\x3e\n\t\t\t<div id="print2" class=\'print-screen clearfix\'>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-xs-3">\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="print-preview">\n\t\t\t\t\t\t\t\t<img width="98px;" src="img/samplePrintPreview.jpg" alt="">\n\t\t\t\t\t\t\t\t<div class="print-preview-pager">\n\t\t\t\t\t\t\t\t\t\x3c!--\t<button class="preview-pager icon-page-prev" id="preview-pager-prev"></button>\n\t\t\t\t\t\t\t\t\t<button class="preview-pager icon-page-next" id="preview-pager-next"></button> --\x3e\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="print-preview-pagecount"><%= _t(\'rr_page_1_of\') %> <%= pnt.ped-pnt.pst+1 %></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-8"><%= _t(\'rr_create_PDF_for_printing\') %>\n\t\t\t\t\t\t<div class="row print-details">\n\t\t\t\t\t\t\t<div class="col-xs-6 print-details-left"><%= _t(\'rr_page_range\') %></div>\n\t\t\t\t\t\t\t<div class="col-xs-6 print-details-right"><%= pnt.pst+" - " + pnt.ped %></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="row print-details">\n\t\t\t\t\t\t\t<div class="col-xs-6 print-details-left"><%= _t(\'rr_citation_style\') %></div>\n\t\t\t\t\t\t\t<div class="col-xs-6 print-details-right"><%= pnt.ct %></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-xs-12">\n\t\t\t\t\t\t\t\t<p><%= _t(\'rr_printing_pages_remain_allowance\', {REMPG: pnt.ped-pnt.pst+1, TOTREM: pnt.ped-pnt.pst+1 }) %></p>\n\t\t\t\t\t\t\t\t<p><a href=\'#\' id=\'printStartOver\'><%= _t(\'rr_start_over\') %></a></p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\x3c!-- end print screen 2 --\x3e\n\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button id="printCancel" type="button" class="btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button>\n\t\t\t\t<button id="printCreate" type="button" class="btn btn-primary"><%= _t(\'rr_create\') %></button>\n\t\t\t</div>\n\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="printWrapperpanel">\n\t\t\n\t\t\t\x3c!-- print screen 3 --\x3e\n\t\t\t<div id="print3" class=\'print-screen clearfix\'>\n\t\t\t<div id=\'print3Spinner\' class="icon-spinner"><svg focusable=\'false\' width=\'40\' height=\'40\'  style=\'pointer-events:none;\' ><use xlink:href="#icon-spinner" /></svg></div>\n\t\t\t<div class="print-3-msg"><%= _t(\'rr_creating_PDF\') %></div>\n\t\t\t<div class="print-3-help"><%= _t(\'rr_may_take_moment\') %></div>\n\t\t\t</div>\n\t\t\t\x3c!-- end print screen 3 --\x3e\n\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button type="button" class="ga_print_cancel btn btn-default" data-dismiss="modal" disabled="disabled" ><%= _t(\'rr_cancel\') %></button>\n\t\t\t\t<button id="printCreate" type="button" class="btn btn-primary" disabled="disabled" ><%= _t(\'rr_create\') %></button>\n\t\t\t</div>\n\t\t\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="printWrapperpanel">\n\t\t\n\t\t\t\x3c!-- print screen 4 --\x3e\n\t\t\t<div id="print4" class=\'print-screen clearfix\'>\n\t\t\t<% if(pnt.rds === \'chapter\') {%>\n\t\t\t     <button id=\'chapterOpenPDF\' type="button" class="btn btn-lg btn-primary" data-dismiss="modal"><%= _t(\'rr_open_PDF\') %></button>\n\t\t\t<%} else{%>\n\t\t\t     <button id=\'printOpenPDF\' type="button" class="btn btn-lg btn-primary" data-dismiss="modal"><%= _t(\'rr_open_PDF\') %></button>\n\t\t\t<%} %>\n\t\t\t</div>\n\t\t\t\x3c!-- end print screen 4 --\x3e\n\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="printWrapperpanel">\n\t\t\n\t\t\t\x3c!-- print screen 6 --\x3e\n\t\t\t<div id="print6" class=\'print-screen clearfix\'>\n\t\t\t\t<h3><%= _t(\'rr_unable_create_PDF\') %></h3>\n\t\t\t</div>\n\t\t\t\x3c!-- end print screen 6 --\x3e\n\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button type="button" class="ga_print_cancel btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button>\n\t\t\t\t<button id="printStartOver" type="button" class="btn btn-primary"><%= _t(\'rr_start_over\') %></button>\n\t\t\t</div>\n\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="dummyTemp">\n\t<h1> I m in dummy View. </h1>\n\t<div>\n\t\t<h2> IN the dummy DIV. </h2>\n\t</div>\n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="printTemp">\n \t\n\x3c!-- Modal --\x3e\n<div class="modal fade" id="printModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button"  class="ga_print_close close btn-close" data-dismiss="modal" ><span class="icon-close" aria-hidden="true"><svg focusable=\'false\' width=\'12\' height=\'12\' fill=\'white\' style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></span><span class="sr-only"><%= _t(\'rr_close\') %></span></button>\n        <h4 class="modal-title" id="myModalLabel"><%= _t(\'rr_print_to_PDF\') %></h4>\n      </div>\n      \x3c!-- <div class="modal-body">\n      </div> --\x3e\n\n\t\t<form class="form-horizontal" role="form">\n\n\t\t\t\x3c!-- print screen 1 --\x3e\n\t\t\t<div id="print1" class=\'print-screen\'>\n\t\t\t\t<div class="form-group">\n\t\t\t\t<div class="row">\n\t\t\t\t<label for="inputEmail3" class="col-sm-4 control-label modal-control-label"><%= _t(\'rr_page_range\') %></label>\n\t\t\t\t<div class="col-sm-7">\n\t\t\t\t\n\t\t\t\t\t\x3c!-- page range radio buttons --\x3e\n\t\t\t\t\t<div class="radio">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>\n\t\t\t\t\t\t<%= _t(\'rr_current_page\') %>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="radio">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">\n\t\t\t\t\t\t<%= _t(\'rr_pages_from\') %> </label><input type="text" name="startPage" id="startPage" size=\'3\'> <%= _t(\'rr_to\') %> <input type="text" name="endPage" id="endPage" size=\'3\'>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div id=\'print-pagerange-error\' class="text-danger">Error message goes here.</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="radio">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">\n\t\t\t\t\t\t<%= _t(\'rr_current_chapter\') %>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- end page range radio buttons --\x3e\n\n\t\t\t\t</div>\x3c!-- end col-sm-8 --\x3e\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="form-group">\n\t\t\t<div class="row">\n\t\t\t\t<label for="inputEmail3" class="col-sm-4 control-label modal-control-label"><%= _t(\'rr_citation_style\') %></label>\n\t\t\t\t<div class="col-sm-7">\n\t\t\t\t\t<select class="form-control">\n\t\t\t\t\t\t<option><%= _t(\'rr_harvard\') %></option>\n\t\t\t\t\t\t<option>2</option>\n\t\t\t\t\t\t<option>3</option>\n\t\t\t\t\t\t<option>4</option>\n\t\t\t\t\t\t<option>5</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\x3c!-- end col-sm-8 --\x3e\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t\x3c!-- if we need buttons for each screen --\x3e\n\t\t\t\x3c!-- <div class="print-buttonset">\n\t\t\t\t<button type="button" class="btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button>\n\t\t\t\t<button type="button" class="btn btn-primary"><%= _t(\'rr_continue\') %></button>\n\t\t\t</div> --\x3e\n\t\t\t\n\n\t\t\t</div>\x3c!-- end print1 --\x3e\n\t\t\t\x3c!-- end print screen 1 --\x3e\n\n\t\t\t\x3c!-- print screen 2 --\x3e\n\t\t\t<div id="print2" class=\'print-screen clearfix\'>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-sm-3 col-sm-offset-1">\n\t\t\t\t\t\t<div class="print-preview"><img src="" alt="">\n\t\t\t\t\t\t<div class="print-preview-pager">\n\t\t\t\t\t\t\t<button class="preview-pager icon-page-prev" id="preview-pager-prev"></button>\n\t\t\t\t\t\t\t<button class="preview-pager icon-page-next" id="preview-pager-next"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="print-preview-pagecount">Page 1 of 7</div>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-sm-8">You are about to create the following PDF for printing:\n\t\t\t\t\t\t<div class="row print-details">\n\t\t\t\t\t\t\t<div class="col-sm-6 print-details-left"><%= _t(\'rr_page_range\') %></div>\n\t\t\t\t\t\t\t<div class="col-sm-6 print-details-right">3-10</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="row print-details">\n\t\t\t\t\t\t\t<div class="col-sm-6 print-details-left"><%= _t(\'rr_citation_style\') %></div>\n\t\t\t\t\t\t\t<div class="col-sm-6 print-details-right"><%= _t(\'rr_harvard\') %></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p><%= _t(\'rr_printing_pages_remain_allowance\', {REMPG: 7, TOTREM: 2 }) %></p>\n\t\t\t\t\t\t<p><a href=\'#\' id=\'startOver\'><%= _t(\'rr_start_over\') %></a></p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\x3c!-- end print screen 2 --\x3e\n\n\t\t\t\x3c!-- print screen 3 --\x3e\n\t\t\t<div id="print3" class=\'print-screen clearfix\'>\n\t\t\t<div id=\'print3Spinner\' class="icon-spinner"><svg focusable=\'false\' width=\'40\' height=\'40\' style=\'pointer-events:none;\' ><use xlink:href="#icon-spinner" /></svg></div>\n\t\t\t<div class="print-3-msg"><%= _t(\'rr_creating_PDF\') %></div>\n\t\t\t<div class="print-3-help"><%= _t(\'rr_may_take_moment\') %></div>\n\t\t\t</div>\n\t\t\t\x3c!-- end print screen 3 --\x3e\n\n\t\t\t\x3c!-- print screen 4 --\x3e\n\t\t\t<div id="print4" class=\'print-screen clearfix\'>\n            <% if(pnt.rds === \'chapter\') {%>\n                <button id=\'chapterOpenPDF\' type="button" class="btn btn-lg btn-primary"><%= _t(\'rr_open_PDF\') %></button>\n            <%} else { %>\n\t\t\t     <button id=\'printOpenPDF\' type="button" class="btn btn-lg btn-primary"><%= _t(\'rr_open_PDF\') %></button>\n\t\t\t<%} %>\n\t\t\t</div>\n\t\t\t\x3c!-- end print screen 4 --\x3e\n\n\t\t\t\x3c!-- print screen 5 --\x3e\n\t\t\t<div id="print5" class=\'print-screen clearfix\'>\n\t\t\t<div class="print-5-msg">\n\n\t\t\t<div id=\'print-5-msg-icon\' class="icon-hand pull-left"></div>\n\t\t\t<div><%= _t(\'rr_multiple_sections\') %></div>\n\n\t\t\t\t\x3c!-- <div class="row">\n\t\t\t\t\t<div class="col-sm-2">\n\t\t\t\t\t\t<div id=\'print-5-msg-icon\' class="icon-hand"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-sm-9"><%= _t(\'rr_multiple_sections\') %></div>\n\t\t\t\t</div> --\x3e\n\t\t\t</div>\n\t\t\t<select multiple id=\'print-select-section\'class="form-control" size=\'5\'>\n\t\t\t\t<option>Section 1 pages 3-10</option>\n\t\t\t\t<option>Section 2 pages 3-10</option>\n\t\t\t\t<option>Section 3 pages 3-10</option>\n\t\t\t\t<option>Section 4 pages 3-10</option>\n\t\t\t\t<option>Section 5 pages 3-10</option>\n\t\t\t</select>\n\t\t\t\n\t\t\t</div>\n\t\t\t\x3c!-- end print screen 5 --\x3e\n\n\n\t\t<div class="modal-footer">\n\t\t\t<button type="button" class="btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button>\n\t\t\t<button type="button" class="btn btn-primary"><%= _t(\'rr_continue\') %></button>\n\t\t</form>\n      </div>\n    </div>\x3c!-- /.modal-content --\x3e\n  </div>\x3c!-- /.modal-dialog --\x3e\n</div>\x3c!-- /.modal --\x3e\n\n \n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="sideBar">\n\t<div class="containerSideBar" role="complementary">\n\t\t<a href=\'#\' id="bookDetails" title="<%= _t(\'rr_details\') %>" ><div class="icon-book-details svgIcon"   aria-controls="B-Section" ><svg focusable=\'false\' width=\'28\' height=\'28\' style=\'pointer-events:none;\' ><use xlink:href="#icon-book-details"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_details\') %></span><span class="tabSelected sr-only"></span></div></a>\n\t\t<a href=\'#\' id="bookToc" title="<%= _t(\'rr_toc\') %>" ><div class="icon-book-toc svgIcon svgIcon-selected svgBtn-sidebar-selected" aria-controls="A-Section"  ><svg focusable=\'false\' width=\'28\' height=\'28\' style=\'pointer-events:none;\'  ><use xlink:href="#icon-book-toc"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_toc\') %></span><span class="tabSelected sr-only">Tab currently selected</span></div></a>\n\t\t<a href=\'#\' id="bookNotes" title="<%= _t(\'rr_annotations\') %>" ><div class="icon-annotations svgIcon" aria-controls="C-Section"  ><svg focusable=\'false\' width=\'28\' height=\'28\' style=\'pointer-events:none;\'  ><use xlink:href="#icon-annotations"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_annotations\') %></span><span class="tabSelected sr-only"></span></div></a>\n\t\t<a href=\'#\' id="bookSearch" title="<%= _t(\'rr_search_in_book\') %>" ><div class="icon-book-search svgIcon" aria-controls="D-Section"  ><svg focusable=\'false\' width=\'28\' height=\'28\' style=\'pointer-events:none;\'  ><use xlink:href="#icon-search"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_search_in_book\') %></span><span class="tabSelected sr-only"></span></div></a>\n\t\t\x3c!-- <a href=\'#\' id="bookResources" title="<%= _t(\'rr_addResource\') %>"  ><div class="icon-extra-resources svgIcon" aria-controls="E-Section"  ><svg focusable=\'false\' width=\'28\' height=\'28\' style=\'pointer-events:none;\'  ><use xlink:href="#icon-resources"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_addResource\') %></span><span class="tabSelected sr-only"></span></div></a> --\x3e\n\t</div>\n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="panelSearch">\n\t\t\n\t\t<div id=\'search-container\'>\n\t\t\t<div id="panel-close" aria-hidden="true"><button class="btn-close" id="closePanel"><svg focusable=\'false\' width=\'14\' height=\'14\' style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></button></div>\n\t\t\t\x3c!-- /////// SEARCH TITLE /////// --\x3e\n\t\t\t<H2><%= _t(\'rr_search\') %></H2>\n\t\t\t<div class="book-title"><%= _t(\'rr_origin_of_species\') %></div>\n\t\t\t\x3c!-- /////// END SEARCH TITLE /////// --\x3e\n\t\n\t\t\t<div id="search-block">\n\t\t\t\t<div id="help-block" class="help-block"> </div>\n\t\t\t\t<div class="input-group">\n\t\t\t\t<label class="sr-only" for="usersearchInBookTerm"><%= _t(\'rr_search_in_bookAria\') %></label>\n\t\t\t    <input type="text" id="usersearchInBookTerm" class="form-control" placeholder="<%= _t(\'rr_search_in_book\') %>">\n\t\t\t\t    \x3c!-- <span class="input-group-btn">\n\t\t\t\t        <button class="btn btn-default btn-search-inline icons-close" type="button"></button>\n\t\t\t\t    </span> --\x3e\n\t\t\t\t    <span class="input-group-btn">\n\t\t\t\t        <button class="ga_search_btn btn btn-default btn-search-inline icons-return" type="button">\n\t\t\t\t           <svg focusable=\'false\' width=\'15\' height=\'15\'  style=\'pointer-events:none;\' ><use xlink:href="#icon-return"></use></svg>s\n\t\t\t\t        </button>\n\t\t\t\t    </span>\n\t\t\t\t</div>\n\t\n\t\t\t\t<div id=\'search-button\' class="pull-right">\n\t\t\t\t\t<button type="button" class="ga_search_btn btn btn-primary"><%= _t(\'rr_search\') %></button>\n\t\t\t\t</div>\n\t\t\t</div>\x3c!-- end search-block --\x3e\n\n\t\t\n\n\n\n\t</div>\t\x3c!-- end search container --\x3e\n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="panelToc">\r\n\r\n\t<div id="panel-close" ><button class="btn-close" id="closePanel"><svg focusable=\'false\' width=\'14\' height=\'14\' ><use xlink:href="#icon-close-lg"/></svg></button></div>\r\n\t<h3 class="sr-only">Table Of Content Section</h3>\r\n\t<div id=\'toc-container\'>\r\n \t\t\r\n\t\t<div id="book-meta-open">\r\n\t\t\t<% if (typeof BiblioData !== "undefined") { %>\r\n\t\t\t\t<div id=\'closeMetaData\'  class="row">\r\n\t\t\t\t\t<div class="col-xs-1"><span id=\'close-title\' class="icon-panel-close"><svg focusable=\'false\' width=\'20\' height=\'20\'  ><use xlink:href="#icon-panel-opened"/></svg></span></div>\r\n\t\t\t\t\t<div class="col-xs-11 book-title"><%= BiblioData.title !== "undefined"?BiblioData.title:_t(\'rr_na\')%></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\'book-meta-info\' class="row">\r\n\t\t\t\t\t\t<div class="col-xs-4"><div id=\'cover\' width="98px" ><img src="<%=BiblioData.coverURL%>" alt="<%= _t(\'rr_bookCoverImg\') %>"></div></div>\r\n\t\t\t\t\t\t<div class="col-xs-8">\r\n\t\t\t\t\t\t\t<div class="toc-author"><span><%= _t(\'rr_by\') %> </span><% if(typeof BiblioData.contibutors !== "undefined" && !_.isNull(BiblioData.contibutors) ){ var tmpCtbs= (BiblioData.contibutors.slice(0,3)); %><%=tmpCtbs.join()%> <% }else{%> <%= _t(\'rr_na\') %> <% }%></div>\r\n\t\t\t\t\t\t\t<div class="meta-label"><%= _t(\'rr_publisher\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-data"><%= typeof BiblioData.publisher !== "undefined"?BiblioData.publisher: _t(\'rr_na\')%></div>\r\n\t\t\t\t\t\t\t<div class="meta-label"><%= _t(\'rr_date\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-data"><%= typeof BiblioData.orgPublishDateFormatted !== "undefined"?BiblioData.orgPublishDateFormatted: _t(\'rr_na\')%></div>\r\n\t\t\t\t\t\t\t<div class="meta-more"><a id="book-detail-more" href="detail.action?docID=<%=BiblioData.docID %>" aria-label="<%= _t(\'rr_moreBkDetail\') %>" ><%= _t(\'rr_more\') %></a></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t<% } else {%>\r\n\t\t\t\t\t\t<div id=\'closeMetaData\'  class="row">\r\n\t\t\t\t\t\t\t<div class="col-xs-1"><span id=\'close-title\' class="icon-panel-close"><svg focusable=\'false\' width=\'20\' height=\'20\'  ><use xlink:href="#icon-panel-opened"/></svg></span></div>\r\n\t\t\t\t\t\t\t<div class="col-xs-11 book-title"><%= _t(\'rr_na\') %></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div id=\'book-meta-info\' class="row">\r\n\t\t\t\t\t\t<div class="col-sm-4"><div id=\'cover\' ><img width="98px" src="" alt="<%= _t(\'rr_bookCoverImg\') %>"></div></div>\r\n\t\t\t\t\t\t<div class="col-sm-8">\r\n\t\t\t\t\t\t\t<div class="toc-author"><span><%= _t(\'rr_by\') %> </span> <%= _t(\'rr_na\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-label"><%= _t(\'rr_publisher\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-data"><%= _t(\'rr_na\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-label"><%= _t(\'rr_date\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-data"><%= _t(\'rr_na\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-more"><a id="book-detail-more" href="detail.action?docID=<%=BiblioData.docID%>" aria-label="<%= _t(\'rr_moreBkDetail\') %>" ><%= _t(\'rr_more\') %></a></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t<% } %>\r\n\t\t\t\r\n\t\t</div>\x3c!-- end book-meta-open --\x3e\r\n\r\n\t<div id="book-meta-closed" style="display:none;">\r\n\t\t<div id=\'openMetaData\' class="row">\r\n\t\t\t<div class="col-xs-1"><span id=\'open-title\' class="icon-panel-open"><svg focusable=\'false\' width=\'20\' height=\'20\'  ><use xlink:href="#icon-panel-closed"/></svg></span></div>\r\n\t\t\t<div class="col-xs-11 book-title-small"><%= BiblioData.title !== "undefined"?BiblioData.title: _t(\'rr_na\')%></div>\r\n\t\t</div>\r\n\t</div>\x3c!-- end book-meta-closed --\x3e\r\n\r\n\t<div id="search-block">\r\n\t\t\t\t<div class="input-group">\r\n\t\t\t\t\t<label class="sr-only" for="searchInBookTermInToc"><%= _t(\'rr_search_in_bookAria\') %></label>\r\n\t\t\t    \t<input id="searchInBookTermInToc" type="text" class="form-control" placeholder="<%= _t(\'rr_search_in_book\') %>">\r\n\t\t\t\t    <span class="input-group-btn">\r\n\t\t\t\t        <button id="searchWithInBookToc" aria-label="<%= _t(\'rr_search\') %>" class="btn btn-default btn-search-inline icons-return" type="button">\r\n\t\t\t\t              <svg focusable=\'false\' width=\'15\' height=\'15\' ><use xlink:href="#icon-return"></use></svg>\r\n\t\t\t\t        </button>\r\n\t\t\t\t    </span>\r\n\t\t\t\t</div>\r\n\t</div>\x3c!-- end search-block --\x3e\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t<br/>\r\n\t\x3c!-- begin table of contents --\x3e\r\n       <h2><%= _t(\'rr_toc\') %></h2>\r\n       <div id="tc-list-cont">\r\n           <% if (typeof DocTOC === "undefined" || DocTOC === null || typeof DocTOC.toc === "undefined" || typeof DocTOC.toc.chapters === "undefined" || DocTOC.toc.chapters === null) { %>    \r\n                            <%= _t(\'rr_not_available_title\') %>\r\n              <% } else if (typeof DocTOC !== "undefined" ) { %>\r\n                   <%  var counterLevel1=-1;  _.each(DocTOC.toc.chapters, function(chapterLevel1,index,list) { counterLevel1++; %>\r\n                    <h3 class="tabcon tabcon-level-1 <%= (index === (list.length-1))?\'tabcon-level-1-last\':\'\'%>" >\r\n                        <% if (chapterLevel1.childChapters === true) { %>\r\n                         <a href=\'#\' class=\'no-decor\' class="ga_toc_show_sub_section_button" >\r\n                             <span class="sr-only toggleText">This section is collapsed</span><span divid="div-level-2<%= counterLevel1 %>" class="tabcon-icon icon-panel-open"><svg  focusable=\'false\' width=\'20\' height=\'20\'  ><use xlink:href="#icon-panel-closed"/></svg></span>\r\n                         </a>    \r\n                        <% } %>\r\n                        <a class="ga_toc_chapter_title_link" href="#ppg=<%= chapterLevel1.startPage %>"><%=chapterLevel1.title%></a>   \r\n                      </h3>       \r\n                            <% if ( !_.isUndefined(chapterLevel1.chapters) && !_.isEmpty(chapterLevel1.chapters)) { %>\r\n                                  <div id="div-level-2<%=index%>">\r\n                                       <% var counterLevel2=-1; _.each(chapterLevel1.chapters, function(chapterLevel2,indexTw,listTw) { counterLevel2++; %>\r\n                                            <% if (counterLevel2 === 0) { %>                    \r\n\t                                                 <h4 class="tabcon tabcon-level-2 tabcon-level-2-first">\r\n\t                                          <% } else if (counterLevel2 === chapterLevel1.chapters.length-1) {  %>       \r\n\t                                                      <h4 class="tabcon tabcon-level-2 tabcon-level-2-last">\r\n\t                                                  <% } else { %>\r\n\t                                                      <h4 class="tabcon tabcon-level-2">\r\n\t                                                  <% } %>\r\n                                                      <% if (chapterLevel2.childChapters === true) { %>\r\n                                                               <a href=\'#\' class=\'no-decor\' class="ga_toc_show_sub_section_button" >\r\n                                                                  <span class="sr-only toggleText">This section is collapsed</span><span divid="div-level-3<%= counterLevel1 %><%= counterLevel2 %>"  class="tabcon-icon icon-panel-open"><svg  focusable=\'false\' width=\'20\' height=\'20\' ><use xlink:href="#icon-panel-closed"/></svg></span>\r\n                                                                 </a>           \r\n                                                         <% } %>\r\n                                                               <a  class="ga_toc_chapter_title_link" href="#ppg=<%=chapterLevel2.startPage%>"><%=chapterLevel2.title%></a>\r\n                                                          </h4>\r\n                                                                  <% if (!_.isUndefined(chapterLevel2.chapters) && !_.isEmpty(chapterLevel2.chapters)){ %>\r\n                                                                        <div id="div-level-3<%=indexTw%>">\r\n                                                                                       <% var counterLevel3=-1; _.each(chapterLevel2.chapters, function(chapterLevel3) { counterLevel3++; %>\r\n                                                                                          <% if (counterLevel3 === 0) { %>                    \r\n                                                                                              <h5 class="tabcon tabcon-level-3 tabcon-level-3-first">\r\n                                                                                          <% } else if (counterLevel3 === chapterLevel2.chapters.length-1) { %>       \r\n                                                                                               <h5 class="tabcon tabcon-level-3 tabcon-level-3-last">\r\n                                                                                           <% } else { %>\r\n                                                                                                <h5 class="tabcon tabcon-level-3 ">\r\n                                                                                            <% } %>\r\n                                                                                          \t     <a class="ga_toc_chapter_title_link" href="#ppg=<%=chapterLevel3.startPage%>"><%=chapterLevel3.title%></a>\r\n                                                                                              </h5>           \r\n                                                                                    <% }); %>    \r\n                                                                        </div>\r\n                                                                 <% } %> \x3c!--  Level 3 End --\x3e  \r\n                                       <% }); %>  \x3c!--  Level 2 for each End --\x3e\r\n                                  </div>\r\n                           <% } %> \x3c!--  Level 2 End --\x3e    \r\n                   <% }); %>  \x3c!--  Level 1 for each End --\x3e\r\n           <% } %>  \x3c!--  Level 1 End --\x3e \r\n       </div>\x3c!-- end toc --\x3e\r\n\r\n</div> \x3c!-- end toc-container --\x3e\r\n\t\r\n<\/script> \r\n'},function(t,e){t.exports='<script type="text/template" id="bookResources">\n\n\t<div id="panel-close" aria-hidden="true"><button class="btn-close" id="closePanel"><svg focusable=\'false\' width=\'14\' height=\'14\'  style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></button></div>\n\t\n\t<div id=\'custom-search-container\'>\n\n\t\t<h2><%= _t(\'rr_addResource\') %><span class="sr-only">Section</span></H2>\t\t\n\t\t\n\t\t<% if (typeof cusData === "undefined") { %>\n\t\t    <%= _t(\'rr_problem_custom_search\') %>   \t\t\n\t\t<% } else { %>\n\t\t      <% if (cusData.textSearches.length !== 0) { %>\t\t      \n\t\t         <div id="search-block">\n\t\t\t\t\t <div class="input-group">\n\t\t\t\t\t \t<label class="sr-only" for="cTextSearchId"><%= _t(\'rr_addResourceAria\') %></label>\n\t\t\t\t        <input type="text" id=\'cTextSearchId\' class="form-control" placeholder="<%= _t(\'rr_search_term_here\') %>" >\n\t\t\t\t\t    <span class="input-group-btn">\n\t\t\t\t\t        <button class="btn btn-default btn-search-inline icons-return" type="button"  >\n\t\t\t\t\t           <span><svg focusable=\'false\' width=\'15\' height=\'15\'  style=\'pointer-events:none;\' ><use xlink:href="#icon-return"></use></svg>  </span>\n\t\t\t\t\t           <span class="sr-only"><%= _t(\'rr_addResourceAria\') %></span>\n\t\t\t\t\t        </button>\n\t\t\t\t\t    </span>\n\t\t\t\t\t </div>\n\t\n\t\t\t\t\t <div id=\'search-button\' class="pull-right">\n\t\t\t\t\t\t<button type="button" class="ga_resource_search btn btn-primary"><%= _t(\'rr_search\') %>   </button>\n\t\t\t\t\t </div>\n\t\n\t\t\t\t\t<div id="custom-search-options">\n\t\t\t\t\t    <%_.forEach(cusData.textSearches, function (cSearch, cIndex) {%> \t\t\t\t\t    \t\t\t\t\n\t\t\t\t\t\t  <div class="radio">\n\t\t\t\t\t\t\t  <label>\n\t\t\t\t\t\t\t    <input type=\'radio\' class="ga_text_searches_radios"  name=\'textSearchesRadios\' id=\'textSearches_<%=cIndex%>\' value=\'<%=cIndex%>\' <% if(cIndex === 0) { %> checked <% } %> >\n\t\t\t\t\t\t\t\t    <% var cTextNme = cSearch.textName; \n\t\t\t\t\t\t\t\t        if (cTextNme.length > 50) {\n\t\t\t\t\t\t\t\t           cTextNme = cTextNme.substring(0,50);\n\t\t\t\t\t\t\t\t        }\t\t\t\t\t\t\t    \n\t\t\t\t\t\t\t\t    %>\n\t\t\t\t\t\t\t\t    <%=cTextNme%>\n\t\t\t\t\t\t\t  </label>\n\t\t\t\t\t\t  </div>\t\t\t\t  \n\t\t\t\t\t\t<% }); %>\t\t\n\t\t\t\t\t</div>\x3c!-- end custom-search-options --\x3e\n\t\t\t\t </div>\x3c!-- end search-block --\x3e\n\t\t     <%  } %>\n\t\t     <% if (cusData.bookSearches.length !== 0) { %>\n\t\t        <hr>\n\t\t        <div id="custom-buttons">\n\t\t            <%_.forEach(cusData.bookSearches, function (cSearch, cIndex) {%>\t\n\t\t                <div class="radio">\t\t\n\t\t                    <% var cBookNme = cSearch.textName; \n\t\t\t\t\t\t\t\t        if (cBookNme.length > 50) {\n\t\t\t\t\t\t\t\t           cBookNme = cBookNme.substring(0,50);\n\t\t\t\t\t\t\t\t        }\t\t\t\t\t\t\t    \n\t\t\t\t\t\t\t%>               \n\t\t                              \t              \n\t\t\t                <% if (cSearch.textValue.indexOf("%pisbn%") > -1) { %>\n\t\t\t\t\t\t       <button type="button" id=\'bookSearches_<%=cIndex%>\' class="ga_book_searches_btn btn btn-primary"> <%=cBookNme%></button>\n\t\t\t\t\t\t    <% } else if(cSearch.textValue.indexOf("%eisbn%") > -1) { %>  \n\t\t\t\t\t\t        <button type="button" id=\'bookSearches_<%=cIndex%>\' class="ga_book_searches_btn btn btn-primary"><%=cBookNme%></button>\n\t\t\t\t\t\t    <% } else if(cSearch.textValue.indexOf("%docid%") > -1) { %> \t\t\t\t\t    \n\t\t\t\t\t\t         <button type="button" id=\'bookSearches_<%=cIndex%>\' class="ga_book_searches_btn btn btn-primary"> <%=cBookNme%></button>\n\t\t\t\t\t\t    <% } %> \n\t\t\t\t\t    </div>\n\t\t\t\t\t <% }); %>\t    \n\t\t\t\t</div>\n\t\t     <%  } %>\n\t\t     <% if (cusData.standaloneSearches.length !== 0) { %>\n\t\t         <hr>\n\t\t\t     <div id="custom-links">\n\t\t\t         <%_.forEach(cusData.standaloneSearches, function (cSearch, cIndex) {%>\n\t\t\t          <% var cNme = cSearch.textName; \n\t\t\t\t\t\t\t\t        if (cNme.length > 50) {\n\t\t\t\t\t\t\t\t           cNme = cNme.substring(0,50);\n\t\t\t\t\t\t\t\t        }\t\t\t\t\t\t\t    \n\t\t\t\t\t  %> \n\t\t\t            <div class="radio">\t\t\t            \n\t\t                   <a class=\'ga_book_searches_link\' href=\'<%=cSearch.textValue%>\' target=\'_blank\' ><%=cNme%></a>\n\t\t                </div>\n\t\t\t\t\t <% }); %>\t\n\t\t\t\t </div>\n\t\t     <%  } %>\t\t\t     \t\n\t\t<%  } %>\n\t</div> \n<\/script> \n'},function(t,e){t.exports='<script type="text/template" id="panelBookDetail">\r\n\r\n\t<div id="panel-close">\t\r\n\t    <button class="btn-close icon-close" id="closePanel"> <svg focusable=\'false\' width=\'14\' height=\'14\' ><use xlink:href="#icon-close-lg"/></svg></button>\r\n\t</div>\r\n\t<h3 class="sr-only">Book Details Section</h3>\r\n\t<div id=\'meta-container\'>\r\n\t\t\t<div id="bookMetaOpen">\r\n\t\t\t<% if (typeof BiblioData !== "undefined") { %>\r\n\t\t\t\t<div id=\'closeMetaData\'  class="row">\r\n\t\t\t\t\t<div class="col-xs-1"><span id=\'close-title\' class="icon-panel-close"><svg focusable=\'false\' width=\'20\' height=\'20\'  ><use xlink:href="#icon-panel-opened"/></svg></span></div>\r\n\t\t\t\t\t<div class="col-xs-11 book-title"><%= BiblioData.title !== "undefined"?BiblioData.title: _t(\'rr_na\') %></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\'book-meta-info\' class="row">\r\n\t\t\t\t\t\t<div class="col-xs-4"><div id=\'cover\' width="98px" ><img src="<%=BiblioData.coverURL%>" alt="<%= _t(\'rr_bookCoverImg\') %>"></div></div>\r\n\t\t\t\t\t\t<div class="col-xs-8">\r\n\t\t\t\t\t\t\t<div class="toc-author"><span><%= _t(\'rr_by\') %> </span><% if(typeof BiblioData.contibutors !== "undefined" && !_.isNull(BiblioData.contibutors) ){ var tmpCtbs= (BiblioData.contibutors.slice(0,3)); %><%=tmpCtbs.join()%> <% }else{%> <%=_t(\'rr_na\') %> <% }%></div>\r\n\t\t\t\t\t\t\t<div class="meta-label"><%= _t(\'rr_publisher\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-data"><%= typeof BiblioData.publisher !== "undefined"?BiblioData.publisher:_t(\'rr_na\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-label"><%= _t(\'rr_date\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-data"><%= typeof BiblioData.orgPublishDateFormatted !== "undefined"?BiblioData.orgPublishDateFormatted:_t(\'rr_na\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-more"><a id="book-detail-more" href="detail.action?docID=<%=BiblioData.docID %>" aria-label="<%= _t(\'rr_moreBkDetail\') %>" ><%= _t(\'rr_more\') %></a></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t<% } else {%>\r\n\t\t\t\t\t<div id=\'closeMetaData\'  class="row">\r\n\t\t\t\t\t\t<div class="col-xs-1"><span id=\'close-title\' class="icon-panel-close"><svg focusable=\'false\' width=\'20\' height=\'20\'  ><use xlink:href="#icon-panel-opened"/></svg></span></div>\r\n\t\t\t\t\t\t<div class="col-xs-11 book-title"><%= _t(\'rr_na\') %></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div id=\'book-meta-info\' class="row">\r\n\t\t\t\t\t\t<div class="col-sm-4"><div id=\'cover\' ><img width="98px" src="" alt="<%= _t(\'rr_bookCoverImg\') %>"></div></div>\r\n\t\t\t\t\t\t<div class="col-sm-8">\r\n\t\t\t\t\t\t\t<div class="toc-author"><span><%= _t(\'rr_by\') %> </span> <%= _t(\'rr_na\') %> </div>\r\n\t\t\t\t\t\t\t<div class="meta-label"><%= _t(\'rr_publisher\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-data"><%= _t(\'rr_na\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-label"><%= _t(\'rr_date\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-data"><%= _t(\'rr_na\') %></div>\r\n\t\t\t\t\t\t\t<div class="meta-more"><a id="book-detail-more" href="detail.action?docID=<%=BiblioData.docID%>" aria-label="<%= _t(\'rr_moreBkDetail\') %>" ><%= _t(\'rr_more\') %></a></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t<% } %>\r\n\t\t\t\r\n\t\t</div>\x3c!-- end book-meta-open --\x3e\r\n\r\n\t\r\n\t\r\n\t<div id="bookMetaClosed" style="display:none;">\r\n\t\t<div id=\'openMetaData\' class="row">\r\n\t\t\t<div class="col-xs-1"><span id=\'open-title\' class="icon-panel-open"><svg focusable=\'false\' width=\'20\' height=\'20\'  ><use xlink:href="#icon-panel-closed"/></svg></span></div>\r\n\t\t\t<div class="col-xs-11 book-title-small"><%= BiblioData.title !== "undefined"?BiblioData.title: _t(\'rr_na\') %></div>\r\n\t\t</div>\r\n\t</div>\x3c!-- end book-meta-closed --\x3e\r\n\t\r\n\t<div class="row accArHid" id="meta-tools">\r\n\t\t<div class="col-xs-5">\r\n\t\t\t<% if((DocUser.requestType === \'REQUEST\') ) {%>\r\n\t\t\t\t<button type="button" class="btn btn-primary btn-icon" id="bookDetailDownloadForReqMed">\r\n\t\t\t\t    <span class="icon-request-access icon-in-button"> <svg focusable=\'false\' width=\'15\' height=\'15\' fill=\'white\'  ><use xlink:href="#icon-request-access" /></svg></span>\r\n\t\t\t\t    <span class="button-label">&nbsp; <%= _t(\'rr_downloadForRequest\') %></span>\r\n\t\t\t    </button>\r\n\t\t\t<% } else {%>\r\n\t\t\t \t<button type="button" class="btn btn-primary btn-icon" id="bookDetailDownload">\r\n\t\t\t \t   <span class="icon-download icon-in-button"><svg focusable=\'false\' width=\'15\' height=\'15\' fill=\'white\'    ><use xlink:href="#icon-download" /></svg></span>\r\n\t\t\t \t   <span class="button-label"> &nbsp; <%= _t(\'rr_fd\') %></span>\r\n\t\t\t \t</button>\r\n\t\t\t <% } %> \r\n\t\t</div>\r\n\t\t<div class="col-xs-7 meta-tools-right">\r\n\t\t\t<button class=\'btn btn-default meta-tools-btn ga_book_detail_add_to_bookshelf_btn\' id="bookDetailBookShelf" aria-label="<%= _t(\'rr_add_to_bookshelf\') %>" data-toggle="tooltip" title="<%= _t(\'rr_add_to_bookshelf\') %>" >\r\n\t\t\t    <span class="icon-bookshelf-add ga_book_detail_add_to_bookshelf_btn"><svg focusable=\'false\' width=\'20\' height=\'20\'><use xlink:href="#icon-add-to-bookshelf" /></svg></span>\r\n\t\t\t    <span class="btn-label-hidden"><%= _t(\'rr_add_to_bookshelf\') %></span>\r\n\t\t\t</button>\r\n\t\t\t<button aria-label="<%= _t(\'rr_share_link\') %>"  data-toggle="tooltip" title="<%= _t(\'rr_share_link\') %>" data-target="#shareBookLink" class=\'btn btn-default meta-tools-btn ga_book_detail_book_share_link_btn\' id="bookDetailBooklink" ><span class="icon-link"></span><svg focusable=\'false\' width=\'20\' height=\'20\' ><use xlink:href="#icon-create-link"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_share_link\') %></span></button>\r\n\t\t\t<button aria-label="<%= _t(\'rr_get_citation\') %>" class=\'btn btn-default meta-tools-btn ga_book_detail_get_citation_btn\' id="bookDetailBookCitation" data-toggle="tooltip" title="<%= _t(\'rr_get_citation\') %>" ><span class="icon-book-cite"></span><svg focusable=\'false\' width=\'20\' height=\'20\'  ><use xlink:href="#icon-create-citation"></use></svg><span class="btn-label-hidden"><%= _t(\'rr_get_citation\') %></span></button>\r\n\t\t</div>\r\n\t</div>\x3c!-- end meta tools --\x3e\r\n\r\n\r\n\r\n\r\n\x3c!--\r\n\t<% if((!DocUser.unlimitedCopy && !DocUser.unlimitedPrint) && (DocUser.channelDisabledCopy || DocUser.channelDisabledPrint )) {%>\r\n\t\t<div class="avail-info"><%=DocUser.channelTitleName %> does not allow copy or print</div>\r\n\t<% }\r\n\t else if((!DocUser.unlimitedCopy && !DocUser.unlimitedPrint) && (DocUser.publisherDisbaledCopy || DocUser.publisherDisbaledPrint )) {%>\r\n\t\t<div class="avail-info">Copy and print is not offered for this title</div>\r\n\t<% } else {%> \r\n\t\t\t<% if(DocUser.unlimitedCopy) {%>\r\n\t\t\t\t<div class="avail-info">No copy limit</div>\r\n\t\t\t<% } else {%>\r\n\t\t\t\t<div class="row meta-info">\r\n\t\t\t\t\t<div class="col-xs-1 align-right"><span class="icon-copy meta-icon"><svg focusable=\'false\' width=\'20\' height=\'20\'    ><use xlink:href="#icon-copy" /></svg></span></div>\r\n\t\t\t\t\t<div class="col-xs-1"><span class="label meta-label-num" id="remaining_Copy"><%= DocUser.remainingCopyCount %></span></div>\r\n\t\t\t\t\t<div class="col-xs-10">pages to copy <span class="screen">(of <%= DocUser.totalCopyLimit %>)</span></div>\r\n\t\t\t\t</div> end row \r\n\t\t\t<% } %>\r\n\t\t\t<% if(DocUser.unlimitedPrint) {%>\r\n\t\t\t\t<div class="avail-info">No print limit</div>\r\n\t\t\t<% } else {%>\r\n\t\t\t\t<div class="row meta-info">\r\n\t\t\t\t\t<div class="col-xs-1 align-right"><span class="icon-print meta-icon"></span></div>\r\n\t\t\t\t\t<div class="col-xs-1"><span class="label meta-label-num" id="remaining_Print"><%= DocUser.remainingPrintCount %></span></div>\r\n\t\t\t\t\t<div class="col-xs-10">pages to print <span class="screen">(of <%= DocUser.totalPrintLimit %>)</span></div>\r\n\t\t\t\t</div>\r\n\t\t\t<% } %>\r\n\t<% } %>\r\n--\x3e\r\n\r\n\t<% if((DocUser.requestType === \'REQUEST\') || (DocUser.requestType === \'PENDING\')) {%>\r\n\t\t<% if(DocUser.requestType === \'REQUEST\') {%>\r\n\t\t\t<H3 class="accArHid" ><%= _t(\'rr_loan_allowances\') %> \r\n\t\t\t   <span class="icon-help pull-right" data-toggle="tooltip" title="<%= _t(\'rr_loan_info_tip\') %>"><svg focusable=\'false\' width=\'15\' height=\'15\'  ><use xlink:href="#icon-help" /></svg></span>\r\n\t\t\t</H3>\r\n\t\t\t<div class="avail-info accArHid"><%= _t(\'rr_loan_info_on_request\', {ABKMID: \'reqForMediation\' }) %></div>\r\n       <% } %>\r\n\t\t<H3 class="accArHid" ><%= _t(\'rr_online_allowances\') %> <span class="icon-help pull-right" data-toggle="tooltip" title="<%= _t(\'rr_no_pages_cp_determine\') %>"><svg focusable=\'false\' width=\'15\' height=\'15\' ><use xlink:href="#icon-help" /></svg></span></H3>\r\n\t\t<div class="avail-info accArHid"><%= _t(\'rr_copy_print_on_request\') %></div>\r\n    <% } else if (DocUser.readingMode == \'BROWSE\' && DocUser.requestType == \'NO_REQUEST\') { %>\t\t\r\n\t\t<H3 class="accArHid" ><%= _t(\'rr_loan_allowances\') %> <span class="icon-help pull-right" data-toggle="tooltip" title="<%= _t(\'rr_loan_info_tip\') %>"><svg focusable=\'false\' width=\'15\' height=\'15\'  ><use xlink:href="#icon-help" /></svg></span></H3>\r\n\t\t<div class="avail-info accArHid"><%= _t(\'rr_browse_only\') %></div>\r\n\t\t<H3 class="accArHid" ><%= _t(\'rr_online_allowances\') %> <span class="icon-help pull-right" data-toggle="tooltip" title="<%= _t(\'rr_no_pages_cp_determine\') %>"><svg focusable=\'false\' width=\'15\' height=\'15\'  ><use xlink:href="#icon-help" /></svg></span></H3>\r\n\t\t<div class="avail-info accArHid"><%= _t(\'rr_copy_print_not_allowed\') %></div>\t\t\r\n\t<% } else { %>\r\n\t\t\t\t<% if((!DocUser.unlimitedCopy) && (DocUser.channelDisabledCopy ) && (!DocUser.unlimitedPrint) && (DocUser.channelDisabledPrint ) ) {%>\r\n\t\t\t\t\t\x3c!--<div class="avail-info"><%=DocUser.channelTitleName %> does not allow copy or print</div>--\x3e\r\n\t\t\t\t<% } else {%>\r\n\t\t\t\t\t\t\t<% if((DocUser.readingMode === \'EXPIRING\') && (!DocUser.drmFree)  ) {%>\r\n\t\t\t\t\t\t\t\t<H3 class="accArHid" ><%= _t(\'rr_loan_allowances\') %> <span class="icon-help pull-right" data-toggle="tooltip" title="<%= _t(\'rr_loan_info_tip\') %>"><svg focusable=\'false\' width=\'15\' height=\'15\'  ><use xlink:href="#icon-help" /></svg></span></H3>\r\n\t\t\t\t\t\t\t\t<div class="row meta-info accArHid">\r\n\t\t\t\t\t\t\t\t    <div class="col-xs-10"><%= _t(\'rr_loan_expiry\', {LD:DocUser.loanDays , LH:DocUser.loanHours }) %></div>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t</div>\x3c!-- end row --\x3e\r\n\t\t\t\t\t\t\t<% } else if((DocUser.readingMode === \'BROWSE\' && DocUser.requestType === \'NA\') ){%>\r\n\t\t\t\t\t\t\t\t<H3 class="accArHid" ><%= _t(\'rr_loan_allowances\') %> <span class="icon-help pull-right" data-toggle="tooltip" title="<%= _t(\'rr_loan_info_tip\') %>"><svg focusable=\'false\' width=\'15\' height=\'15\'  ><use xlink:href="#icon-help" /></svg></span></H3>\r\n\t\t\t\t\t\t\t\t<div class="avail-info accArHid"><%= _t(\'rr_loan_info_not_avail\') %></div>\r\n\t\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t\t\t<H3 class="accArHid" ><%= _t(\'rr_online_allowances\') %> <span class="icon-help pull-right" data-toggle="tooltip" title="<%= _t(\'rr_no_pages_cp_determine\') %>"><svg focusable=\'false\' width=\'15\' height=\'15\'  ><use xlink:href="#icon-help" /></svg></span></H3>\r\n\t\t\t\t\t\t\t<%  if((!DocUser.unlimitedCopy) && (DocUser.publisherDisbaledCopy )) {%>\r\n\t\t\t\t\t\t\t\t<div class="avail-info accArHid"><%= _t(\'rr_copy_not_offered\') %></div>\r\n\t\t\t\t\t\t\t<% } else {%> \r\n\t\t\t\t\t\t\t\t\t<% if(DocUser.unlimitedCopy) {%>\r\n\t\t\t\t\t\t\t\t\t\t<div class="avail-info accArHid"><%= _t(\'rr_pages_remain_to_copy\') %></div>\r\n\t\t\t\t\t\t\t\t\t<% } else {%>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class="row meta-info accArHid">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-xs-1 align-right"><span class="icon-copy meta-icon"> <svg focusable=\'false\' width=\'20\' height=\'20\'   ><use xlink:href="#icon-copy" /></svg></span></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-xs-1"><span class="label meta-label-num" id="remainingCopy"><%= DocUser.remainingCopyCount %></span></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-xs-10"><%= _t(\'rr_pages_to_copy\') %> <span class="screen">(<%= _t(\'rr_page_of\') %> <%= DocUser.totalCopyLimit %>)</span></div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\x3c!-- end row --\x3e\r\n\t\t\t\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<% if((!DocUser.unlimitedPrint) && (DocUser.publisherDisbaledPrint )) {%>\r\n\t\t\t\t\t\t\t\t<div class="avail-info accArHid"><%= _t(\'rr_print_not_offered\') %></div>\r\n\t\t\t\t\t\t\t<% } else {%> \r\n\t\t\t\t\t\t\t\t\t<% if(DocUser.unlimitedPrint) {%>\r\n\t\t\t\t\t\t\t\t\t\t<div class="avail-info accArHid"><%= _t(\'rr_pages_remain_to_print\') %></div>\r\n\t\t\t\t\t\t\t\t\t<% } else {%>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class="row meta-info accArHid">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-xs-1 align-right"><span class="icon-print meta-icon"><svg focusable=\'false\' width=\'20\' height=\'20\'   ><use xlink:href="#icon-print" /></span></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-xs-1"><span class="label meta-label-num" id="remainingPrint"><%= DocUser.remainingPrintCount %></span></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-xs-10"><%= _t(\'rr_pages_to_print\') %> <span class="screen">(<%= _t(\'rr_page_of\') %>  <%= DocUser.totalPrintLimit %>)</span></div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\x3c!-- end row --\x3e\r\n\t\t\t\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t <% } %>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t<% if(DocUser.channelType === "title_list"  ) {%>\r\n\t\t\t\t\t\x3c!--<div class="avail-info"><%=DocUser.channelTitleName %> does not allow Download</div>--\x3e\r\n\t\t\t\t<% } else {%>\r\n\t\t\t\t\t\t<H3><%= _t(\'rr_download_allowances\') %> <span class="icon-help pull-right" data-toggle="tooltip" title="<%= _t(\'rr_no_pages_cp_download_determine\') %>"><svg focusable=\'false\' width=\'15\' height=\'15\'  ><use xlink:href="#icon-help" /></svg></span></H3>\r\n\t\t\t\t\t\t\t\t<% if(DocUser.channelDisabledDownload) {%>\r\n\t\t\t\t\t\t\t\t\t\t<div class="avail-info"><%= _t(\'rr_fd_not_offered\') %></div>\t\t\t\r\n\t\t\t\t\t\t\t\t<% } else if(DocUser.contentProviderDisabledDownload) {%>\r\n\t\t\t\t\t\t\t\t\t\t<div class="avail-info"><%= _t(\'rr_fd_not_offered\') %></div>\r\n\t\t\t\t\t\t\t\t<% } else if(DocUser.patronExceededDownloadLimit) {%>\r\n\t\t\t\t\t\t\t\t\t<div class="avail-info"><%= _t(\'rr_exceeded_limit\', {dlLimit: DocUser.patronDownloadLimit}) %></div>\r\n\t\t\t\t\t\t\t\t<% } else if(DocUser.availableForDownload) {%>\r\n\t\t\t\t\t\t\t\t\t<% if(!DocUser.drmFree) {%>\r\n\t\t\t\t\t\t\t\t        <div class="avail-info">\r\n\t\t\t\t\t\t\t\t\t        <% if(DocUser.activeDownload) {%>\r\n\t\t\t\t\t\t\t\t\t             <%= _t(\'rr_fd_expires\', {DD: DocUser.downloadDays, DH: DocUser.downloadHours}) %>\t\t\t\t\t\t\t\t\t             \t\t\t             \r\n\t\t\t\t\t\t\t\t\t        <% } else { %>\r\n\t\t\t\t\t\t\t\t\t            <% if(DocUser.downloadDays === 0 && DocUser.downloadHours === 0) {%>\r\n\t\t\t\t\t\t\t\t\t               <%= _t(\'rr_book_available_d\', {bkAvail: DocUser.availableDownloadCheckoutDays}) %>\t\t\t\t\t\t\t\t\t              \r\n\t\t\t\t\t\t\t\t\t             <% } else { %>\r\n\t\t\t\t\t\t\t\t\t                 <%= _t(\'rr_loan_expiry\', {LD:DocUser.loanDays , LH:DocUser.loanHours }) %>\r\n\t\t\t\t\t\t\t\t\t             <% } %>     \r\n\t\t\t\t\t\t\t\t\t        <% } %>\r\n\t\t\t\t\t\t\t\t       </div>\r\n\t\t\t\t\t\t\t\t       <%}%>\t\r\n\t\t\t\t\t\t\t\t       \x3c!--\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<% if(DocUser.remainingCopyDownload>=9000) {%>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class="avail-info"><%= _t(\'rr_pages_remain_to_copy\') %></div>\r\n\t\t\t\t\t\t\t\t\t\t<% } else {%>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="row meta-info">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-xs-1 align-right"><span class="icon-copy meta-icon">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   <svg focusable=\'false\' width=\'20\' height=\'20\'    ><use xlink:href="#icon-copy" /></svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-xs-1"><span class="label meta-label-num meta-label-disabled"><%= DocUser.remainingCopyDownload %></span></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-xs-10"> <%= _t(\'rr_total_pages_copy\') %></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t\t\t\t\t\t<% if(DocUser.remainingPrintDownload>=9000) {%>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class="avail-info"><%= _t(\'rr_pages_remain_to_print\') %></div>\r\n\t\t\t\t\t\t\t\t\t\t<% } else {%>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="row meta-info">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-xs-1 align-right"><span class="icon-print meta-icon"><svg focusable=\'false\' width=\'20\' height=\'20\'   ><use xlink:href="#icon-print" /></svg></span></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-xs-1"><span class="label meta-label-num meta-label-disabled"><%= DocUser.remainingPrintDownload %></span></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-xs-10"> <%= _t(\'rr_total_pages_print\') %></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t\t\t\t\t\t--\x3e\r\n\t\t\t\t\t\t\t\t\t\t<div class="meta-help">\r\n\t\t\t\t\t\t\t\t\t\t\t<%= _t(\'rr_d_allowances\') %>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<% } else {%>\r\n\t\t\t\t\t\t\t\t\t<div class="avail-info"><%= _t(\'rr_not_available_fd\') %></div>\r\n\t\t\t\t\t\t\t    <% } %>\r\n\t\t\t\t\t\t\t    <% if (DocUser.readable && !DocUser.availableForDownload && !DocUser.previewMode && !DocUser.channelDisabledPrint && !DocUser.publisherDisbaledPrint) {%>\r\n\t\t\t\t\t\t\t\t\t<div class="avail-info"><%= _t(\'rr_print_chapters_PDF\') %></div>\r\n\t\t\t\t\t\t\t    <% } %>\r\n\t\t\t\t\t <% } %>\r\n\t<% } %>\t\t\t\t\t \r\n  </div> \x3c!-- end meta-container --\x3e\r\n<\/script> \r\n'},function(t,e){t.exports='<script type="text/template" id="panelBookDetail">\r\n\r\n<% if(data.annotType ===\'link\' && data.bookMark ) {%>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div  role="link" class="col-xs-1 annotation-type annotation-color-bookmark" >\r\n\t\t\t\t    <span class="icon-annotation icon-bookmark">\r\n\t\t\t\t        <svg focusable=\'false\' width=\'18\' height=\'18\'  style=\'pointer-events:none;\'  >\t<use xlink:href="#icon-bookmark" /></svg>\r\n\t\t\t\t        <span class="sr-only"><%= _t(\'rr_annotBmk\') %></span>\r\n\t\t\t\t    </span>\r\n\t\t\t\t    </div>\r\n\t\t\t\t<div class="col-xs-11 annotation-entry">\r\n\t\t\t\t    <button id="annotTrash_<%= data.annotID%>" class="annotation-delete icon-trash pull-right">\r\n\t\t\t\t       <svg focusable=\'false\' width="15" height="15"  style=\'pointer-events:none;\' ><use xlink:href="#icon-trash"/></svg>\r\n\t\t\t\t       <span class="sr-only"><%= _t(\'rr_annotDelBmk\') %></span>\r\n\t\t\t\t    </button>\r\n\t\t\t\t\t<div role="link">\r\n\t\t\t\t\t\t<div  class="annotation-page"><a href=\'#\' class=\'no-decor-color\'><%= _t(\'rr_lpnPage\', {LPN: data.logicalPage}) %></a></div>\r\n\t\t\t\t\t\t<div  class="annotation-content"><a href=\'#\' class=\'no-decor-color\'><%- data.labelText.replace(\'BookMark:\',\'\')%></a></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n<% } else if(data.annotType ===\'hilite\' ) {%>\r\n\t\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div role="link" class="col-xs-1 annotation-type annotation-color-<%= data.tint%>">\r\n\t\t\t\t   <span class="icon-annotation icon-highlight">\r\n\t\t\t\t     <svg focusable=\'false\' width=\'18\' height=\'18\'  style=\'pointer-events:none;\'  >\t<use xlink:href="#icon-highlight" /></svg>\r\n\t\t\t\t     <span class="sr-only"><%= _t(\'rr_annotHlt\') %></span>\r\n\t\t\t\t   </span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="col-xs-11 annotation-entry">\r\n\t\t\t\t    <button id="annotTrash_<%= data.annotID%>" class="ga_annot_delete annotation-delete icon-trash pull-right">\r\n\t\t\t\t         <svg focusable=\'false\' width="15" height="15"  style=\'pointer-events:none;\' ><use xlink:href="#icon-trash"/></svg>\r\n\t\t\t\t         <span class="sr-only"><%= _t(\'rr_annotDelHlt\') %></span>\r\n\t\t\t\t    </button>\r\n\t\t\t\t\t<div role="link">\r\n\t\t\t\t\t\t<div  class="annotation-page"><a href=\'#\' class=\'no-decor-color\'><%= _t(\'rr_lpnPage\', {LPN: data.logicalPage}) %></a></div>\r\n\t\t\t\t\t\t<div class="annotation-content"><a href=\'#\' class=\'no-decor-color\'><%- data.labelText%></a></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n<% } else if(data.annotType ===\'sticky\' ) {%>\r\n\t\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div role="link" class="col-xs-1 annotation-type annotation-color-<%= data.tint%>">\r\n\t\t\t\t <span class="icon-annotation icon-note">\r\n\t\t\t\t    <svg focusable=\'false\' width=\'18\' height=\'18\'  style=\'pointer-events:none;\'  >\t<use xlink:href="#icon-note"/></svg>\r\n\t\t\t\t    <span class="sr-only"><%= _t(\'rr_annotNt\') %> </span>\r\n\t\t\t\t </span>\r\n\t\t\t    </div>\r\n\t\t\t\t<div class="col-xs-11 annotation-entry">\r\n\t\t\t\t   <button id="annotTrash_<%= data.annotID%>" class="ga_annot_delete annotation-delete icon-trash pull-right">\r\n\t\t\t\t       <svg focusable=\'false\' width="15" height="15"  style=\'pointer-events:none;\' ><use xlink:href="#icon-trash"/>\t</svg>\r\n\t\t\t\t       <span class="sr-only"><%= _t(\'rr_annotDelNt\') %></span>\r\n\t\t\t\t   </button>\r\n\t\t\t\t\t<div role="link">\r\n\t\t\t\t\t\t<div  class="annotation-page"><a href=\'#\' class=\'no-decor-color\'><%= _t(\'rr_lpnPage\', {LPN: data.logicalPage}) %></a></div>\r\n\t\t\t\t\t\t<div class="annotation-content"><a href=\'#\' class=\'no-decor-color\'><%- data.labelText%></a></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n<% } else if(data.annotType ===\'link\' ) {%>\r\n\t\r\n\t\t\t<div role="link" class="row">\r\n\t\t\t\t<div class="col-xs-1 annotation-type annotation-color-yellow">\r\n\t\t\t\t    <span class="icon-annotation icon-note">\r\n\t\t\t\t      <svg focusable=\'false\' width=\'18\' height=\'18\'  >\t<use xlink:href="#icon-note" /></svg>\r\n\t\t\t\t      <span class="sr-only"><%= _t(\'rr_annotLnk\') %></span>\r\n\t\t\t\t    </span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="col-xs-11 annotation-entry">\r\n\t\t\t\t    <button id="annotTrash_<%= data.annotID%>" class="ga_annot_delete annotation-delete icon-trash pull-right">\r\n\t\t\t\t       <svg focusable=\'false\' width="15" height="15"><use xlink:href="#icon-trash"/>\t</svg>\r\n\t\t\t\t       <span class="sr-only"><%= _t(\'rr_annotDelLnk\') %></span>\r\n\t\t\t\t    </button>\r\n\t\t\t\t\t<div role="link">\r\n\t\t\t\t\t\t<div  class="annotation-page"><a href=\'#\' class=\'no-decor-color\'><%= _t(\'rr_lpnPage\', {LPN: data.logicalPage}) %></a></div>\r\n\t\t\t\t\t\t<div class="annotation-content"><a href=\'#\' class=\'no-decor-color\'><%- data.labelText%></a></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n<% }%>\t\r\n\r\n\t\r\n<\/script> \r\n'},function(t,e){t.exports='<script type="text/template" id="panel">\n\t\t\n\t\t<div id="panel-close" aria-hidden="true"><button class="btn-close" id="closePanel"><svg focusable=\'false\' width=\'14\' height=\'14\'  style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></button></div>\n\t\t\n\t\t<div id=\'annotations-container\'>\n\t\t\t<h2><%= _t(\'rr_annotations\') %><span class="sr-only">Section</span></H2>\n\t\t\t<div id=\'annotation-book-title\' class="book-title"><%= BiblioData.title !== "undefined"?BiblioData.title:_t(\'rr_na\')%></div>\n\t\t\t\n\t\t\t<div id="annotations-export" class="hide" aria-hidden="true">\n\t\t\t\t<button id=\'annotations-export-button\' type="button" class="btn btn-sm">\n\t\t\t\t      <span class="icon-bookshelf-export ex-icon"></span><span class="button-label"> Export Notes</span></button>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="clearfix"></div>\n\t\t\t<div id="annotations-list-container" class=\'\'>\n\t\t\t\t\t<span class="sr-only">To read annotations you have made within a chapter, please use list commands for your screen reader.</span>\n\t\t\t\t\t<ul id="notesBookResults" class="list-unstyled">\n\t\t\t\t\t</ul>\n\t\t\t</div>\n\t\n\t\t</div>\t\x3c!-- end annotations container --\x3e\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="mainPageContainer" >\n\n\t\t<% if (typeof tmpUser !== "undefined" && !tmpUser.signedIn) { %>\n\t\t\t\x3c!-- if there are no annotations --\x3e\n\t\t\t<div id="annotations-empty-outer">\n\t\t\t\t<div id="annotations-empty-inner">\n\t\t\t\t\t<div class="icon-annotations-empty icon-annotations"><svg focusable=\'false\' width=\'80\' height=\'80\'  style=\'pointer-events:none;\' ><use xlink:href="#icon-annotations"/></svg></div>\n\t\t\t\t\t<div id="annotations-empty-header"><%= _t(\'rr_pls_signin\') %></div>\n\t\t\t\t\t<div id="annotations-empty-text"><%= _t(\'rr_bmarks_notes_highlight\') %></div>\n\t\t\t\t\t<p> </p>\n\t\t\t\t\t<div><button id="signInNoteButton" class="btn btn-primary btn-lg"> <%= _t(\'rr_sign_in\') %> </button></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\x3c!-- end empty --\x3e\n\t\t<% } else {%>\n\t\t\t\t\x3c!-- if there are no annotations --\x3e\n\t\t\t\t<div id="annotations-empty-outer">\n\t\t\t\t\t<div id="annotations-empty-inner">\n\t\t\t\t\t\t<div class="icon-annotations-empty icon-annotations"><svg focusable=\'false\' width=\'80\' height=\'80\'  style=\'pointer-events:none;\' ><use xlink:href="#icon-annotations"/></svg></div>\n\t\t\t\t\t\t<div id="annotations-empty-header"><%= _t(\'rr_no_annotations\') %></div>\n\t\t\t\t\t\t<div id="annotations-empty-text"><%= _t(\'rr_bmarks_notes_highlight\') %></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- end empty --\x3e\n\t\t<% } %>\t\t\n\t\t\n\n\t\t\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="panel">\n\n\t\n\t\t\t<div class="row annotation-chapter" id="chapterNotesSelection_<%=data.chapterId %>" >\n\t\t\t\t<% if(data.annotCount >0 ) {%>\n\t\t\t\t\t<div class="col-xs-1"><a href=\'#\' class=\'no-decor\'><span class="sr-only toggleText">This section is collapsed</span><span class="icon-panel-open"><svg focusable=\'false\' width=\'20\' height=\'20\'  style=\'pointer-events:none;\' ><use xlink:href="#icon-panel-closed"/></svg></span></a> </div>\n\t\t\t\t\t<div class="col-xs-9"  aria-label="<%= data.chapterName %>" ><%= data.chapterName %></div>\n\t\t\t\t\t<div class="col-xs-2"><div id="annotCount_<%=data.chapterId %>" class="label annotCount"  aria-label="<%= _t(\'rr_annotInChap\', {ANNOTCNT: data.annotCount,CHAPNM:data.chapterName}) %>" ><%= data.annotCount%></div></div>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<div class="col-xs-1"></div>\n\t\t\t\t\t<div class="col-xs-9" aria-label="<%= data.chapterName %>" id="noNotesHits_<%=data.chapterId%>" ><%= data.chapterName %></div>\n\t\t\t\t\t<div class="col-xs-2"><div class="label"></div></div>\n\t\t\t\t<% }%>\n\t\t\t\t\n\t\t\t</div>\n\t\t\t<div  class="annotation-list">\n\t\t\t\t<ul id="notesLevelSnips_<%=cptInd %>" class="list-unstyled">\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\n<\/script>\n\n'},function(t,e){t.exports='<script type="text/template" id="panel">\n\t\t\t\n\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-xs-1 annotation-type annotation-color-bookmark"><span class="icon-annotation icon-bookmark"></span></div>\n\t\t\t\t\t\t\t<div class="col-xs-11 annotation-entry annotation-entry-first"><button class="annotation-delete icon-trash pull-right"></button>\n\t\t\t\t\t\t\t<div class="annotation-page"><%= _t(\'rr_page_10\') %></div>\n\t\t\t\t\t\t\t<div class="annotation-content"><%= _t(\'rr_incipient_species\') %></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t\n\t\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="panel">\n\t\t\n\t\t<div class="pull-right"><button id=\'closePanel\' class=\'pull-right btn-close icon-close\'><svg focusable=\'false\' width=\'14\' height=\'14\' style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></button></div>\n\t\t\x3c!-- <div class="panel-title clearfix">CONTENTS</div> --\x3e\n\t\t<div id=\'search-container\'>\n\t\t\n\t\t\t\x3c!-- /////// SEARCH TITLE /////// --\x3e\n\t\t\t<H2><%= _t(\'rr_search\') %></H2>\n\t\t\t<div class="book-title"><%= _t(\'rr_origin_of_species\') %></div>\n\t\t\t\x3c!-- /////// END SEARCH TITLE /////// --\x3e\n\t\n\t\t\t<div id="search-block">\n\t\t\t\t<div id="help-block" class="help-block"></div>\n\t\t\t\t<div class="input-group">\n\t\t\t\t<label class="sr-only" for="usersearchInBookTerm"><%= _t(\'rr_search_in_bookAria\') %></label>\n\t\t\t    <input type="text" id="usersearchInBookTerm" class="form-control" placeholder="<%= _t(\'rr_search_in_book\') %>">\n\t\t\t\t    \x3c!-- <span class="input-group-btn">\n\t\t\t\t        <button class="btn btn-default btn-search-inline icons-close" type="button"></button>\n\t\t\t\t    </span> --\x3e\n\t\t\t\t    <span class="input-group-btn">\n\t\t\t\t        <button class="ga_search_btn btn btn-default btn-search-inline icons-return" type="button">\n\t\t\t\t           <svg focusable=\'false\' width=\'15\' height=\'15\' style=\'pointer-events:none;\' ><use xlink:href="#icon-return"></use></svg>\n\t\t\t\t        </button>\n\t\t\t\t    </span>\n\t\t\t\t</div>\n\t\n\t\t\t\t<div id=\'search-button\' class="pull-right">\n\t\t\t\t\t<button type="button" class="ga_search_btn btn btn-primary"><%= _t(\'rr_search\') %></button>\n\t\t\t\t</div>\n\t\t\t</div>\x3c!-- end search-block --\x3e\n\n\n\t</div>\t\x3c!-- end search container --\x3e\n<\/script>'},function(t,e){t.exports="<script type=\"text/template\" id=\"main-b\">\n\t\t<div id='mainPageContainer' >\n\t\t\t<button id='searchStart'><%= _t('rr_search_start') %></button> \n\t\t\t<button id='showResults'><%= _t('rr_search_rst_chapter') %></button> \n\t\t\t<button id='showResultsPage'><%= _t('rr_search_rst_page') %></button> \n\t\t\t<button id='show-did-you-mean'><%= _t('rr_did_mean') %></button>\n\t\t\t<button id='toggleHeader'><%= _t('rr_toggle_header') %></button><br />\n\t\t\t<img src='img/render-cover.png' /><br />\n\t\t\t<img src='img/render1.png' /><br />\n\t\t\t<img src='img/render2.png' /><br />\n\t\t\t<img src='img/render3.png' /><br />\n\t\t\t<img src='img/render4.png' /><br />\n\t\t</div>\n<\/script>\n"},function(t,e){t.exports='<script type="text/template" id="compositeWrapper">\n\t<div id="mainViewerPagesContainerWrapper">\n\t\t<div id="mainViewerPagesContainer">\n\t \t\t\n        </div>        \n        \x3c!-- contextual menu definition --\x3e\n\t\t<div id="contextMenuPop" class=\'hide\'>\n\t\t\t<button id="contextCopy" class="icon-copy"><svg focusable=\'false\' width="20" height="20"  ><use xlink:href="#icon-copy"/></svg></button>\n\t\t\t<button id="contextHighlightYellow" class="icon-highlight highlight-yellow"><svg focusable=\'false\' width=\'20\' height=\'20\'  >\t<use xlink:href="#icon-create-highlight"></use>\t</svg></button>\n\t\t\t<button id="contextHighlightBlue" class="icon-highlight  highlight-blue"><svg focusable=\'false\' width=\'20\' height=\'20\'  > <use xlink:href="#icon-create-highlight"></use></svg></button>\n\t\t\t<button id="contextHighlightPink" class="icon-highlight  highlight-pink"><svg focusable=\'false\' width=\'20\' height=\'20\'  > <use xlink:href="#icon-create-highlight"></use></svg></button>\n\t\t\t<button id="contextNote" class="icon-note"><svg focusable=\'false\' width=\'20\' height=\'20\'  > <use xlink:href="#icon-create-note"></use> </svg></button>\n\t\t    <button id="contextCustomSearch" class="icon-extra-resources"><svg focusable=\'false\' width=\'20\' height=\'20\'  ><use xlink:href="#icon-resources"></use></svg></button>\n\t\t</div>\t\t\t\n\t\t<div id="myNotePopId" class=\'hide\'>\t\t         \n\t\t\t\t<div class="note-heading">\n\t\t\t\t\t<button id="noteTextdelete" class="icon-trash">\n\t\t\t\t\t    <svg focusable=\'false\' width="15" height="15" fill=\'white\'><use xlink:href="#icon-trash"/></svg>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button id="noteTextclose" class="icon-close-lg">\n\t\t\t\t\t    <svg focusable=\'false\' width="15" height="15" fill=\'white\'><use xlink:href="#icon-close-lg"/></svg> \n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="note-body">\n\t\t\t\t\t<textarea name="note-content" id="note-content" rows="10"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<div class="note-footer">\n\t\t\t\t\t<button id=\'noteTextCancel\' class="btn btn-default"><%= _t(\'rr_cancel\') %></button>\n\t\t\t\t\t<button id=\'noteTextSave\' class="btn btn-primary"><%= _t(\'rr_save\') %></button>\n\t\t\t\t</div>\n\t\t\t\t<div class="note-resize">\n\t\t\t\t\t<div id="noteResizeId" class="icon-resize note-resize-handle"><svg focusable=\'false\' width="15" height="15" fill="#b3b3b3"><use xlink:href="#icon-resize"/></svg></div>\n\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\n\t\t</div>\n\t\t\t\n\t\t<div id="myNoteIconId" class=\'hide\'>\t\t         \n\t\t\t\t<span class="note-collapsed-bg icon-note-bg"><svg focusable=\'false\' width=\'35\' height=\'35\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-note-bg"/></svg></span>\n\t\t\t\t<span class="note-collapsed-front icon-note"><svg focusable=\'false\' width=\'35\' height=\'35\' fill=\'#ffbc0b\'  style=\'pointer-events:none;\'  ><use xlink:href="#icon-note"/></svg></span>\t\t\t\t\n\t\t</div>\n\t\t\t\n   </div>\n        \n        \n \n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="mainPageContainer" >\n\n  \t\t\t<div class="spinner-wrapper" aria-label="Loading">\n  \t\t\t\t<br/>\n    \t\t    <div class="spinner"></div>\n  \t\t\t</div>\n\t\t\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="mainPageContainer" >\n\n\t<% if(typeof(status) !== "undefined" && status !== "FAILURE") {%>\n\t\t\t<% if(typeof(page) != "undefined") {%>\n\t\t\t<div id="mainViewerImgCloakWrapper_<%=pageNum%>" class= "mainViewerImgContainer ga_page_viewer">\n\t\t\t\t<div name="actualImgContent" style="height:<%=page.height  %>px;width:<%=page.width %>px; margin-left: auto; margin-right: auto;">\n\t\t\t\t\t<img  src=\'docImage.action?encrypted=<%= page.parts[0] %>\' height="<%=page.height%>px" width="<%=page.width%>px"  class="mainViewerImg" />\n\t\t\t\t\t<canvas id="mainViewerImgCloak_<%=pageNum%>" height="<%=page.height%>px" width="<%=page.width%>px" class="mainViewerImgCloak"></canvas>\n\t\t\t\t\t<canvas id="mainViewerSearchCloak_<%=pageNum%>" height="<%=page.height%>px" width="<%=page.width%>px" class="mainViewerSearchCloak"></canvas>\n\t\t\t\t\t<canvas id="mainViewerAnnotCloak_<%=pageNum%>" height="<%=page.height%>px" width="<%=page.width%>px" class="mainViewerAnnotCloak"></canvas>\n\t\t\t\t\t<% if(bookMarked()) {%>\n\t\t\t\t\t     <span id="mainViewerBookMark_<%=pageNum%>" class="bookmark bookmark-on ga_bookmark" style="left:<%= page.width-60 %>px;" >\n\t\t\t\t\t          <svg focusable=\'false\' width=\'70\' height=\'70\' style="pointer-events:none;" ><use xlink:href="#bookmark-on"></use></svg>\n\t\t\t\t\t     </span>\n\t\t\t\t   <% } else { %>\n\t\t\t\t\t     <span id="mainViewerBookMark_<%=pageNum%>" class="bookmark ga_bookmark" style="left:<%= page.width-60 %>px;" >\n\t\t\t\t\t         <svg focusable=\'false\' width=\'70\' height=\'70\' style="pointer-events:none;" ><use xlink:href="#bookmark-off"></use></svg>\n\t\t\t\t\t     </span>\n\t\t\t\t   <% } %>\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div><br/>\n\t\t\t<% } else { %>\n\t\t\t\t<div id="mainViewerImgCloakWrapper_<%=pageNum%>" class= "mainViewerImgContainer ga_page_viewer">\n\t\t\t\t<div style="background:white;height:<%=ht%>px;width:<%=wd%>px; margin-left: auto; margin-right: auto;  border: 1px solid #B3B3B3;">\n\t\t\t\t\t<br/>\n\t\t\t\t\t<%  if(typeof(errorCode) !== "undefined" && (errorCode === "SESSION_TIMED_OUT" || errorCode === "SESSION_TIMEDOUT") ) {%>\n\t\t\t\t\t\t<h2 style="text-align:center;">&nbsp;<i><%= _t(\'rr_session_timed_out_refresh\') %></i></h2>\n\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t<h2>&nbsp;<i> <%= _t(\'rr_loading\') %></i></h2>\n\t\t\t\t\t<% } %>\n\t\t\t\t</div>\n\t\t\t\t</div><br/>\n\t\t\t<% } %>\n\t<% } %>\n\t<% if(typeof(status) !== "undefined" && status === "FAILURE") {%>\n\t\t\t<div id="mainViewerImgCloakWrapper_<%=pageNum%>" class= "mainViewerImgContainer ga_page_viewer">\n\t\t\t\t<div style="background:white;height:<%=ht%>px;width:<%=wd%>px; margin-left: auto; margin-right: auto;  border: 1px solid #B3B3B3;">\n\t\t\t\t\t<br/>\n\t\t\t\t\t<h3 style="text-align:center;padding-left:30px;padding-right:30px;">&nbsp;<i> <%= wrapDashErrorMessage() %></i></h3>\n\t\t\t\t</div>\n\t\t\t\t</div><br/>\n\t<% } %>\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="readerTextTemp">\n\n\n\t\t<div id="access-container" tabindex="0" aria-live="polite" >\n\t\t<% if(typeof(status) !== "undefined" && status !== "FAILURE") {%>\n\t\t\t\n\t\t\t<%  if(typeof(errorCode) !== "undefined" && (errorCode === "SESSION_TIMED_OUT" || errorCode === "SESSION_TIMEDOUT") ) {%>\n\t\t\t\t<h2 style="text-align:center;">&nbsp;<i><%= _t(\'rr_session_timed_out_continue_refresh\') %></i></h2>\n\t\t\t<% } else { %>\n\t\t\t\t\t<h2 id="access-bookTitle"><%= gbData.BiblioData.title %></h2>\n\t\t\t\t\n\t\t\t\t\t<div id="access-pagenumber"><%= _t(\'rr_pageOfText\', {PGCUR: gbData.tmpLpg[gbData.tmpFetchPageNum-1], PGLST:gbData.tmpLpg[gbData.tmpLpg.length - 1]}) %> </div>\n\t\t\t\t\n\t\t\t\t\t<div id="access-bookmark-status" tabindex="-1">\n\t\t\t\t\t\t<% if (! _.isUndefined(annots !== "undefined") && annots.length > 0 && !_.isUndefined(_.find(annots, function(annotTmp) { return annotTmp.bookMark;\t})) ) {%>\n\t\t\t\t\t\t\t<%\tvar  tmpNoteAnnot = _.find(annots, function(annotTmp) { return annotTmp.bookMark; });\t %>\n\t\t\t\t\t\t\t<%= _t(\'rr_hasBookMarkText\', {ABKMID: \'mainViewerBookMark_\'+tmpNoteAnnot.annotID }) %>\n\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t<%= _t(\'rr_hasNoBookMarkText\', {ABKMNID: \'mainViewerBookMark_0\' }) %>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="access-bookmark-message" tabindex="-1" style="display:none;"><%= _t(\'rr_bookMarkCreatedText\') %></div>\n\t\t\t\t\n\t\t\t\t\t<div id="access-note-status" tabindex="-1">\n\t\t\t\t\t\t<% if (! _.isUndefined(annots !== "undefined") && annots.length > 0 && !_.isUndefined(_.find(annots, function(annotTmp) { return "sticky" === annotTmp.annotType;\t})) ) {%>\n\t\t\t\t\t\t\t<%\tvar  tmpNotesAnnot = _.find(annots, function(annotTmp) { return "sticky" === annotTmp.annotType; });\t %>\n\t\t\t\t\t\t\t<%= _t(\'rr_hasNotesCreatedText\', {ANTID: \'mainViewerNote_\'+tmpNotesAnnot.annotID }) %>\n\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t<%= _t(\'rr_hasNoNotesCreatedText\', {ANTNID: \'mainViewerNote_0\' }) %>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="book-added-to-bsk-message" tabindex="-1" style="display:none;"><%= _t(\'rr_automatic_book_add\') %></div>\n\t\t\t\t\n\t\t\t\t\t<div id="access-page-content">\n\t\t\t\t\t\t<%= pText %>\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t<div id="access-nav-next"><a id="txtGoToNexPg" href=\'#\'><%= _t(\'rr_goToNexPageAria\') %></a></div>\n\t\t\t\t\t<div id="access-nav-previous"><a id="txtGoToPrePg" href=\'#\'><%= _t(\'rr_goToPrePageAria\') %></a></div>\n\t\t\t<% } %>\n\t\t\t\n\t\t <% } else if(typeof(errorCode) !== "undefined" && (errorCode === "DAY_REQUIRED" )) {%>\n\t\t\t <h2 style="text-align:center;">&nbsp;<i><%= _t(\'rr_daysRequired\') %></i></h2>\n\t\t <% } else if(typeof(errorCode) !== "undefined" && (errorCode === "REQUEST_REQUIRED" )) {%>\n\t\t\t <h2 style="text-align:center;">&nbsp;<i><%= _t(\'rr_requestRequired\') %></i></h2>\n\t\t <% } else if(typeof(status) !== "undefined" && status === "FAILURE") {%>\n\t\t\t <h2 style="text-align:center;">&nbsp;<i><%= wrapDashErrorMessage() %></i></h2>\n\t\t <% } else { %>\n\t\t\t\t\t<br/>\n\t\t\t\t\t<h2>&nbsp;<i> <%= _t(\'rr_loading\') %></i></h2>\n\t\t\t\t</div>\n\t\t\t<% } %>\n\t\t</div>\n \n \x3c!-- Modal --\x3e\n<div class="modal fade" id="notesTxtModal" tabindex="-1" role="dialog" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button"  class="ga_note_close close btn-close" data-dismiss="modal" ><span class="icon-close" aria-hidden="true"><svg focusable=\'false\' width=\'12\' height=\'12\' fill=\'white\'><use xlink:href="#icon-close-lg"/></svg></span><span class="sr-only"><%= _t(\'rr_close\') %></span></button>\n        <h4 class="modal-title" id="myModalLabelNotesModal"><%= _t(\'rr_annotNt\') %></h4>\n      </div>\n      <form id="noteModalForm" class="form-horizontal" role="form">\n\t      <div class="modal-body modal-tightspace-bottom">\n\t      \n\t            <% if (typeof(annots) !== "undefined" && ! _.isUndefined(annots !== "undefined") && annots.length > 0 && !_.isUndefined(_.find(annots, function(annotTmp) { return "sticky" === annotTmp.annotType;\t})) ) {%>\n\t\t\t\t   <%\tvar  tmpNotesAnnot = _.find(annots, function(annotTmp) { return "sticky" === annotTmp.annotType; });\t %>\n\t\t\t\t\t\t<label class="sr-only" for=\'noteContent_<%= tmpNotesAnnot.annotID%>\'>Enter note text</label>\n\t\t\t\t\t\t<textarea placeholder="" class="form-control" rows="10" id=\'noteContent_<%= tmpNotesAnnot.annotID%>\' style="resize:none"> <%= tmpNotesAnnot.label %></textarea>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<label class="sr-only" for=\'noteContent_0\'>Enter note text</label>\n\t\t\t\t\t<textarea placeholder="" class="form-control" rows="10" id=\'noteContent_0\' style="resize:none"></textarea>\n\t\t\t\t<% } %>      \n\t\t\t   <% if ( navigator.userAgent.match(/(iPad|iPhone|iPod|Android)/i) ) {%>\n\t\t\t\t\t<p class="modal-helptext"><%= _t(\'rr_copy_option_md\') %>. Delete this note under Annotations.</p>\n\t\t\t\t<%}else{%>\t\n\t\t\t\t\t<p class="modal-helptext">\n\t\t\t\t\t     <% if (navigator.appVersion.indexOf("Mac")!=-1) { %> \n\t\t\t\t\t          <%= _t(\'rr_command_c\') %>\n\t\t\t\t\t     <% } else { %> \n\t\t\t\t\t            <%= _t(\'rr_control_c\') %>      \n\t\t\t\t\t     <% } %>\n\t\t\t\t\t     Delete this note under Annotations.\n\t\t\t\t\t</p>\n\t\t\t\t<%}%>\n\t      </div>\n\t\t  <div class="modal-footer modal-tightspace-top">\n\t\t\t\t<button id=\'modalNCancel\' type="button" class="btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button>\n\t\t\t\t<button id=\'modalNSave\' type="button" class="btn btn-primary"><%= _t(\'rr_save\') %></button>\t\t\n\t      </div>\n\t  </form>\n    </div>\x3c!-- /.modal-content --\x3e\n  </div>\x3c!-- /.modal-dialog --\x3e\n</div>\x3c!-- /.modal --\x3e\n \n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="panel">\n\t\t\n\t\t<div id="panel-close" aria-hidden="true"><button class="btn-close" id="closePanel"><svg focusable=\'false\' width=\'14\' height=\'14\' style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></button></div>\n\t\t\n\t\t<div id=\'search-container\'>\n\t\t\t<H2><%= _t(\'rr_search\') %><span class="sr-only">Section</span></H2>\n\t\t\t<div class="book-title"><%= BiblioData.title !== "undefined"?BiblioData.title:"N/A"%></div>\n\t\t\t<div id="search-block">\n\t\t\t\t<div id="help-block" class="help-block"><%= _t(\'rr_search_bus_plan\') %></div>\n\t\t\t\t<div class="input-group">\n\t\t\t\t<label class="sr-only" for="searchInBookTerm"><%= _t(\'rr_search_in_bookAria\') %></label>\n\t\t\t    <input id="searchInBookTerm" type="text" class="form-control" placeholder="<%= _t(\'rr_search_in_book\') %>">\n\t\t\t\t    <span class="input-group-btn">\n\t\t\t\t        <button id="searchWithInBook" aria-label="<%= _t(\'rr_search\') %>" class="btn btn-default btn-search-inline icons-return" type="button">\n\t\t\t\t           <svg focusable=\'false\' width=\'15\' height=\'15\' style=\'pointer-events:none;\' ><use xlink:href="#icon-return"></use></svg>\n\t\t\t\t        </button>\n\t\t\t\t    </span>\n\t\t\t\t</div>\n\t\n\t\t\t\t<div id=\'search-button\' class="pull-right">\n\t\t\t\t\t<button id="searchWithInBookSubmit" type="button" class="btn btn-primary"><%= _t(\'rr_search\') %></button>\n\t\t\t\t</div>\n\t\t\t</div>\x3c!-- end search-block --\x3e\n\n\t\t\t<div class="clearfix"></div>\n\t\t\t<div id="searchBookResults"></div>\n\t\t\t\n\t</div>\t\x3c!-- end search container --\x3e\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="noSearchResultTmpl">\n\t\t\n\t\t<div id=\'noSearchResult\'>\n\t\t<% if (typeof hasBST !== "undefined" && hasBST.length > 0 ) { %>\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-xs-2 did-you-mean-result"><div class="did-you-mean-badge label-warning">0</div></div>\n\t\t\t\t\t\t<div class="col-xs-10 did-you-mean-result no-left-padding"><%= _t(\'rr_results_for\') %> <em><%- searchTerm %></em>.</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-xs-12 did-you-mean-result"><%= _t(\'rr_bln_search_not_supported\') %></div>\n\t\t\t\t\t</div>\t\n\t\t\t\n\t\t <% }else{ %> \n\t\t\t\t\t<% if (typeof searchTerm !== "undefined"  && searchTerm.length > 0  ) { %>\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-xs-2 did-you-mean-result"><div class="did-you-mean-badge label-warning">0</div></div>\n\t\t\t\t\t\t\t<div class="col-xs-10 did-you-mean-result no-left-padding"><%= _t(\'rr_results_for\') %> <em><%- searchTerm %></em>. <%= _t(\'rr_pls_another_search\') %></div>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t<% }else{ %>\n\t\t\t\t\t\t<H2><%= _t(\'rr_no_search_rslt\') %></H2>\n\t\t\t\t\t<% } %>\n\t\t <% } %>\n\t</div>\t\x3c!-- end search container --\x3e\n<\/script>\n\n'},function(t,e){t.exports='<script type="text/template" id="panel">\n\t\t\n\t<div id=\'search-string\' class="row search-string-block">\n\t\t<div class="col-xs-10 search-string"><span class="label"><%= totalPageHits() %></span> <%= _t(\'rr_results_for\') %> <em><%- searchTerm %></em></div>\n\t\t<div class="col-xs-2 search-string"><a id=\'toggle-results\' href="#" data-toggle=\'tooltip\' title=\'<%= _t(\'rr_show_hide_results\') %>\'><strong><%= _t(\'rr_clear\') %></strong></a></div>\n\t</div>\n\t\t\n\t<div id="search-results">\n\t\t<div class="btn-group btn-group-results">\n\t\t\t<button id="searchResultByChapter" type="button" class="btn btn-result-toggle btn-results"><%= _t(\'rr_by_chapter\') %></button>\n\t\t\t\x3c!-- <button id="searchResultByFrequencey" type="button" class="btn btn-result-toggle btn-results btn-results-deselected"><%= _t(\'rr_by_frequency\') %></button>  --\x3e\n\t\t</div>\n\t</div>\n\t\n\t\x3c!-- search results by chapter --\x3e\n\t<div id="search-results-list">\n\t\t\x3c!-- <span class="sr-only">To read search results within a chapter, please use list commands for your screen reader.</span>  --\x3e\n\t\t<ul id="searchResultsListByChapter" class="list-unstyled">\n\t\t\n\t\t</ul>\n\t\n\t</div>\x3c!-- end search results by chapter --\x3e\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="frequencySearchResultTmpl">\n\t\t\n\t<div id=\'search-string\' class="row search-string-block">\n\t\t<div class="col-xs-11 search-string"><span class="label">30</span> <%= _t(\'rr_results_for\') %> <em><em><%- data.searchTerm %></em></div>\n\t\t<div class="col-xs-1 search-string"><button id=\'toggle-results\' data-toggle=\'tooltip\' title=\'<%= _t(\'rr_show_hide_results\') %>\' class=\'toggle-results icon-results-show\'></button></div>\n\t</div>\n\t\t\n\t<div id="search-results">\n\t\t<div class="btn-group btn-group-results">\n\t\t\t<button id="searchResultByChapterInFq" type="button" class="btn btn-result-toggle btn-results"><%= _t(\'rr_by_chapter\') %></button>\n\t\t\t\x3c!-- <button id="searchResultByFrequenceyInFq" type="button" class="btn btn-result-toggle btn-results btn-results-deselected"><%= _t(\'rr_by_frequency\') %></button>  --\x3e\n\t\t</div>\n\t</div>\n\t\n\t\t\n\t\t<div id=\'frequencySearchResult\'>\n\t\t\t<H2><%= _t(\'rr_search_res_frq\') %></H2>\n\t</div>\t\x3c!-- end search container --\x3e\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="panel">\n\t\t\n\n\t\t\t\t<div id=\'did-you-mean\' class="did-you-mean-block">\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t<% if (typeof sugession !== "undefined"   ) { %>\n\t\t\t\t\t\t<div class="col-xs-2 did-you-mean-result"><div class="did-you-mean-badge label-warning">0</div></div>\n\t\t\t\t\t\t<div class="col-xs-10 did-you-mean-result no-left-padding"><%= _t(\'rr_results_for\') %> <em><%- searchTerm %></em>.\n\t\t\t\t\t\t<% if (typeof sugession !== "undefined" && sugession.length === 0 ) { %> <%= _t(\'rr_pls_another_search\') %><% } %>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<% } %>\n\t\t\t\t\t</div>\t\n\t\t\t\t\t\n\n\t\t\t\t<% if ( typeof sugession !== "undefined"  && sugession.length > 0 ) { %>\n\t\t\t\t\t<div class=\'did-you-mean-head\'><%= _t(\'rr_did_mean\') %></div>\n\t\t\t\t \t<%  _.each(sugession, function(tmpSugession) { %>\n\t\t\t\t\t \t<div class="row">\n\t\t\t\t\t\t\t<div class="col-xs-2 did-you-mean-result"><div class="did-you-mean-badge"><%= tmpSugession.termSuggestedfrequency%></div></div>\n\t\t\t\t\t\t\t<div class="col-xs-10 did-you-mean-result no-left-padding"><a class="ga_did_you_mean" href=\'#\'><%= tmpSugession.termSuggested%></a></div>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t \t <% }); %>\n\t\t\t\t\t</div>\x3c!-- end did you mean block --\x3e\n\t\t\t\t<% } %>\n\t\t\t\t\n<\/script>\n\n'},function(t,e){t.exports='<script type="text/template" id="panel">\n\t\t\t\n\t\t\t<div class="row" id="chapterSelection_<%=cptInd %>" >\n\t\t\t\t<% if(data.score >0 ) {%>\n\t\t\t\t\t<div class="col-xs-1"><a href=\'#\' class=\'no-decor\'><span class="sr-only toggleText">This section is collapsed</span><span class="icon-panel-open"><svg focusable=\'false\' width=\'20\' height=\'20\' style=\'pointer-events:none;\' ><use xlink:href="#icon-panel-closed"/></svg></span></a></div>\n\t\t\t\t\t<div class="col-xs-8"><%= data.title %> </div>\n\t\t\t\t\t<div class="col-xs-3"><div class="result-relevance-outer" ><div class="result-relevance-inner" role="progressbar" aria-valuenow="<%=(data.score/2)%>" aria-valuemin="0" aria-valuetext="<%= _t(\'rr_searchScoreAria\') %> <%=(data.score/2)%>" aria-valuemax="100" style="width:<%=(data.score/2)%>px !important;" ></div></div></div>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<div class="col-xs-1"></div>\n\t\t\t\t\t<div class="col-xs-8" id="noHits_<%=data.firstPage%>" ><%= data.title %></div>\n\t\t\t\t\t<div class="col-xs-3"><div class="result-relevance-outer"><div class=""  role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuetext="<%= _t(\'rr_searchScoreAria\') %> 0" aria-valuemax="100"  ></div></div></div>\n\t\t\t\t<% }%>\n\t\t\t\t\n\t\t\t</div>\n\t\t\t\t<div  class=\'search-level-2-group\'>\n\t\t\t\t\t<ul id="chapterLevelSnips_<%=cptInd %>" class="list-unstyled">\n\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n<\/script>'},function(t,e){t.exports='<script type="text/template" id="panelSnip">\n\t\t\n\t\n\t\t<% if (typeof data.orderedPagesWithSnippet !== "undefined" && data.orderedPagesWithSnippet !==null) { \n\t\t\t var tmpLen= data.orderedPagesWithSnippet.length;\n\t\t\t  _.each(data.orderedPagesWithSnippet, function(tmpData, tmpInd) { %>\n\t\t\t\t<li id="snipHit_<%= tmpData.pageNumber%>" role="link" tabindex="0" class="ga_search_snip_page_link search-level-2 <%= (tmpInd===0 && tmpLen!==1)?\'search-level-2-first\':\'\' %> <%= (tmpInd===tmpLen-1)?\'search-level-2-last\':\'\'%>">\n\t\t\t\t\t<div class="num-hits"><span class="label"><%= Math.round(tmpData.termFrequency)%></span> <%= _t(\'rr_results_on_page\', {LPN: tmpLpg[tmpData.pageNumber-1]}) %> </div><%= tmpData.highlightSnippets[0]%>\n\t\t\t\t</li>\n\t\t <% }); %>\t\n\t<% } %>\n\n\n\n<\/script>\n\n\n'},function(t,e){t.exports='<script type="text/template" id="downloadTmpl">\n \t\n\x3c!-- Download Modal --\x3e\n<div class="modal fade modal-wizard download-modal-wizard" id="downloadModal" tabindex="-1" role="dialog" aria-labelledby="myLb1Device" >\n  <div class="modal-dialog" id="downloadModalSteps">\n  <% if (typeof BiblioData !== "undefined" && typeof DocUser !== "undefined" && DocUser.availableForDownload && DocUser.signedIn && (status==="has_access" || status==="nupo_confirm" || DocUser.alreadyNupo==="yes")) { \n  \t\tvar userNavType= "desktopDevice";\n        var ckDiviceType=null;\n        var ckRadioSel="ownDevice";\n  \t\tif ( navigator.userAgent.match(/(iPad|iPhone|iPod)/i) ){\n\t      \t\tuserNavType = \'iosDevice\';\n\t    }else if ( navigator.userAgent.match(/(Android)/i) ){\n           \t\tuserNavType = \'androidDevice\';\n         }\n         if(tmpCkName){\n       \t\tvar cookiePieces = tmpCkName.split(\'-\');\n        \tckDiviceType=cookiePieces[0]+"Device";\n        \tckRadioSel= (cookiePieces[1]==1?\'ownDevice\':\'sharedDevice\');\n        \tuserNavType = ckDiviceType;\n         }\n\t%>\n  \t\x3c!--  Step 1 --\x3e\n    <div class="modal-content wizard-box wizard-step-device <%= (ckDiviceType ?\'attempted\':\'attempted active\')%>" id="deviceStep">\n\n      <div class="step-header-wrapper">\n        <div class="step-header">\n          <h2 class="modal-title collapsed"><span><%= _t(\'rr_one_num\') %></span><%= _t(\'rr_device\') %></h2>\n          <h2 id="myLbDevice" class="modal-title expanded "><span><%= _t(\'rr_one_num\') %></span><%= _t(\'rr_device_using\') %></h2>\n        </div>\n\n        <a href="#" class="change-button on-attempted"><%= _t(\'rr_edit_step\') %></a>\n      </div>\n\n      <div class="wizard-content">\n        \x3c!-- devices list --\x3e\n        <ul class="devices-list clearfix" role="list" aria-labelledby="list of devices" >\n          <li id="desktopDevice" role="listitem" tabindex="0" class="device-desktop <%= (userNavType ===\'desktopDevice\'?\'device-selected\':\'\')%>"> \x3c!--  device-selected --\x3e\n            <div class="device-icon icon-device-desktop" data-icon-class="icon-device-desktop"  aria-hidden="true" aria-describedby="dtLpt"><svg focusable=\'false\' width=\'140\' height=\'140\' style=\'pointer-events:none;\' ><use xlink:href="#device-desktop-off" /></svg></div>\n            <div id="dtLpt" class="device-type" role="button">\n              <span class="title"><%= _t(\'rr_laptop_desktop\') %></span>\n              <span class="sr-only textToggle"></span>\n            </div>\n          </li>\n          <li id="iosDevice" role="listitem" tabindex="0" class="device-ios <%= (userNavType ===\'iosDevice\'?\'device-selected\':\'\')%>">\n            <div class="device-icon icon-device-ios" data-icon-class="icon-device-ios"  aria-hidden="true" aria-describedby="dtIos"><svg focusable=\'false\' width=\'140\' height=\'140\' style=\'pointer-events:none;\' ><use xlink:href="#device-ios-off" /></svg></div>\n            <div  id="dtIos"  class="device-type" role="button">\n              <span class="title"><%= _t(\'rr_iOS\') %></span>\n              <span class="cats"><%= _t(\'rr_iPad_iPhone\') %></span>\n              <span class="sr-only textToggle"></span>\n            </div>\n          </li>\n          <li id="androidDevice" role="listitem" tabindex="0" class="device-android <%= (userNavType ===\'androidDevice\'?\'device-selected\':\'\')%>">\n            <div class="device-icon icon-device-android" data-icon-class="icon-device-android"  aria-hidden="true" aria-describedby="dtAndr"><svg focusable=\'false\' width=\'140\' height=\'140\' style=\'pointer-events:none;\'  ><use xlink:href="#device-android-off" /></svg></div>\n            <div  id="dtAndr" class="device-type" role="button">\n              <span class="title"><%= _t(\'rr_android\') %></span>\n              <span class="cats"><%= _t(\'rr_phone_tablet\') %></span>\n              <span class="sr-only textToggle"></span>\n            </div>\n          </li>\n          <li id="otherDevice" role="listitem" tabindex="0" class="device-other">\n            <div class="device-icon icon-device-unknown" data-icon-class="icon-device-unknown"  aria-hidden="true" aria-describedby="dtOth"><svg focusable=\'false\' width=\'140\' height=\'140\' style=\'pointer-events:none;\'  ><use xlink:href="#device-other-off" /></svg></div>\n            <div id="dtOth" class="device-type" role="button">\n              <span class="title"><%= _t(\'rr_other\') %></span>\n              <span class="sr-only textToggle"></span>\n            </div>\n          </li>\n        </ul>\n\n        \x3c!-- device selection form --\x3e\n        <form class="form-horizontal form-device-type"  role="form">\n          <div class="form-group">\n            <div class="col-xs-12   col-xs-offset-1  col-sm-9 col-sm-offset-3">\n              <div id="ownDeviceParent" class="radio">\n              \x3c!--<span  class="pretty-radio <%= (ckRadioSel===\'ownDevice\'?\'checked\':\'\') %>">\n              \t\t<a href="#"><p aria-describedby="ownDevice" class="sr-only">Radio button <%= _t(\'rr_own_computer\') %></p>\n              \t\t</a>\n              </span> --\x3e\n              \n              <label><input type="radio" name="deviceType" id="ownDevice" value="1" <%= (ckRadioSel===\'ownDevice\'?\'checked\':\'\') %> ><%= _t(\'rr_own_computer\') %></label>\n              \n              </div>\n              <div id="sharedDeviceParent" class="radio" >\n              \x3c!--<span class="pretty-radio <%= (ckRadioSel===\'sharedDevice\'?\'checked\':\'\') %>"><a href="#"><p aria-describedby="sharedDevice" class="sr-only">Radio button <%= _t(\'rr_public_computer\') %></p></a></span>--\x3e\n                <label><input type="radio" name="deviceType" id="sharedDevice" value="2" <%= (ckRadioSel===\'sharedDevice\'?\'checked\':\'\') %> ><%= _t(\'rr_public_computer\') %></label>\n              </div>\n            </div>\n          </div>\n\n          <div class="form-group action-row">\n            <div class="col-xs-12 col-sm-offset-4 col-sm-8 clearfix">\n              <button type="submit" class="ga_download_step1_continue btn btn-primary btn-lg dl-btn-resp" id="continueButton"><%= _t(\'rr_continue\') %></button>\n            </div>\n          </div>\n\n        </form>\n      </div>\n    </div>\n    \n    \x3c!-- Step 2 --\x3e\n    <div class="modal-content wizard-box wizard-step-install <%= (ckDiviceType ?\'attempted\':\'\')%>" id="installStep">\n      <div class="step-header-wrapper">\n        <div class="step-header">\n          <h2 class="modal-title collapsed"><span><%= _t(\'rr_two_num\') %></span><%= _t(\'rr_install\') %></h2>\n          <h2 class="modal-title expanded"><span><%= _t(\'rr_two_num\') %></span><%= _t(\'rr_install\') %></h2>\n        </div>\n\n        <a href="#" class="change-button on-attempted"><%= _t(\'rr_edit_step\') %></a>\n      </div>\n\n      <div class="wizard-content">\n\n      </div>\n    </div>\n    \n    \x3c!--  Step 3 --\x3e\n    <div class="modal-content wizard-box wizard-step-download <%= (ckDiviceType ?\'active\':\'\')%>"  id="downloadStep">\n      <div class="step-header">\n        <h2 class="modal-title collapsed"><span><%= _t(\'rr_three_num\') %></span><%= _t(\'rr_download\') %></h2>\n        <h2 class="modal-title expanded"><span><%= _t(\'rr_three_num\') %></span><%= _t(\'rr_download\') %></h2>\n      </div>\n      <div class="wizard-content">\n      \n\t\t<h3><span><%= BiblioData.title !== "undefined"?BiblioData.title:_t(\'rr_na\')%></span></h3>\n\t\t        <div class="row">\n\t\t          <div class="col-xs-3 col-sm-3">\n\t\t            <img src="<%=BiblioData.coverURL%>" alt="" class="img-responsive" />\n\t\t          </div>\n\t\t          <div class="col-xs-9 col-sm-9 book-meta">\n\t\t\t            <p><%= _t(\'rr_author\') %><% if(typeof BiblioData.contibutors !== "undefined"){ var tmpCtbs= (BiblioData.contibutors.slice(0,3)); %><%=tmpCtbs.join()%> <% }else{%> <%=_t(\'rr_na\') %> <% }%></p>\n\t\t\t            <p><%= _t(\'rr_length\', {SIZ: BiblioData.pages}) %></p>\n\t\t\t           \n\t\t\t            <p><%= _t(\'rr_file_size\', {FKB: Math.round(BiblioData.fileSize/1024),FMB:(BiblioData.fileSize/(1024*1024)).toFixed(1)}) %></p> \n\t\t\t            <% if (!_.isUndefined(accDtl.toDownloadExpiry) && !_.isNull(accDtl.toDownloadExpiry) && !accDtl.drmFree) { %>\n\t\t\t            \t<p><%= _t(\'rr_expires_in\') %>\n\t\t\t            \t    <% if (accDtl.downloadDays === 0 && accDtl.downloadHours === 0 ) { %>\n\t\t\t            \t \t\t <%= _t(\'rr_expire_less_hour\') %>\n\t\t\t            \t    <% } else { %>\n\t\t\t            \t          <%= _t(\'rr_expire_days_hours\', {LD: accDtl.downloadDays, LH: accDtl.downloadHours}) %>\t\n\t\t\t            \t    <% } %>                                            \n\t\t\t            \t</p>\n\t\t\t            \t<br/>\n\t\t\t            <% } else if (!_.isUndefined(accDtl.daysRequiredRange) && !_.isNull(accDtl.daysRequiredRange)) { %>\n\t\t\t            \t<br/>\n\t\t\t\t\t\t\t<div id="downloadPeriodFullWrapper" class="row">\n\t\t\t\t\t        \t<label for="downloadPeriodFull" class="col-xs-5 modal-label control-label "><%= _t(\'rr_download_period\') %></label>\n\t\t\t\t\t        \t<div class="col-xs-6">\n\t\t\t\t\t        \t\t<% if (!_.isUndefined(accDtl.requestRequiredRangeWithPrices) && !_.isNull(accDtl.requestRequiredRangeWithPrices)) {%>\n\t\t\t\t\t        \t\t\t<% if (accDtl.requestRequiredRange.length ==1) { %> \n\t\t\t\t\t        \t\t\t\t<p class="pull-left labl-aln">\n\t\t\t\t\t        \t\t\t\t<% _.each(accDtl.requestRequiredRangeWithPrices, function(element, index, list){ %>\n\t\t\t\t\t\t\t     \t  \t\t\t    <%= list[index] %>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t\t\t\t <%  }); %>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t   \t\t\t<select class=\'form-control pull-left hidden\' name=\'downloadPeriodFull\' id=\'downloadPeriodFull\'>\n\t\t\t\t\t\t\t\t\t\t\t\t<option selected="selected" value="<%= accDtl.requestRequiredRange[0] %>"</option>\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t        \t\t\t<% } else {%>\n\t\t\t\t\t\t\t  \t  \t\t\t<select class="form-control pull-left" name="downloadPeriodFull" id="downloadPeriodFull">\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=""><%= _t(\'rr_checkOutSelectOpt\') %></option>\n\t\t\t\t\t\t\t     \t  \t\t\t<% _.each(accDtl.requestRequiredRangeWithPrices, function(element, index, list){ %>\n\t\t\t\t\t\t\t     \t  \t\t\t   <% if (index == "1") { %>\n\t\t\t\t\t\t\t     \t  \t\t\t         <option value="<%= index %>" ><%= list[index] %></option>\t\t\t\t\t\t\t\t\t     \t  \t\t\t   \n\t\t\t\t\t\t\t     \t  \t\t\t   <% } else { %>\n\t\t\t\t\t\t\t     \t  \t\t\t         <option value="<%= index %>" ><%= list[index] %></option>\n\t\t\t\t\t\t\t     \t  \t\t\t   <% } %>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t\t\t\t <%  }); %>\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t<% }%>\n\t\t\t\t\t        \t\t<% }else {%>\n\t\t\t\t\t        \t\t   \t<% if (accDtl.daysRequiredRange.length ==1) { %> \n\t\t\t\t\t\t\t\t\t   \t\t\t<p class="pull-left labl-aln"><%= _t(\'rr_checkOutDays\', {DAYSNUM: \'\'+accDtl.daysRequiredRange[0] }) %></p>\n\t\t\t\t\t\t\t\t\t   \t\t\t<select class=\'form-control pull-left hidden\' name=\'downloadPeriodFull\' id=\'downloadPeriodFull\'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option selected="selected" value="<%= accDtl.daysRequiredRange[0] %>"</option>\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t  \t  <% } else { %> \n\t\t\t\t\t\t\t\t\t  \t  \t\t\t<select class="form-control pull-left" name="downloadPeriodFull" id="downloadPeriodFull">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=""><%= _t(\'rr_checkOutSelectOpt\') %></option>\n\t\t\t\t\t\t\t\t\t     \t  \t\t\t<% _.each(accDtl.daysRequiredRange, function(element, index, list){ %>\n\t\t\t\t\t\t\t\t\t     \t  \t\t\t   <% if (list[index] == "1") { %>\n\t\t\t\t\t\t\t\t\t     \t  \t\t\t         <option value="<%= list[index] %>" ><%= _t(\'rr_checkOutDay\', {DAYSNUM: \'\'+list[index] }) %></option>\t\t\t\t\t\t\t\t\t     \t  \t\t\t   \n\t\t\t\t\t\t\t\t\t     \t  \t\t\t   <% } else { %>\n\t\t\t\t\t\t\t\t\t     \t  \t\t\t         <option value="<%= list[index] %>" ><%= _t(\'rr_checkOutDays\', {DAYSNUM: \'\'+list[index] }) %></option>\n\t\t\t\t\t\t\t\t\t     \t  \t\t\t   <% } %>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t <%  }); %>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t   \t\t <% } %>\n\t\t\t\t\t\t\t\t   \t <% } %>\n\t\t\t\t\t\t\t\t   <div id="downloadPeriodFull_error" class="error-msg"></div>\n\t\t\t\t\t        \t</div>\n\t\t\t\t\t        \t<div class="col-xs-1  col-sm-1"></div>\n\t\t\t\t        \t</div>\n\t\t\t\t        <% } %>\n\t\t\t\t       <% if(typeof BiblioData.fileFormat !== "undefined") { %>\n\t\t\t        \t\t<div class="row">\n\t\t\t\t\t\t\t\t<label for="" class="col-xs-5 modal-label control-label ">  <%= _t(\'rr_download_format\') %></label>\n\t\t\t\t\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t\t\t\t\t<% if(BiblioData.fileFormat.length >1) { %>\n\t\t\t\t\t\t\t\t\t\t\t<% if(BiblioData.fileFormat.indexOf("epub") > -1){ %>\n\t\t\t\t\t\t\t\t\t\t\t\t<label class="col-xs-3 radio-inline"><input type="radio" name="optradio" id="optradio" checked = "checked" value="epub" >EPUB</label>\n\t\t\t\t\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t\t\t\t\t<% if(BiblioData.fileFormat.indexOf("pdf") > -1){ %>\n\t\t\t\t\t\t\t\t\t\t\t\t<label class="col-xs-3 radio-inline"><input type="radio" name="optradio" id="optradio" value="pdf" >PDF </label>\n\t\t\t\t\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t\t\t<% } else { %> \n\t\t\t\t\t\t\t\t\t\t\t\t<% _.each(BiblioData.fileFormat, function(docFormat, index, list){ %>\n\t\t\t\t\t\t\t\t\t\t\t\t<% if(docFormat == \'pdf\') { %>\n\t\t\t\t\t\t\t\t\t\t\t\t\tPDF<label class="col-xs-3 radio-inline hidden"><input type="radio" name="optradio" id="optradio" checked = "checked"  value="pdf" >PDF </label>\n\t\t\t\t\t\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t\t\t\t\t\t<% if(docFormat == \'epub\') { %>\n\t\t\t\t\t\t\t\t\t\t\t\t\t EPUB<label class="col-xs-3 radio-inline hidden"><input type="radio" name="optradio" id="optradio" checked = "checked" value="epub" >EPUB</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t\t\t\t\t <%  }); %>\n\t\t\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t    <div class="col-xs-1  col-sm-1"></div>\n\t\t\t\t\t\t    </div>\n\t\t\t\t\t  <% } %>\n\t\t\t\t        \n\t\t\t\t        \t\n\t\t\t\t        \t\n\t\t          </div>\n\t\t</div>   \n        \n        <% if (accDtl.showPriceMsg===true) {%>\n        \t<div id="invoice_reader_fd_msg" class="action-row"><%= _t(\'sp_stl_invoice_msg\') %></div>\n        <% } %>\n        <div class="action-row">\n        \t<a href="acsDownload.action?docID=<%= DocUser.docID%>&op=final" type="button" class="btn btn-primary btn-lg dl-btn-resp" id="downloadBookButton"><%= _t(\'rr_d_book\') %></a>\n        \t<% if (accDtl.showPriceMsg===true) {%>\n        \t\t<button id=\'modalAlertCancel\' type="button" class="btn btn-primary btn-lg dl-btn-resp" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button>\n        \t<% } %>\n        \t<br/><br/>\n        \t<a href="readerSupportHelp.action?isD=1" target="_blank" class="ga_download_step3_help dl-btn-resp" ><%= _t(\'rr_need_help\') %></a>\n        </div>\n      </div>\n    </div>\n   <% } else if(typeof DocUser !== "undefined" && !DocUser.signedIn) { %>\n\t\t   <div class="modal-content"  id="deviceSignInStep">\n\t\t\t     <div class="modal-body modal-tightspace-bottom"> \n\t\t\t\t\t<h4><p style="text-align:center;"><%= _t(\'rr_pls\') %> <a class=\'ga_download_signin_link\' href=\'login.action\'><%= _t(\'rr_signin\') %></a>.</p><br/></h4>\n\t\t       \t</div>\n\t\t\t</div>\x3c!-- /.modal-content --\x3e\n    <% } else if(typeof status !== "undefined" && status!=="no_login" ) { %>\n     \t\t<div class="modal-content wizard-box wizard-step-device active" id="deviceErrorStep">\n\t\t         \t<div class="row">\n\t\t\t\t\t\t<div class="col-sm-2 col-sm-offset-1  alert-hand"><span class="icon-hand"><svg focusable=\'false\' width=\'80\' height=\'80\' style=\'pointer-events:none;\' ><use xlink:href="#icon-hand" /></svg></span></div>\n\t\t\t\t\t\t<div class="col-sm-9">\n\t\t\t\t\t\t\t<h3 class=\'alert-h3\'><%= _t(\'rr_book_not_available\') %>.</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t\t<button id=\'modalAlertCancel\' type="button" class="btn btn-primary" data-dismiss="modal"><%= _t(\'rr_close\') %></button> \n\t      \t\t\t</div>\n\t\t\t</div>\n    <% } %>\n    <button type="button" class="close wizard-close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only"><%= _t(\'rr_close\') %></span></button>\n  </div>\n   <% if (typeof status !== "undefined" && status==="nupo_confirm" && ( typeof DocUser !== "undefined" && typeof DocUser.alreadyNupo === "undefined") ) {%>\n\t  <div class="modal-dialog" id="downloadNupoStep">\n       \t\t<div class="modal-content wizard-box wizard-step-device active" id="deviceErrorStep">\n     \t      <div class="modal-body">\n\t\t\t        <div class="row">\n\t\t\t\t\t\t<div class="col-xs-2 col-xs-offset-1 alert-icon"><span class="icon-idea"><svg focusable=\'false\' width=\'80\' height=\'80\' fill=\'#E56C2A\' style=\'pointer-events:none;\' ><use xlink:href="#icon-idea" /></svg></span></div>\n\t\t\t\t\t\t<div class="col-xs-9">\n\t\t\t\t\t\t\t<h3 class=\'alert-h3\'><%= _t(\'rr_last_copy_book\') %></h3>\n\t\t\t\t\t\t\t<p><%= _t(\'rr_d_no_longer_access\') %></p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t      </div>\n\t\t\t<div class="modal-footer">\n\t\t\t\t\t<button id=\'modalAlertCancel\' type="button" class="btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button> \n\t\t\t\t\t<a href="#" type="button" class="btn btn-primary" id="modalAlertFirstContinueButton"><%= _t(\'rr_cnt_d\') %></a>\n\t      </div>\n  <% } %>\n\t    <button type="button" class="ga_download_close close wizard-close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only"><%= _t(\'rr_close\') %></span></button>\n\t  </div>\n  </div>\n</div>\n\x3c!--  End: download modal dialog --\x3e\n\n \n<\/script>\n'},function(t,e){t.exports="<%             readerLink = {\n            \t\t \"iosDevice\": 'https://apps.apple.com/us/app/adobe-digital-editions/id952977781',\n            \t\t \"androidDevice\": 'https://play.google.com/store/apps/details?id=com.adobe.digitaleditions',\n            \t\t \"desktopDevice\": 'http://www.adobe.com/products/digital-editions/download.html'\n             };\n%>\n<div class=\"row\">\n          <div class=\"col-xs-3\">\n            <i class=\"icon-idea info-icon\" aria-hidden=\"true\"><svg focusable='false' width='80' height='80' fill='#E56C2A' style='pointer-events:none;' ><use xlink:href=\"#icon-idea\" /></svg></i>\n          </div>\n\t        <div class=\"col-xs-9 copy\">\n                <% if(deviceFormFactor === 'otherDevice') { %>  \n\t\t\t\t\t<p><%= _t('rr_not_officially_download_to_other_devices') %></p>\n\t\t\t\t<% } else { %> \n\t\t\t\t\t\t <h3><%= _t('rr_you_need', {DREADER: reader}) %></h3>\n                        <% if(deviceOwnership === '1') { %>  \n                               \t<p><%= _t('rr_dld_adobeReader_extra') %><a class='ga_download_step2_adobe_link' href=\"<%= readerLink[deviceFormFactor] %>\" target=\"_blank\"><%= reader %></a> <%= _t('rr_dld_adobeReader') %></p>\n                                <% if(deviceFormFactor == 'desktopDevice') { %>\n\t                                <p><%= _t('rr_aFree') %> <a class='ga_download_step2_adobe_link' href=\"https://accounts.adobe.com\" target=\"new\"><%= _t('rr_adobeID') %></a> <%= _t('rr_transfer_book_device') %></p>\n\t                            <% } else { %>\n                                   \t<p><%= _t('rr_you_need_free') %> <a class='ga_download_step2_adobe_link' href=\"https://accounts.adobe.com\" target=\"new\"><%= _t('rr_adobeID') %></a> <%= _t('rr_read_book') %></p>\n\t                            <% } %>\n                        <% } else { %>\n                                <p class=\"copy-larger hidden-xs\"><b><%= _t('rr_tip') %></b> <%= _t('rr_d_own_computer') %></p> \n                                 <p><a class='ga_download_step2_bluefire_link' href=\"<%= readerLink[deviceFormFactor] %>\" target=\"_blank\"><%= reader %></a> <%= _t('rr_reqDownloadBooks') %></p>\n                        <% } %>\n\t\t\t\t<% } %>                \n             </div>\n</div>\n\n<div class=\"action-row\">\n   <a href=\"<%= (deviceOwnership === '1' ? readerLink[deviceFormFactor] : '#') %>\" target=\"_blank\" type=\"button\" class=\"btn btn-primary btn-lg dl-btn-resp <%= privateClass%>\" id=\"getReaderButton\"><%= buttonTitle%></a>\n    <% if(deviceOwnership === '1' && deviceFormFactor !== 'otherDevice') { %>  \n      <a href=\"#\" class=\"title skip-install\" id=\"doneInstallStep\"><%= _t('rr_done_with_step') %> &rsaquo;</a>\n    <% } %>  \n</div>\n "},function(t,e){t.exports='     \t\t<div class="modal-content wizard-box wizard-step-device active" id="deviceErrorStep">\n\t\t\t\t\t\t\x3c!--  show error messages --\x3e\n\t\t\t\t\t   <div class="row">\n\t\t\t\t\t\t\t<div class="col-sm-2 col-sm-offset-1  alert-hand" aria-hidden="true"><span class="icon-hand"><svg focusable=\'false\' width=\'80\' height=\'80\' style=\'pointer-events:none;\' ><use xlink:href="#icon-hand" /></svg></span></div>\n\t\t\t\t\t\t\t<div class="col-sm-9">\n\t\t\t\t\t\t\t\t<h3 class=\'alert-h3\'><%= _t(\'rr_book_not_available\') %></h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t<button id=\'modalAlertCancel\' type="button" class="btn btn-primary" data-dismiss="modal"><%= _t(\'rr_close\') %></button> \n      \t\t\t</div>\n\t\t\t\t\x3c!--  end show error messages --\x3e\n\t\t\t</div>\n<button class="close wizard-close" aria-hidden="true" data-dismiss="modal" type="button"></button>'},function(t,e){t.exports='  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" id="alertModalDismiss" class="close btn-close" data-dismiss="modal" ><span class="icon-close" aria-hidden="true"><svg focusable=\'false\' width=\'12\' height=\'12\' fill=\'white\' style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></span><span class="sr-only"><%= _t(\'rr_close\') %></span></button>\n        <h4 class="modal-title" id="myModalLabel"><%= _t(\'rr_alert\') %></h4>\n      </div>\n      <div class="modal-body">\n        <div class="row">\n\t\t\t<div class="col-sm-2 col-sm-offset-1  alert-hand"><span class="icon-hand" aria-hidden="true"><svg focusable=\'false\' width=\'80\' height=\'80\' style=\'pointer-events:none;\' ><use xlink:href="#icon-hand" /></svg></span></div>\n\t\t\t<div class="col-sm-9">\n\t\t\t\t<h3 class=\'alert-h3\'><%= _t(\'rr_book_not_available\') %></h3>\n\t\t\t</div>\n\t\t</div>\n      </div>\n\t\t<div class="modal-footer">\n\t\t\t<button id=\'modalAlertCancel\' type="button" class="btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button> \n\t\t\t<a href="acsDownload.action?docID=<%= DocUser.docID%>&op=final" type="button" class="btn btn-primary" id="modalAlertContinueButton"><%= _t(\'rr_cnt_d\') %></a>\n      </div>\n    </div>\x3c!-- /.modal-content --\x3e\n  </div>\x3c!-- /.modal-dialog --\x3e\n'},function(t,e){t.exports='<script type="text/template" id="dummyTemp">\n\n<% if( (typeof result !== "undefined" && !result) || (typeof errorCode !== "undefined" && (errorCode === "SESSION_TIMED_OUT" || errorCode === "LOGIN_REQUIRED"))){ %>\n\t\x3c!-- Login modal --\x3e\n\t<div class="modal fade signinModal" id="mjLoginModal" tabindex="-1" role="dialog" aria-labelledby="myloginModalTitl" >\n\t  <div class="modal-dialog">\n\t    <div id="modal-content" class="modal-content">\n\t\x3c!--       <div class="modal-header">\n\t        <button type="button"  class="close btn-close" data-dismiss="modal" ><span class="icon-close" aria-hidden="true"><svg focusable=\'false\' width=\'12\' height=\'12\' fill=\'white\' style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></span><span class="sr-only"><%= _t(\'rr_close\') %></span></button>\n\t        <h4 class="modal-title" id="myloginModalTitl"><%= _t(\'rr_sign_in\') %></h4>\n\t      </div> --\x3e\n\t      <div class="modal-body" id="signInDataFetch">\n\t\t  \t\n\t\t  </div>\n\t    </div>\x3c!-- /.modal-content --\x3e\n\t  </div>\x3c!-- /.modal-dialog --\x3e\n\t</div>\x3c!-- /.modal --\x3e\n\n<% }else if(typeof errorCode !== "undefined" && (errorCode === "SERVER_ERROR")){\n\tlocation.reload();\n } %>\n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="citeTextTemp">\n\n\n\t<div class="modal fade" id="citeModal" tabindex="-1" role="dialog"  >\n\t  <div class="modal-dialog">\n\t    <div class="modal-content">\n\t      <div class="modal-header">\n\t        <button type="button"  class="ga_cite_close close btn-close" data-dismiss="modal" ><span class="icon-close" aria-hidden="true"><svg focusable=\'false\' width=\'12\' height=\'12\' fill=\'white\'  style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></span><span class="sr-only"><%= _t(\'rr_close\') %></span></button>\n\t        <h4 class="modal-title" id="myModalLabelCiteModal"><%= _t(\'rr_citation\') %></h4>\n\t      </div>\n\t      <div class="modal-body">\n\t        <div class="modal-subhead"><%= _t(\'rr_copy_citation\') %></div>\n\t        \t<form class="form-horizontal" role="form">\n\t\t\t        <div class="form-group">\n\t\t\t        \t<label for="cite-format" class="col-xs-2 modal-label control-label align-left"><%= _t(\'rr_format\') %></label>\n\t\t\t        \t<div class="col-xs-9 align-right">\n\t\t\t\t\t\t\t<select class="form-control" id="cite-format"></select>\n\t\t\t        \t</div>\n\t\t\t        \t<div class="col-xs-1"></div>\n\t\t\t        </div>\n\t\t\t        \n\t\t\t       <div class="form-group">\n            \t\t\t<label for="citation-content" class="control-label sr-only"></label>\n            \t\t\t<div class="col-xs-12">\n\t\t\t\t        \t<div name="citation-content" id="citation-content" class="modal-editable-div modal-textarea form-control" style="height: 134px !important;" contenteditable=true></div>\n\t\t\t\t\t        <% if ( navigator.userAgent.match(/(iPad|iPhone|iPod|Android)/i) ) {%>\n\t\t\t\t\t\t\t\t<p class="modal-helptext"><%= _t(\'rr_copy_option_md\') %></p>\n\t\t\t\t\t\t\t<%}else{%>\t\n\t\t\t\t\t\t\t\t<p class="modal-helptext">\n\t\t\t\t\t\t\t\t     <% if (navigator.appVersion.indexOf("Mac")!=-1) { %> \n\t\t\t\t\t\t\t\t          <%= _t(\'rr_command_c\') %>\n\t\t\t\t\t\t\t\t     <% } else { %> \n\t\t\t\t\t\t\t\t            <%= _t(\'rr_control_c\') %>      \n\t\t\t\t\t\t\t\t     <% } %>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<%}%>\n\t\t\t\t\t\t</div>\n \t\t\t\t\t</div>\n \t\t\t\t\t\n\t\t\t\t\t<div class="modal-subhead space-before"><%= _t(\'rr_export_citation\') %></div>\n\t\t\t\t\t<button  type="button" id="citationRefWorks" class="btn btn-default" ${showRefworks==\'1\'? \'\' : \'disabled="disabled"\'}><%= _t(\'rr_ref_flow\') %></button> \n\t\t\t\t\t<a href="biblioExport.action?docID=<%= DocUser.docID%>" type="button" id="citationEndNoteCitavi" class="btn btn-default" ${showEndnote==\'1\'? \'\' : \'disabled="disabled"\'}><%= _t(\'rr_endNote_cit\') %></a>\n\t\t\t\t</form> \n\t\t      </div>\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button type="button" class="ga_cite_cancel btn btn-primary" data-dismiss="modal"><%= _t(\'rr_close\') %></button>\n\t      \t</div>\n\t    </div>\x3c!-- /.modal-content --\x3e\n\t  </div>\x3c!-- /.modal-dialog --\x3e\n\t</div>\x3c!-- /.modal --\x3e\n \n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="copyTextTemp">\n \t\n<div class="modal fade" id="req_browseRead_modal" tabindex="-1" role="dialog" aria-hidden="true"  aria-labelledby=\'my_readBrowse_tlt\'  >\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button"  class="ga_request_close close btn-close" data-dismiss="modal" ><span class="icon-close" aria-hidden="true"><svg focusable=\'false\' width=\'12\' height=\'12\' fill=\'white\' style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></span><span class="sr-only"><%= _t(\'rr_close\') %></span></button>\n        <h4 class="modal-title" id="my_readBrowse_tlt"><%= _t(\'rr_medReqTitle\') %></h4>\n      </div>\n      <div class="modal-body">\n             <div class="modal-book-title"><%= BiblioData.title !== "undefined"?BiblioData.title:_t(\'rr_na\')%></div>\n             <% if(!_.isUndefined(customMsgs)) { %>\n             <p><%= customMsgs.RequestFormMsg %></p>\n             <% } %>\n      </div>\n\t\t<form id="medReqForm" class="form-horizontal"  role="form">\n\t\t\t<div id="reqAccUserNameWrapper" class="form-group">\n\t          <label for="reqAccUserName" class="col-sm-3 control-label modal-control-label"><%= _t(\'rr_medReqName\') %></label>\n\t          <div class="col-sm-8">\n\t            <input type="text" class="form-control" id="reqAccUserName" placeholder="">\n\t            <div id="reqAccUserName_error" class="error-msg"></div>\n\t          </div>\n\t        </div>\t\n\t\t\t<div id="emailReqAccToWrapper" class="form-group">\n\t          <label for="emailReqAccTo" class="col-sm-3 control-label modal-control-label"><%= _t(\'rr_medReqRplyMail\') %></label>\n\t          <div class="col-sm-8">\n\t            <input type="email" class="form-control" id="emailReqAccTo" placeholder="">\n\t            <div id="emailReqAccTo_error" class="error-msg"></div>\n\t          </div>\n\t        </div>\n\t        <div id="emailReqAccConfWrapper" class="form-group">\n\t          <label for="emailReqAccConf" class="col-sm-3 control-label modal-control-label"><%= _t(\'rr_medReqConfEmail\') %></label>\n\t          <div class="col-sm-8">\n\t            <input type="email" class="form-control" id="emailReqAccConf" placeholder="">\n\t            <div id="emailReqAccConf_error" class="error-msg"></div>\n\t          </div>\n\t        </div>\n\t        \n\t        <% if (!_.isUndefined(customMsgs) && !_.isUndefined(customMsgs.RequestFormCustomField) && !_.isNull(customMsgs.RequestFormCustomField) && customMsgs.RequestFormCustomField.length > 0) { %> \n\t        <div id="reqBarCodeWrapper" class="form-group">\n\t          <label for="reqBarCode" class="col-sm-3 control-label modal-control-label"><%= customMsgs.RequestFormCustomField %></label>\n\t          <div class="col-sm-8">\n\t            <input type="text" class="form-control" id="reqBarCode" placeholder="">\n\t\t\t\t<input type="hidden" id="reqBarCodeMandatory" value="<%= customMsgs.RequestFormCustomFieldMandatory %>" >\t\n\t\t\t\t<input type="hidden" id="reqBarCodeMandatoryErrorMsg" value="<%= customMsgs.RequestFormCustomFieldMandatoryErrorMsg %>" >\t  \n\t            <div id="reqBarCode_error" class="error-msg"></div>\n\t          </div>\n\t        </div>\t\n\t        <% } %>\n\n\t        <% if (!_.isUndefined(customMsgs) && !_.isUndefined(customMsgs.RequestFormDropdownFieldlbl) && !_.isNull(customMsgs.RequestFormDropdownFieldlbl) && customMsgs.RequestFormDropdownFieldlbl.length > 0\n\t               && !_.isUndefined(customMsgs.RequestFormDropdownFieldvalues) && !_.isNull(customMsgs.RequestFormDropdownFieldvalues) && customMsgs.RequestFormDropdownFieldvalues.length > 0\n\t        ) { %> \n\t        <div id="reqDropDownWrapper" class="form-group">\n\t        \t<input type="hidden" id="reqDropDownMandatory" value="<%= customMsgs.RequestFormDropdownFieldvaluesMandatory %>" >\t\n\t        \t<input type="hidden" id="reqDropDownMandatoryErrorMsg" value="<%= customMsgs.RequestFormDropdownFieldvaluesMandatoryErrorMsg %>" >\t\n\n\t        \t<label for="reqDropDown" class="col-xs-3 modal-label control-label align-left"><%= customMsgs.RequestFormDropdownFieldlbl %></label>\n\t        \t<div class="col-xs-8">\n\t\t\t\t\t<% if ( customMsgs.RequestFormDropdownFieldvalues.length ==1 ) { %> \n\t\t\t\t\t\t<p class="pull-left labl-aln"><%= customMsgs.RequestFormDropdownFieldvalues[0] %></p>\n\t\t\t\t\t\t<select class=\'form-control hidden\' name=\'reqDropDown\' id=\'reqDropDown\'>\n\t\t\t\t\t\t\t<option selected="selected" value="<%= customMsgs.RequestFormDropdownFieldvalues[0] %>"</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t <% } else { %> \n\t\t\t\t\t\t<select class="form-control" name="reqDropDown" id="reqDropDown">\n\t\t\t\t\t\t\t<option value="-1"><%= _t(\'rr_dd_selectOne\') %></option>\n\t\t\t\t\t\t\t<% _.each(customMsgs.RequestFormDropdownFieldvalues, function(element, index, list){ %>\n\t\t\t\t\t\t\t\t <option value="<%= list[index] %>" ><%= list[index] %></option>\n\t\t\t\t\t\t\t <%  }); %>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t<% } %>\n\t\t\t\t\t\n\t\t\t\t   <div id="reqDropDown_error" class="error-msg"></div>\n\t        \t</div>\n\t        \t<div class="col-xs-1"></div>\n\t\t\t</div>\n\t        <% } %>\n\n\t        <div id="availReqAccesTypeWrapper" class="form-group">\n\t        \t<label for="availReqAccesType" class="col-xs-3 modal-label control-label align-left"><%= _t(\'rr_medReqAccDay\') %></label>\n\t        \t<div class="col-xs-8">\n\t        \t    <% if (  accDtl.requestPurchase === true && (_.isUndefined(accDtl.combinedPricesValues) || _.isNull(accDtl.combinedPricesValues) || accDtl.combinedPricesValues.length == 0) ) { %> \n\t\t\t\t\t\t <%= _t(\'rr_medReqAccesSel\') %>\n\t        \t    <% }  else  if ( accDtl.combinedPricesValues.length ==1 ) { %> \n\t\t\t\t\t\t<p class="pull-left labl-aln">\n\t\t\t\t\t\t    <%= accDtl.combinedPricesValues[0] %>\t\t\t\t\t\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<select class=\'form-control hidden\' name=\'availReqAccesType\' id=\'availReqAccesType\'>\n\t\t\t\t\t\t\t<option selected="selected" value="<%= accDtl.combinedPricesValues[0] %>"</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t <% } else { %> \n\t\t\t\t\t        <select class="form-control" name="availReqAccesType" id="availReqAccesType">\t\n\t\t\t\t\t\t\t<%  if ( accDtl.requestPurchase === true && ! _.isUndefined(accDtl.requestRequiredRange) && ! _.isNull(accDtl.requestRequiredRange) &&  accDtl.requestRequiredRange.length > 0 ) { %>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t <option value="-1"><%= _t(\'rr_medReqAccesSel\') %></option>\t\t\t\t\t\t\t \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<% } %>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<% _.each(accDtl.requestRequiredRange, function(element, index, list){ %>\n\t\t\t\t\t\t\t\t     <option value="<%= list[index] %>" ><%= _t(\'rr_checkOutDaysNum\', {DAYSNUM: \'\'+list[index] }) %></option>\t\t\t\t\t\t\t  \t\n\t\t\t\t\t\t\t\t <%  }); %>\n\t\t\t\t\t\t\t   </select>\t\t\t\t\t\t\t\n\t\t\t\t\t<% } %>\n\t\t\t\t   <div id="availReqAccesType_error" class="error-msg"></div>\n\t        \t</div>\n\t        \t<div class="col-xs-1"></div>\n\t\t\t</div>\n\t        <div id="reqAccMsgWrapper" class="form-group">\n\t          <label for="reqAccMsg" class="col-sm-3 control-label modal-control-label"><%= _t(\'rr_medReqMsgOpt\') %></label>\n\t          <div class="col-sm-8">\n\t            <textarea type="textarea" rows=\'4\' class="form-control" id="reqAccMsg" name="reqAccMsg" style="resize:none"></textarea>\n\t          </div>\n\t        </div> \t\n\t\t        \n\t\t</form>\n\t\t<div class="modal-footer">\n\t\t\t<button type="button" class="ga_request_cancel btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button>\n\t\t\t<button type="button" class="ga_request_submit btn btn-primary reqMedsub" id="reqFulAccSubmit" ><%= _t(\'rr_submit\') %></button>\n\t\t\n      </div>\n    </div>\n  </div>\n</div>\n \n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="copyTextTemp">\n \t\n<div class="modal fade signinModal" id="req_promptRead_modal" tabindex="-1" role="dialog" aria-hidden="true"  aria-labelledby=\'my_readprompt_tlt\'  >\n  <div class="modal-dialog">\n    <div id="modal-content" class="modal-content">\n     \x3c!-- <div class="modal-header">\n        <button type="button"  class="ga_loan_close close btn-close" data-dismiss="modal" ><span class="icon-close" aria-hidden="true"><svg focusable=\'false\' width=\'12\' height=\'12\' fill=\'white\' style=\'pointer-events:none;\' ><use xlink:href="#icon-close-lg"/></svg></span><span class="sr-only"><%= _t(\'rr_close\') %></span></button>\n        <h4 class="modal-title" id="my_readprompt_tlt"><%= _t(\'rr_checkOutLoanTitle\') %></h4>\n      </div> --\x3e\n      <div class="modal-body">\n             <h1 id="my_readprompt_tlt"><%= _t(\'rr_loanPromptHeading\') %></h1>\n\t        <p><%= customMsgs.LoanPromptMsg %></p>\n\t        \n             <div class="modal-book-title hide"><%= BiblioData.title !== "undefined"?BiblioData.title:_t(\'rr_na\')%></div>\n     \t\t <div class="row signin-form-container">\n\t\t    \t<div class="col-md-4 switch-pod">\n\t\t          \x3c!-- empty --\x3e\n\t\t        </div>\n\t\t    \t<div class="col-md-7 signin-pod">\n\t\t\t\t\t<form class="form-horizontal"  role="form">\n\t\t\t\t\t\t<div id="availReqPromptTypeWrapper" class="form-group">\n\t\t\t\t        \t<label for="availReqPromptType" class="col-xs-3 col-md-3 modal-label control-label align-left"><%= _t(\'rr_checkOutPerionLoan\') %></label>\n\t\t\t\t        \t<div class="col-xs-9 col-md-9">\n\t\t\t\t        \t\t<% if (!_.isUndefined(accDtl.daysRequiredRange) && !_.isNull(accDtl.daysRequiredRange)) { %> \n\t\t\t\t        \t\t   \t<% if (accDtl.daysRequiredRange.length ==1) { %> \n\t\t\t\t        \t\t   \t        <% if (accDtl.daysRequiredRange[0] ==1) { %> \n\t\t\t\t        \t\t   \t             <p class="pull-left labl-aln"> \n\t\t\t\t        \t\t   \t             <% if (accDtl.combinedPricesValues != null && accDtl.combinedPricesValues.length > 0) { %> \n\t\t\t\t        \t\t   \t             \t<%= accDtl.combinedPricesValues[0] %>\n\t\t\t\t        \t\t   \t             <% }else { %>\n\t\t\t\t        \t\t   \t             \t<%= _t(\'rr_checkOutOneNum\') %>\n\t\t\t\t        \t\t   \t             <% } %>\n\t\t\t\t        \t\t   \t             </p>\n\t\t\t\t        \t\t   \t        <% } else { %>\n\t\t\t\t        \t\t   \t             <p class="pull-left labl-aln">\n\t\t\t\t        \t\t   \t             <% if (accDtl.combinedPricesValues != null && accDtl.combinedPricesValues.length > 0) { %> \n\t\t\t\t        \t\t   \t             \t<%= accDtl.combinedPricesValues[0] %>\n\t\t\t\t        \t\t   \t             <% }else{ %>\n\t\t\t\t        \t\t   \t             \t<%= _t(\'rr_checkOutDaysNum\', {DAYSNUM: \'\'+accDtl.daysRequiredRange[0] }) %> \n\t\t\t\t        \t\t   \t             <% } %>\n\t\t\t\t        \t\t   \t             </p>\n\t\t\t\t        \t\t   \t         <% } %>\t\t\t\t\t\t\t\t   \t\t\t\n\t\t\t\t\t\t\t\t   \t\t\t <select class=\'form-control hidden\' name=\'availReqPromptType\' id=\'availReqPromptType\'>\n\t\t\t\t\t\t\t\t\t\t\t\t<option selected="selected" value="<%= accDtl.daysRequiredRange[0] %>"</option>\n\t\t\t\t\t\t\t\t\t\t\t </select>\n\t\t\t\t\t\t\t\t  \t  <% } else { %> \n\t\t\t\t\t\t\t\t  \t  \t\t\t<select class="form-control" name="availReqPromptType" id="availReqPromptType">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=""><%= _t(\'rr_checkOutSelectOpt\') %></option>\n\t\t\t\t\t\t\t\t     \t  \t\t\t<% _.each(accDtl.daysRequiredRange, function(element, index, list){ %>\n\t\t\t\t\t\t\t\t     \t  \t\t\t     <% if (list[index] ==1) { %>\n\t\t\t\t\t\t\t\t     \t  \t\t\t         <option value="<%= list[index] %>" >\n\t\t\t\t\t\t\t\t     \t  \t\t\t         <% if (accDtl.combinedPricesValues != null && accDtl.combinedPricesValues.length > 0) { %> \n\t\t\t\t\t\t\t\t\t     \t  \t\t\t          <% if(accDtl.combinedPricesValues[index].indexOf(list[index]+\' -\') === -1){ %>\n\t\t\t\t\t\t\t\t\t     \t  \t\t\t          \t<%= _t(\'rr_checkOutDaysNum\', {DAYSNUM: \'\'+list[index] }) %>\n\t\t\t\t\t\t\t\t\t     \t  \t\t\t          <% } %>\n\t\t\t\t\t\t\t\t     \t  \t\t\t         \t  <%= accDtl.combinedPricesValues[index] %>\n\t\t\t\t\t\t\t\t     \t  \t\t\t         <% } else {%>\n\t\t\t\t\t\t\t\t     \t  \t\t\t         \t<%= _t(\'rr_checkOutOneNum\') %> \n\t\t\t\t\t\t\t\t     \t  \t\t\t         <% } %>\n\t\t\t\t\t\t\t\t     \t  \t\t\t         </option>\n\t\t\t\t\t\t\t\t     \t  \t\t\t     <% } else { %>\n\t\t\t\t\t\t\t\t     \t  \t\t\t          <option value="<%= list[index] %>" > \n\t\t\t\t\t\t\t\t     \t  \t\t\t          <% if (accDtl.combinedPricesValues != null && accDtl.combinedPricesValues.length > 0) { %> \n\t\t\t\t\t\t\t\t\t     \t  \t\t\t          <% if(accDtl.combinedPricesValues[index].indexOf(list[index]+\' -\') === -1){ %>\n\t\t\t\t\t\t\t\t\t     \t  \t\t\t          \t<%= _t(\'rr_checkOutDaysNum\', {DAYSNUM: \'\'+list[index] }) %>\n\t\t\t\t\t\t\t\t\t     \t  \t\t\t          <% } %>\n\t\t\t\t\t\t\t\t     \t  \t\t\t          \t  <%= accDtl.combinedPricesValues[index] %>\n\t\t\t\t\t\t\t\t     \t  \t\t\t          <% } else {%>\n\t\t\t\t\t\t\t\t     \t  \t\t\t          \t<%= _t(\'rr_checkOutDaysNum\', {DAYSNUM: \'\'+list[index] }) %>\n\t\t\t\t\t\t\t\t     \t  \t\t\t          <% } %>\n\t\t\t\t\t\t\t\t     \t  \t\t\t          </option>\n\t\t\t\t\t\t\t\t     \t  \t\t\t      <% } %>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t <%  }); %>\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t   \t\t <% } %>\n\t\t\t\t\t\t\t   <% } %>\t\n\t\t\t\t\t\t\t   <div id="availReqPromptType_error" class="error-msg"></div>\n\t\t\t\t        \t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t        \x3c!-- //PD-10789. Leave the code her in case that we need this after ALA demo again.  \n\t\t\t\t        <div id="reqPromptCostCenterWrapper" class="form-group">\n\t\t\t\t          <label for="reqAccCostCenter" class="col-sm-3 col-md-3 control-label modal-control-label"><%= _t(\'rr_checkOutCostCenter\') %></label>\n\t\t\t\t          <div class="col-sm-9 col-md-9">\n\t\t\t\t            <input type="text" class="form-control" id="reqAccCostCenter" placeholder="">\n\t\t\t\t            <div id="reqAccCostCenter_error" class="error-msg"></div>\n\t\t\t\t          </div>\n\t\t\t\t        </div>\t\n\t\t\t\t        --\x3e\n\t\t\t\t        <% if (accDtl.showPriceMsg===true){ %>\n\t\t\t\t        \t<div id="spInvReadCont">\n\t\t\t\t\t            <div id="invoice_reader_msg"><%= _t(\'sp_stl_invoice_msg\') %></div>\n\t\t\t\n\t\t\t\t\t\t        <div id="spReaderCont" class="col-md-7 col-md-offset-3"><br>\n\t\t\t\t\t            \t<button type="submit" class="btn btn-primary btn-lg ga_loan_submit" id="reqPromptSubmit" ><%= _t(\'rr_checkOutLoan\') %></button>\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-primary btn-lg" id="spReaderCancel"><%= _t(\'rr_cancel\') %></button>\n\t\t\t\t\t\t        </div>\n\t\t\t\t\t        </div>\n\t\t\t\t        <% } else { %>\n\t\t\t\t        \t\x3c!--<button type="button" class="btn btn-default" data-dismiss="modal"><%= _t(\'rr_cancel\') %></button> --\x3e\n\t\t\t\t\t\t\t<button type="button" class="btn btn-primary btn-lg pull-right" id="reqPromptSubmit" ><%= _t(\'rr_checkOutLoan\') %></button>\n\t\t\t\t        <% } %>\n\t\t\t\t        <input type="hidden" id="operation" name="operation" value="<%= accDtl.operation %>" >\n\t\t\t\t\t</form>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<% if (!_.isUndefined(accDtl.requestRequiredRange) && !_.isNull(accDtl.requestRequiredRange) && accDtl.requestRequiredRange.length >1) { %> \n\t\t\t\t\t\t\t<p><span class="pull-left"><%= _t(\'rr_availableOnRequest\', {ABKMID: \'reqPromtForMediation\' }) %></span></p>\n\t\t\t \t\t\t<% } %>\t\n\t\t\t      \t</div>\n\t\t\t\t</div>\n\t\t      </div>\n    </div>\n  </div>\n</div>\n</div>\n\n\n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="copyTextTemp">\n<div class="modal fade signinModal" id="req_sp_promptRead_modal" tabindex="-1" role="dialog" aria-hidden="true"  aria-labelledby=\'my_readprompt_tlt\'  >\n  <div class="modal-dialog">\n    <div id="modal-content" class="modal-content">\n      <div class="modal-body">\n             <h1 id="my_readprompt_tlt"><%= _t(\'rr_sp_loanPromptHeading\') %></h1>\n\t        \n             <div class="modal-book-title hide"><%= BiblioData.title !== "undefined"?BiblioData.title:_t(\'rr_na\')%></div>\n     \t\t <div class="row signin-form-container">\n\t\t    \t<div class="col-md-12">\n\t\t\t\t\t<form class="form-horizontal"  role="form">\n\t\t\t\t\t\t<div id="availReqPromptTypeWrapper" class="form-group">\n\t\t\t\t        \t<div class="col-md-offset-1 col-md-9 align-left">\n\t\t\t\t        \t\t<% if (!_.isUndefined(accDtl.combinedPricesValues) && !_.isNull(accDtl.combinedPricesValues) && accDtl.combinedPricesValues.length > 0) { %> \t\t\t\n\t\t\t\t        \t\t   \t             <p class="pull-left labl-aln">\t\t\t\t     \t\t   \t           \n\t\t\t\t        \t\t   \t             \t<%= accDtl.combinedPricesValues[0] %>\n\t\t\t\t        \t\t   \t             </p>\n\t\t\t\t\t\t\t   <% } %>\t\n\t\t\t\t\t\t\t   <div id="availReqPromptType_error" class="error-msg"></div>\n\t\t\t\t        \t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<%  if( !_.isUndefined(accDtl.triggerNotByView) && !_.isNull(accDtl.triggerNotByView) ){ %>\n\t\t\t\t        \t<div id="invoice_msg" class="col-md-offset-1 col-md-9 align-left"><%= _t(\'rr_showprice_purchase_info_on_request\') %></div>\n\t\t\t\t        <% } else {%>\n\t\t\t\t       \t\t <div id="invoice_msg" class="col-md-offset-1 col-md-9 align-left"><%= _t(\'rr_showprice_loan_info_on_request\') %></div>\n\t\t\t\t         <% } %>\t\n\t\n\t\t\t\t        <div id="spContinue" class="col-md-7 col-md-offset-3"><br>\n\t\t\t\t\t\t\t<button type="button" class="btn btn-primary btn-lg" id="spReqPromptSubmit"><%= _t(\'rr_continue\') %></button>\n\t\t\t\t\t\t\t<button type="button" class="btn btn-primary btn-lg" id="spReqCancel"><%= _t(\'rr_cancel\') %></button>\n\t\t\t\t        </div>\n\t\t\t\t        <input type="hidden" id="operation" name="operation" value="<%= accDtl.operation %>" >\n\t\t\t\t\t</form>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<% if (!_.isUndefined(accDtl.requestRequiredRange) && !_.isNull(accDtl.requestRequiredRange) && accDtl.requestRequiredRange.length >1) { %> \n\t\t\t\t\t\t\t<p><span class="pull-left"><%= _t(\'rr_availableOnRequest\', {ABKMID: \'reqPromtForMediation\' }) %></span></p>\n\t\t\t \t\t\t<% } %>\t\n\t\t\t      \t</div>\t\t\t\t\t\n\t\t\t\t\t<div>\n\t\t\t\t\n\t\t\t      \t</div>\n\t\t\t\t</div>\n\t\t      </div>\n    </div>\n  </div>\n</div>\n</div>\n\n\n<\/script>\n'},function(t,e){t.exports='<script type="text/template" id="printTemp">\n \t\n<div class="modal fade ebcSigninModal" id="dfdModal" tabindex="-1" role="dialog"  aria-modal="true" aria-labelledby="preview-chapter-title">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-body" id="printModalBody">\n      \t\t\x3c!-- Header for xs and sm widths only --\x3e\n\t\t\t   <div class="row modal-header hidden-md hidden-lg">\n\t\t\t     <div class="col-xs-10" id="psmchapterId"></div>\n\t\t\t     <div class="col-xs-2 align-right">\n\t\t\t       <div class="modal-close-button">\n\t\t\t       <button class="outline ga_chapter_pdf_close" id="psm-close-button">\n\t\t\t         <span aria-hidden="true">\n\t\t          \t\t<svg viewBox="0 0 16 16" height="12" width="12" focusable="false">\n\t\t              \t\t<use xlink:href="#icon-close-light"/>\n\t\t            \t</svg>\n\t\t          \t </span>\n\t\t             <span class="sr-only">Close</span>\n\t\t\t       </button>\n\t\t\t       </div>\n\t\t\t     </div>\n\t\t\t   </div>\n\t\t\t\x3c!-- end Header for xs and sm widths only --\x3e\n\t\t\t<div class="row no-margin">\n\n\t\t    \x3c!-- preview pane --\x3e\n\t\t    <div class="col-md-3 hidden-xs hidden-sm preview-pane no-padding">\n\t\t        <div class="col-md-12">\n\t\t          <div class="table-layout-tb">\n\t\t            <div class="table-layout-tr">\n\t\t              <div class="table-layout-td">\n\t\t\n\t\t              \x3c!-- book cover --\x3e\n\t\t              <div class="preview-book-cover" role="presentation" aria-hidden="true" >\n\t\t                <img alt="" src="" id="p-book-cover-btn">\n\t\t              </div>\n\t\t              <div class="preview-chapter-title" id="bookTitle"></div>\n\t\t              \x3c!-- end book cover --\x3e\n\t\t\n\t\t              </div>\n\t\t            </div>\n\t\t          </div>\n\t\t\n\t\t        </div>\n\t\t      </div>\n\t\t      \x3c!-- end preview pane --\x3e\n\t\t\n\t\t      \x3c!-- begin right side of dialog --\x3e\n\t\t      <div class="col-xs-12 col-md-8 col-md-offset-1 form-pane no-padding">\x3c!-- this div holds all the screens plus the header --\x3e\n\t\t        <div class="col-md-12 hidden-xs hidden-sm align-right">\n\t\t          <div class="modal-close-button">\n\t\t          <button id="p-close-button" class="ga_chapter_pdf_close">\n\t\t          \t<span aria-hidden="true">\n\t\t          \t\t<svg viewBox="0 0 16 16" height="12" width="12" focusable="false">\n\t\t              \t\t<use xlink:href="#icon-close-light"/>\n\t\t            \t</svg>\n\t\t          \t</span>\n\t\t            <span class="sr-only">Close</span>\n\t\t          </button>\n\t\t\n\t\t          </div>\n\t\t        </div>\n\t\t\n\t\t        \x3c!-- screen header --\x3e\n\t\t        <div class="form-header clearfix">\n\t\t        <div class="col-md-12">\n\t\t          <h1 id=\'dfd-screen-title\'><%= _t(\'rr_preparing_pdf\')%></h1>\n\t\t        </div>\n\t\t        \x3c!-- do the steps here --\x3e\n\t\t        <div class="col-md-12 steps-container">\n\t\t          <div id=\'pstep1\' class="step-bar"><div id=\'pstep1fill\' class="step-bar-fill"></div></div>\n\t\t          <div id=\'pstep2\' class="step-bar"><div id=\'pstep2fill\' class="step-bar-fill"></div></div>\n\t\t          <div id=\'pstep3\' class="step-bar"><div id=\'pstep3progress\' class="step-bar-progress"></div></div>\n\t\t        </div>\n\t\t        \x3c!-- end steps --\x3e\n\t\t        </div>\n\t\t        \x3c!-- end screen header --\x3e\n\n\t\t        \x3c!-- ############################################################## --\x3e\n\t\t        \x3c!-- BEGIN SCREEN: screen-preparing --\x3e\n\t\t        <div id="printCreateWrapper" class="screen-print-create">\n\t\t\t        <div class="form-field-container">\n\t\t\t        <div class=\'signin-fork-container\'>\n\t\t\t        \t\t\t<div  class="text-danger">\n\t\t\t\t\t\t\t\t   <p id="printPageRangeError"> </p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t        <div class="col-md-12 signin-space-after signin-lg-message">\n\t\t\t\t                <%= _t(\'rr_take_moment\')%>\n\t\t\t\t        </div>\n\t\t\t\t        <div class="col-xs-12 col-md-11 col-md-offset-1 align-right">\n\t\t\t\t          <button id="ebc-preparing-download" type="button" class="btn btn-primary btn-lg btn-download-now disabled"><%= _t(\'rr_download\')%></button>\n\t\t\t\t        </div>\n\t\t\t        </div>\n\t\t\t        </div>\n\t\t        </div>\n\t\t        \x3c!-- END SCREEN: screen-preparing --\x3e\n\t\t        \x3c!-- ############################################################## --\x3e\n\t\t        \n\t\t        \x3c!-- ############################################################## --\x3e\n\t\t        \x3c!-- BEGIN SCREEN: screen-download-ready --\x3e\n\t        \t<div id="printOpenWrapper">\n        \t\t\t <div class="form-field-container">\n\t\t\t          <div class="download-app-container col-md-12">\n\t\t\t          <div class="col-md-6 align-center space-after">\n\t\t\t            <div class="app-container">\n\t\t\t              <svg width="62" height="72" viewBox="0 0 62 72" class="use-format-type" focusable="false">\n\t\t\t                <use xlink:href="#download-format-pdf"></use>\n\t\t\t              </svg>\n\t\t\t              <div class="use-app-help"><%= _t(\'rr_drmfree_pdf_app_help\')%> </div>\n\t\t\t              <button id="downloadBookPDF" type="button" class="btn btn-primary"><%= _t(\'rr_download_pdf\')%></button>\n\t\t\t              <div class="use-format-help"><%= _t(\'rr_file_size\', {FKB: Math.round(BiblioData.fileSize/1024),FMB:(BiblioData.fileSize/(1024*1024)).toFixed(1)}) %></div>\n\t\t\t            </div>\n\t\t\t          </div>\n\t\t\t        </div>\x3c!-- end signin-fork-container--\x3e\n\t\t          </div>\x3c!-- end form-field-container --\x3e\n\t\t        </div>\n\t\t        \n\t\t        \x3c!-- END SCREEN: screen-download-ready --\x3e\n\t\t        \x3c!-- BEGIN SCREEN: drm free full-download-selection --\x3e\n\t\t\t\t\t<div id="fullDownloadSelectionWrapper">\n\n\t\t\t        \t<div class="form-field-container">\n\t\t\t\n\t\t\t\t          <div class="select-app-container col-md-12">\n\t\t\t\t\n\t\t\t\t          <div class="col-md-6 align-center space-after">\n\t\t\t\t            <div class="app-container">\n\t\t\t\t              <svg width="62" height="72" viewBox="0 0 62 72" class="use-format-type" focusable="false">\n\t\t\t\t                <use xlink:href="#download-format-pdf"></use>\n\t\t\t\t              </svg>\n\t\t\t\t              <div class="use-app-help"><%= _t(\'rr_drmfree_pdf_app_help\')%> </div>\n\t\t\t\t              <button id="pdfFullDownloadButton" type="button" class="btn btn-primary"><%= _t(\'rr_download_pdf\')%></button>\n\t\t\t\t              <div class="use-format-help"><%= _t(\'rr_file_size\', {FKB: Math.round(BiblioData.fileSize/1024),FMB:(BiblioData.fileSize/(1024*1024)).toFixed(1)}) %></div>\n\t\t\t\t            </div>\n\t\t\t\t          </div>\n\t\t\t\t          <div class="col-md-6 align-center space-after">\n\t\t\t\t              <div class="app-container" style="min-height:275px;">\n\t\t\t\t              <svg width="62" height="72" viewBox="0 0 62 72" class="use-format-type" focusable="false">\n\t\t\t\t                <use xlink:href="#download-format-epub"></use>\n\t\t\t\t              </svg>\n\t\t\t\t              <div class="use-app-help"><%= _t(\'rr_drmfree_epub_app_help\')%> </div>\n\t\t\t\t                <button id="epubFullDownloadButton" type="button" class="btn btn-primary"><%= _t(\'rr_download_epub\')%></button>\n\t\t\t\t              </div>\n\t\t\t\t          </div>\n\t\t\t\t        </div>\x3c!-- end signin-fork-container--\x3e\n\t\t\t          </div>\x3c!-- end form-field-container --\x3e\n\t\t\t        </div>\n\t\t\t\t\t\x3c!-- END SCREEN: screen-full-download-final --\x3e\n\t\t        \x3c!-- ############################################################## --\x3e\n\t\t        <div style="display:none" class="screen-print-error text-danger" id=\'errorWrapper\'>\n\t\t\t        <div class="col-md-12 signin-space-after signin-lg-message ga_chapter_pdf_download_error"></div>\n\t\t\t    </div>\n  \t\n\t  </div>\n    </div>\x3c!-- /.modal-content --\x3e\n  </div>\x3c!-- /.modal-dialog --\x3e\n</div>\x3c!-- /.modal --\x3e\n</div>\n</div>\n\n \n<\/script>\n'},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(8),n(1),n(2),n(82),n(83),n(16),n(85),n(94),n(17),n(97),n(99),n(101),n(102),n(103)],void 0===(a=function(t,e,n,o,a,r,s,l,c,d,u,p,h,f,g,m,v){"use strict";return e.ItemView.extend({template:n.readerToolBarTemplate,id:"toolbar",initialize:function(t){if(1===t.hasAc)this.gbData=t;else if(0===t.hasAc)return;a.on("atbs",this.toolAddToBookshelf,this),a.on("sblnk",this.toolLink,this),a.on("cpgt",this.toolCopy,this),a.on("tbdl",this.toolDownload,this),a.on("tbshct",this.toolCite,this),a.on("tbsgn",this.usrSignIn,this),a.on("tbgbsgn",this.usrGSignIn,this),a.on("cklnpmt",this.chkLoan,this),a.on("spcklnpmt",this.showPriceChkLoan,this),a.on("mdreq",this.medReq,this),a.on("taatb",this.toolAnnoteAddToBookshelf,this),a.on("fttowd",this.reSizeEffectWidth,this)},ui:{toolZoomSmaller:"#tool-viewsmaller",toolZoomLarger:"#tool-viewlarger",toolBarCurrentPage:"#current-page",toolCurrentPageLocation:"#tool-current-page-loc",toolGoToPage:"#tool-pagegoto-text",toolPageLocationWrap:"#tool-pageloc",toolPageGoToWrap:"#tool-pagegoto",toolHighlight:"#toolHighlight",toolNote:"#toolNote",toolBookmark:"#toolBookmark",toolCite:"#toolCite",toolDownload:"#toolDownload",toolCopy:"#toolCopy",toolPrint:"#toolPrint",toolAddToBookshelf:"#toolAddToBookshelf",toolLink:"#toolLink"},events:{"click #tool-viewsmaller":"toolZoomOut","click #tool-viewlarger":"toolZoomIn","click #tool-fitToWidth":"reSizeEffectWidth","click #tool-fitToHeight":"reSizeEffectHeight","click #tool-pageloc":"togglePageNumberModeToGoTo","keypress #tool-pagegoto-text":"togglePageNumberModeToView","click #tool-pager-prev":"prevPage","click #tool-pager-next":"nextPage","click #toolHighlight":"toolHighlight","click #toolNote":"toolNote","click #toolBookmark":"toolBookmark","click #toolCite":"toolCite","click #toolDownload":"toolDownload","click #toolCopy":"toolCopy","click #toolChapterDownload":"toolChapter","click #toolPrint":"toolPrint","click #toolAddToBookshelf":"toolAddToBookshelf","click #toolLink":"toolLink"},onRender:function(){void 0!==this.gbData&&1===this.gbData.hasAc&&(this.$el.find("#current-page").val(this.gbData.ppg),this.$el.find(".total-number-of-pages").empty().html(o.t("rr_page_of")+this.gbData.tmpLpg[this.gbData.tmpLpg.length-1])),this.$el.find("#tool-pagegoto").hide(),i.isUndefined(this.gbData)||(this.gbData.ppg<=1&&(this.$el.find("#tool-pager-prev").prop("disabled",!0),this.$el.find("#tool-pager-prev").addClass("tool-btn-disabled")),this.gbData.ppg>1&&(this.$el.find("#tool-pager-prev").removeProp("disabled"),this.$el.find("#tool-pager-prev").removeClass("tool-btn-disabled")),this.gbData.tmpLpg.length>=2&&(this.$el.find("#tool-pager-next").removeProp("disabled"),this.$el.find("#tool-pager-next").removeClass("tool-btn-disabled")),this.gbData.ppg>=this.gbData.tmpLpg.length&&(this.$el.find("#tool-pager-next").prop("disabled",!0),this.$el.find("#tool-pager-next").addClass("tool-btn-disabled")))},toolZoomOut:function(t){var e=this.gbData.zm;e<=.5?(this.gbData.zm=.5,this.ui.toolZoomLarger.removeProp("disabled"),this.ui.toolZoomSmaller.prop("disabled",!0),this.ui.toolZoomSmaller.addClass("tool-btn-disabled"),this.ui.toolZoomLarger.removeClass("tool-btn-disabled")):e>4?(this.gbData.zm=4,this.ui.toolZoomLarger.prop("disabled",!0),this.ui.toolZoomLarger.addClass("tool-btn-disabled")):e>2&&e<=4?(this.gbData.zm=2,this.ui.toolZoomLarger.removeProp("disabled"),this.ui.toolZoomLarger.removeClass("tool-btn-disabled")):e>1&&e<=2?this.gbData.zm=1:e>.5&&e<=1?(this.gbData.zm=.5,this.ui.toolZoomSmaller.prop("disabled",!0),this.ui.toolZoomSmaller.addClass("tool-btn-disabled")):e<.5&&(this.gbData.zm=.5,this.ui.toolZoomSmaller.removeProp("disabled"),this.ui.toolZoomLarger.prop("disabled",!0),this.ui.toolZoomLarger.addClass("tool-btn-disabled"),this.ui.toolZoomSmaller.removeClass("tool-btn-disabled")),a.trigger("rspzl",parseInt(this.ui.toolBarCurrentPage.val())),this.gbData.whatClicked="zoomOut"},toolZoomIn:function(t){var e=this.gbData.zm;e>=4?(this.gbData.zm=4,this.ui.toolZoomLarger.prop("disabled",!0),this.ui.toolZoomSmaller.removeProp("disabled"),this.ui.toolZoomLarger.addClass("tool-btn-disabled")):e>=2&&e<4?(this.gbData.zm=4,this.ui.toolZoomLarger.prop("disabled",!0),this.ui.toolZoomSmaller.removeProp("disabled"),this.ui.toolZoomLarger.addClass("tool-btn-disabled"),this.ui.toolZoomSmaller.removeClass("tool-btn-disabled")):e>=1&&e<2?this.gbData.zm=2:e>=.5&&e<1?(this.gbData.zm=1,this.ui.toolZoomSmaller.removeProp("disabled"),this.ui.toolZoomSmaller.removeClass("tool-btn-disabled")):e<.5&&(this.gbData.zm=.5,this.ui.toolZoomSmaller.prop("disabled",!0),this.ui.toolZoomLarger.removeProp("disabled"),this.ui.toolZoomSmaller.addClass("tool-btn-disabled"),this.ui.toolZoomLarger.removeClass("tool-btn-disabled")),a.trigger("rspzl",parseInt(this.ui.toolBarCurrentPage.val())),this.gbData.whatClicked="zoomIn"},reSizeEffectWidth:function(t){this.ui.toolZoomSmaller.removeProp("disabled",!0),this.ui.toolZoomLarger.removeProp("disabled",!0),this.ui.toolZoomSmaller.removeClass("tool-btn-disabled"),this.ui.toolZoomLarger.removeClass("tool-btn-disabled"),a.trigger("rspwd",parseInt(this.ui.toolBarCurrentPage.val())),t.preventDefault(),this.gbData.whatClicked="fitWidth"},reSizeEffectHeight:function(t){this.ui.toolZoomSmaller.removeProp("disabled",!0),this.ui.toolZoomLarger.removeProp("disabled",!0),a.trigger("rspht",parseInt(this.ui.toolBarCurrentPage.val())),t.preventDefault(),this.gbData.whatClicked="fitHeight"},togglePageNumberModeToGoTo:function(){this.ui.toolPageLocationWrap.hide(),this.ui.toolPageGoToWrap.show(),this.ui.toolGoToPage.val(""),this.ui.toolGoToPage.focus(),this.gbData.whatClicked="goToPage"},togglePageNumberModeToView:function(e){var n=e.which;if(null===n||0===n||8===n||9===n||27===n)return!0;var i=new RegExp("^[a-zA-Z0-9]+$"),a=String.fromCharCode(e.charCode?e.charCode:e.which);if(i.test(a))return!0;var s=t(e.target).val();if(!(13===n&&s.length>0))return e.preventDefault(),!1;this.ui.toolPageLocationWrap.show(),this.ui.toolPageGoToWrap.hide(),t("#toolbar-navbar-collapse").hasClass("in")&&setTimeout(function(){t("#toolbar-navbar-collapse.navbar-collapse").collapse("hide")},650);var l;-1==(l=r.inArrayCaseInsensitive(s,this.gbData.tmpLpg))?t("#dialogModalAlertError").modal("show").find("#msg").empty().html(o.t("rr_page_number_not_found")):(this.ui.toolBarCurrentPage.val(l+1),this.ui.toolCurrentPageLocation.empty().html(this.gbData.tmpLpg[l]),this.jumpToPage()),this.gbData.whatClicked="goToPageView",e.preventDefault()},prevPage:function(){var t=parseInt(this.ui.toolBarCurrentPage.val())-1;t=t>=1?t:1;var e=this.gbData.tmpLpg[t-1]||t;void 0!==e&&(this.ui.toolBarCurrentPage.val(t),this.ui.toolCurrentPageLocation.empty().html(e),this.jumpToPage()),this.gbData.whatClicked="prevPage"},nextPage:function(){var t=parseInt(this.ui.toolBarCurrentPage.val())+1;t=t<=this.gbData.tpg?t:this.gbData.tpg;var e=this.gbData.tmpLpg[t-1]||t;void 0!==e&&(this.ui.toolBarCurrentPage.val(t),this.ui.toolCurrentPageLocation.empty().html(e),this.jumpToPage()),this.gbData.whatClicked="nxtPage"},jumpToPage:function(){a.trigger("jtp",parseInt(this.ui.toolBarCurrentPage.val())),this.gbData.whatClicked="jumpPage"},toolHighlight:function(){if(!i.isUndefined(this.gbData)&&!t.isEmptyObject(this.gbData.BiblioData)){if(!this.gbData.DocUser.signedIn)return void a.trigger("tbsgn","highlight");a.trigger("tCH",parseInt(this.ui.toolBarCurrentPage.val())),this.gbData.whatClicked="toolHigh"}},toolNote:function(){if(!i.isUndefined(this.gbData)&&!t.isEmptyObject(this.gbData.BiblioData)){if(!this.gbData.DocUser.signedIn)return void a.trigger("tbsgn","add_notes");a.trigger("tCPN",parseInt(this.ui.toolBarCurrentPage.val())),this.gbData.whatClicked="toolNote"}},toolBookmark:function(){if(!i.isUndefined(this.gbData)&&!t.isEmptyObject(this.gbData.BiblioData)){if(!this.gbData.DocUser.signedIn)return void a.trigger("tbsgn","to_bookmark");a.trigger("tBM",parseInt(this.ui.toolBarCurrentPage.val())),this.gbData.whatClicked="toolBookMark"}},toolCite:function(){void 0===this.gbData||t.isEmptyObject(this.gbData.BiblioData)||(0===t("#firstCitetWrapper").length&&t('<div id="firstCitetWrapper"></div>').appendTo("#emptyTmpWrapper"),this.citeLink=new f({ppg:t("#current-page").val(),DocUser:this.gbData.DocUser}),this.gbData.whatClicked="toolCite")},toolDownload:function(){if(void 0!==this.gbData&&!t.isEmptyObject(this.gbData.BiblioData)){if(!this.gbData.DocUser.signedIn)return void a.trigger("tbsgn","q_download");0===t("#fullDownloadWrapper").length&&t('<div id="fullDownloadWrapper"></div>').appendTo("#emptyTmpWrapper"),this.downloadLink=new u({DocUser:this.gbData.DocUser,BiblioData:this.gbData.BiblioData}),this.gbData.whatClicked="toolDown"}},toolCopy:function(){if(void 0!==this.gbData&&!t.isEmptyObject(this.gbData.BiblioData)){if(!this.gbData.DocUser.signedIn&&!this.gbData.DocUser.usrGuest)return void a.trigger("tbsgn","copy","g");t("#toolCopy").prop("disabled",!0),t("#toolCopy").addClass("tool-btn-disabled"),0===t("#copyTextWrapper").length&&t('<div id="copyTextWrapper"></div>').appendTo("#emptyTmpWrapper"),this.shareLink=new l({currentSelections:this.gbData.finalSelections,encID:this.gbData.encID,DocUser:this.gbData.DocUser}),this.gbData.whatClicked="toolCopy"}},toolPrint:function(e){if(void 0!==this.gbData&&!t.isEmptyObject(this.gbData.BiblioData)){if(!this.gbData.DocUser.signedIn&&!this.gbData.DocUser.usrGuest)return void a.trigger("tbsgn","toolPrint"===t(e.currentTarget).attr("id")?"print":"chapter_d","g");0===t("#printMainWrapper").length&&t('<div id="printMainWrapper"></div>').appendTo("#emptyTmpWrapper"),this.gbData.DocUser.usChpt="toolPrint"===t(e.currentTarget).attr("id")?0:1;var n,i=this,o=0,s="";if(n=void 0===this.gbData.whatClicked||t.isEmptyObject(this.gbData.whatClicked)||"Chapter"!==this.gbData.whatClicked?"printPage.action?op=alo&docID="+this.gbData.BiblioData.docID+"&firstPageAccessed=PRINT":"DAY_REQUIRED"==this.gbData.DocUser.downloadDeniedStatus?"printPage.action?op=alo&docID="+this.gbData.BiblioData.docID+"&firstPageAccessed=ChapterDownload":"checkDrmAccess.action?docID="+this.gbData.BiblioData.docID+"&type=print&dt="+(new Date).getTime(),t.ajax({url:n,async:!1,cache:!1,success:function(t){"SUCCESS"===t.status?o=0:"FAILURE"===t.status&&(o=2,s=t,i.usrNSignResp(s))},error:function(e){0!=e.status&&302!=e.status&&"NetworkError"!==e.statusText||(o=2,window.location.href=r.updateQueryStringWithOutHashSupport(location.href,"ppg",t("#current-page").val()))}}),o>0)return;this.printLink=void 0!==this.printLink?this.printLink:new d({BiblioData:this.gbData.BiblioData,DocUser:this.gbData.DocUser}),a.trigger("openSCN","radioPrint")}},toolChapter:function(t){this.gbData.whatClicked="Chapter",this.toolPrint(t),this.gbData.whatClicked=""},toolAddToBookshelf:function(){if(void 0!==this.gbData&&!t.isEmptyObject(this.gbData.BiblioData)){if(!this.gbData.DocUser.signedIn)return void a.trigger("tbsgn","add_to_bookshelf");var e="remoteBookshelf.api?remote_id="+this.gbData.ssen+"&op=add&docid="+this.gbData.docID,n=this.gbData.uAccsMdRR>0?1:0;t.ajax({url:e,async:!1,dataType:"json",success:function(e){if(void 0!==e.status&&void 0===e.errorCode){0!==e["status-code"]&&9515!==e["status-code"]||(t("#toolAddToBookshelf").removeClass("icon-bookshelf-add").addClass("bookshelf-added icon-bookshelf-added tool-btn-disabled").attr("disabled","disabled"),t("#toolAddToBookshelf > .icon-bookshelf-add").removeClass("icon-bookshelf-add").addClass("icon-bookshelf-added tool-btn-disabled").html('<svg focusable="false" width="20" height="20" style="pointer-events:none;"  ><use xlink:href="#icon-bookshelf-added" /></svg>'),t("#bookDetailBookShelf").attr("disabled","disabled"),t("#bookDetailBookShelf > .icon-bookshelf-add").removeClass("icon-bookshelf-add").addClass("icon-bookshelf-added tool-btn-disabled").html('<svg focusable="false" width="20" height="20" style="pointer-events:none;"  ><use xlink:href="#icon-bookshelf-added" /></svg>'));var i=t("#dialog-success-msg");i.find("#sMsg").empty().html(e["status-message"]),i.show().fadeOut(5e3),n>0&&(i.attr("tabindex","-1"),i.focus())}else{if(void 0===e.errorCode||"SESSION_TIMED_OUT"!==e.errorCode&&"LOGIN_REQUIRED"!==e.errorCode)t("#dialogModalAlertError").modal("show").find("#msg").empty().html(o.t("rr_please_try_again"));else a.trigger("tbsgn","add_to_bookshelf")}},error:function(e,n,i){t("#dialogModalAlertError").modal("show").find("#msg").empty().html(o.t("rr_please_try_again"))}}),this.gbData.whatClicked="toolBookshelf"}},toolLink:function(){void 0!==this.gbData&&(0===t("#shareBookLinkWrapper").length&&t('<div id="shareBookLinkWrapper"></div>').appendTo("#emptyTmpWrapper"),this.shareLink=new s({BiblioData:this.gbData.BiblioData,docID:this.gbData.docID}),this.gbData.whatClicked="toolLink")},showErrorMessage:function(){t("#dialogModalAlertError").show().find("#msg").empty().html(o.t("rr_please_refresh_page"))},usrSignIn:function(e,n){0===t("#userSignInWrapper").length&&t('<div id="userSignInWrapper"></div>').appendTo("#emptyTmpWrapper"),this.usrSigns=new h({modalKey:e,modalOp:n||"s",docID:this.gbData.docID})},usrGSignIn:function(t,e){this.usrSignIn(t,e)},usrNSignResp:function(e,n){if("LOGIN_REQUIRED"===e.errorCode)a.trigger("tbsgn","print","g");else if("LOGIN_REQUIRED_G"===e.errorCode)a.trigger("tbsgn","print","s");else if("LOGIN_REQUIRED_M"===e.errorCode)a.trigger("tbsgn","mediation_request","s");else if("NO_ACCESS_BROWSE_PRINT"===e.errorCode)t("#toolChapterDownload").attr("disabled","disabled").prop("title",o.t("rr_print_not_offered")),t("#toolPrint").attr("disabled","disabled").prop("title",o.t("rr_print_not_offered")),t("#toolChapterDownload").addClass("tool-btn-disabled"),t("#toolPrint").addClass("tool-btn-disabled");else if("NO_ACCESS_BROWSE_COPY"===e.errorCode)t("#toolCopy").attr("disabled","disabled").prop("title",o.t("rr_copy_not_offered")),t("#contextMenuPop> #contextCopy").attr("disabled","disabled").prop("title",o.t("rr_copy_not_offered")),t("#toolCopy").addClass("tool-btn-disabled");else if("EXPIRING"===e.errorCode||"REQUEST_PENDING"===e.errorCode){location.protocol,location.hostname,location.port&&location.port,location.pathname;window.location.href=r.updateQueryStringWithOutHashSupport(location.href,"ppg",t("#current-page").val())}else"DAY_REQUIRED"===e.errorCode?a.trigger("cklnpmt",e):"SHOW_PRICE"===e.errorCode?a.trigger("spcklnpmt",e):"REQUEST_REQUIRED"===e.errorCode&&a.trigger("mdreq",e)},chkLoan:function(e,n){if(void 0!==this.gbData&&!t.isEmptyObject(this.gbData.BiblioData)){0===t("#loanTextWrapper").length&&t('<div id="loanTextWrapper"></div>').appendTo("#emptyTmpWrapper");var i="";"toolCopy"===this.gbData.whatClicked?i="Copy":"toolPrint"===this.gbData.whatClicked&&(i=1===this.gbData.DocUser.usChpt?"ChapterDownload":"Print"),this.shareLink=new g({triggerType:i,customMsgs:e.customMsgs,accDtl:e.accDtl,BiblioData:this.gbData.BiblioData,DocUser:this.gbData.DocUser})}},showPriceChkLoan:function(e,n){if(void 0!==this.gbData&&!t.isEmptyObject(this.gbData.BiblioData)){0===t("#loanShowPriceTextWrapper").length&&t('<div id="loanShowPriceTextWrapper"></div>').appendTo("#emptyTmpWrapper");var i="";"toolCopy"===this.gbData.whatClicked?i="Copy":"toolPrint"!==this.gbData.whatClicked&&""!==this.gbData.whatClicked||(i=1===this.gbData.DocUser.usChpt?"ChapterDownload":"Print"),this.shareLink=new m({triggerType:i,customMsgs:e.customMsgs,accDtl:e.accDtl,BiblioData:this.gbData.BiblioData,DocUser:this.gbData.DocUser})}},medReq:function(e,n){if(void 0!==this.gbData&&!t.isEmptyObject(this.gbData.BiblioData)){if(!this.gbData.DocUser.signedIn)return void a.trigger("tbsgn","mediation_request");0===t("#medTextWrapper").length&&t('<div id="medTextWrapper"></div>').appendTo("#emptyTmpWrapper");var i="";"toolCopy"===this.gbData.whatClicked?i="Copy":"toolPrint"===this.gbData.whatClicked&&(i=1===this.gbData.DocUser.usChpt?"ChapterDownload":"Print"),this.shareLink=new v({triggerType:i,customMsgs:e.customMsgs,accDtl:e.accDtl,BiblioData:this.gbData.BiblioData,DocUser:this.gbData.DocUser})}},toolAnnoteAddToBookshelf:function(){t("#toolAddToBookshelf").removeClass("icon-bookshelf-add").addClass("bookshelf-added icon-bookshelf-added tool-btn-disabled").attr("disabled","disabled"),t("#toolAddToBookshelf > .icon-bookshelf-add").removeClass("icon-bookshelf-add").addClass("icon-bookshelf-added tool-btn-disabled").html('<svg focusable="false" width="20" height="20" style="pointer-events:none;"  ><use xlink:href="#icon-bookshelf-added" /></svg>'),t("#bookDetailBookShelf").attr("disabled","disabled"),t("#bookDetailBookShelf > .icon-bookshelf-add").removeClass("icon-bookshelf-add").addClass("icon-bookshelf-added tool-btn-disabled").html('<svg focusable="false" width="20" height="20" style="pointer-events:none;"  ><use xlink:href="#icon-bookshelf-added" /></svg>')}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(2),n(13)],void 0===(a=function(t,e,n,o,a,r){"use strict";return e.ItemView.extend({template:n.readerShareLinkTemplate,el:"#shareBookLinkWrapper",initialize:function(e){var n=i.extend({},e),o="WinOS";-1!=navigator.appVersion.indexOf("Mac")&&(o="MacOS"),n.OSName=o;var a=t("#readerPQURL").html();window.location.protocol.indexOf("https:")>-1&&(a=a.replace("http://","https://")),a+=(-1===a.indexOf("?")?"?":"&")+"ppg="+t("#current-page").val(),n.shareURL=a,this.model=new r(n),this.model.bind("sync",this.render,this),this.render()},events:{"hidden.bs.modal":"goingToHideMode","keydown #shareBookLink":"lookForCopy"},onRender:function(){-1==navigator.appVersion.indexOf("Mac")&&this.$el.find("#shareBookLink").attr("aria-labelledby","myShareModalLabel"),this.uAccsMdRR="no"===t("#enableAccessiblity").val()?1:0,0===this.uAccsMdRR&&t.data(this,"testTimeoutFocus",setTimeout(function(){t("#shareUrl").focus(),t("#shareUrl").select()},550)),t("#shareBookLink").modal("show").focus()},goingToHideMode:function(){this.doneCopy(),this.remove(),t("#toolLink").focus()},lookForCopy:function(e){var n=e.which;e.ctrlKey&&67===n&&(t("#shareUrl").focus(),t("#shareUrl").select())},doneCopy:function(e){t("#shareUrl").focus(),t("#shareUrl").select(),t("#shareUrl").trigger({type:"keydown",which:67})}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(2),n(84),n(6),n(8)],void 0===(a=function(t,e,n,o,a,r,s,l){"use strict";return e.ItemView.extend({template:n.readerCopyTextTemplate,el:"#copyTextWrapper",initialize:function(t){if(this.ck=a.readCookie("ESESSIONID"),null!==this.ck){this.pebr=new s,this.pebr.init(this.ck);var e=i.extend({},this.pebr,{ck:this.ck},t);this.model=new r(e),this.model.bind("sync",this.render,this),this.model.fetch()}},events:{"select .modal-editable-div":"selectEditableContentText","focusout .modal-editable-div":"deselectEditableContentText"},onRender:function(){if("FAILURE"===this.model.get("status")&&"NO_PAGE_TEXT"!==this.model.get("errorCode")&&"PAGE_VIEW_EXHAUSTED"!==this.model.get("errorCode"))return this.usrNSignResp(this.model.attributes),void("NO_ACCESS_BROWSE_COPY"!==this.model.get("errorCode")&&(t("#toolCopy").removeAttr("disabled"),t("#toolCopy").removeClass("tool-btn-disabled")));if(t.data(this,"testTimeoutFocus",setTimeout(function(){t("#copyContent").focus(),t("#copyContent").select()},550)),o.trigger("resetPgSel",!0,!0),o.trigger("clsPgSel",this.model.get("pageNum"),!0),t("#copyModal").modal("show"),"NO_PAGE_TEXT"===this.model.get("errorCode")&&(t("#toolCopy").removeAttr("disabled"),t("#toolCopy").removeClass("tool-btn-disabled")),!i.isUndefined(this.model.get("status-code"))&&1!==this.model.get("status-code")){var e=parseInt(this.model.get("remainingCopy"))||0;t("#remainingCopy").length>0&&t("#remainingCopy").empty().text(e),void 0!==this.model.get("DocUser")&&(this.model.get("DocUser").remainingCopyCount=e),e<=0?(t("#toolCopy").attr("disabled","disabled").prop("title",l.t("rr_remaining_copy_allowance")),t("#contextMenuPop> #contextCopy").attr("disabled","disabled").prop("title",l.t("rr_remaining_copy_allowance")),t("#toolCopy").addClass("tool-btn-disabled")):(t("#toolCopy").removeAttr("disabled"),t("#toolCopy").removeClass("tool-btn-disabled"))}},templateHelpers:{something:function(){return"Do stuff with "+this.page.parts+" because it's awesome."},wrapDashErrorMessage:function(){return void 0!==this["status-message"]?this["status-message"]:l.t("rr_content_not_allowed")}},goingToHideMode:function(){this.doneCopy(),this.remove()},lookForCopy:function(e){e.preventDefault(),t("#copyContent").focus(),t("#copyContent").select()},doneCopy:function(e){t("#copyContent").focus(),t("#copyContent").select(),t("#copyContent").trigger({type:"keydown",which:67})},usrNSignResp:function(e,n){if("LOGIN_REQUIRED"===e.errorCode)o.trigger("tbsgn","copy","g");else if("LOGIN_REQUIRED_G"===e.errorCode)o.trigger("tbsgn","copy","s");else if("LOGIN_REQUIRED_M"===e.errorCode)o.trigger("tbsgn","mediation_request","s");else if("NO_ACCESS_BROWSE_PRINT"===e.errorCode)t("#toolChapterDownload").attr("disabled","disabled").prop("title",l.t("rr_print_not_offered")),t("#toolPrint").attr("disabled","disabled").prop("title",l.t("rr_print_not_offered")),t("#toolChapterDownload").addClass("tool-btn-disabled"),t("#toolPrint").addClass("tool-btn-disabled");else if("NO_ACCESS_BROWSE_COPY"===e.errorCode)t("#toolCopy").attr("disabled","disabled").prop("title",l.t("rr_copy_not_offered")),t("#contextMenuPop> #contextCopy").attr("disabled","disabled").hide(),t("#toolCopy").addClass("tool-btn-disabled");else if("EXPIRING"===e.errorCode||"REQUEST_PENDING"===e.errorCode){location.protocol,location.hostname,location.port&&location.port,location.pathname;window.location.href=a.updateQueryStringWithOutHashSupport(location.href,"ppg",t("#current-page").val())}else"DAY_REQUIRED"===e.errorCode?o.trigger("cklnpmt",e):"SHOW_PRICE"===e.errorCode?o.trigger("spcklnpmt",e):"REQUEST_REQUIRED"===e.errorCode&&o.trigger("mdreq",e)},selectEditableContentText:function(t){var e,n,i=document,o=t.currentTarget;i.body.createTextRange?((e=document.body.createTextRange()).moveToElementText(o),e.select()):window.getSelection&&(n=window.getSelection(),(e=document.createRange()).selectNodeContents(o),n.removeAllRanges(),n.addRange(e))},deselectEditableContentText:function(t){window.getSelection()&&window.getSelection().removeAllRanges?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({url:function(){var t=0,n=5e4,i=e("#current-page").val();!0===this.cpTmp.currentSelections.active&&(i=this.cpTmp.currentSelections.active_page,t=this.cpTmp.currentSelections.s_quad,n=this.cpTmp.currentSelections.e_quad);var o="op=copy&encID="+this.cpTmp.encID+"&page=("+i+")&start="+t+"&end="+n+"&offset="+(new Date).getTimezoneOffset();return"remoteDocServer.api?remote_id="+this.cpTmp.ck+"&encrypted="+this.cpTmp.enc(o)+"&nq=1"},parse:function(t,e){if(void 0!==t.dcy){var n=JSON.parse(this.cpTmp.dec(t.dcy)),i="WinOS";return-1!=navigator.appVersion.indexOf("Mac")&&(i="MacOS"),n.OSName=i,n}return t},initialize:function(t){this.cpTmp=t}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(3),n(4),n(1),n(2),n(6),n(10),n(16),n(86),n(87),n(88),n(89),n(90),n(91),n(17),n(92)],void 0===(o=function(t,e,n,i,o,a,r,s,l,c,d,u,p,h,f,g){"use strict";return e.CompositeView.extend({template:n.readerPrintMainWrapperTemplate,el:"#printMainWrapper",itemViewContainer:"#printDefaultWrapper",itemView:s,emptyView:r,initialize:function(t){i.on("openSCN",this.openNewSCN,this),this.render(),this.collection=new g(null,t)},getItemView:function(t){var e,n=t.get("tbPrintName");return"radioPrint"===n?e=l:"selectionPrint"===n?e=c:"previewPrint"===n?e=d:"createPrint"===n?e=u:"openPrint"===n?e=p:"errorPrint"===n&&(e=h),e},openNewSCN:function(t,e){this.collection.openNewSCN(t,e)}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(2),n(9),n(8)],void 0===(a=function(t,e,n,o,a,r,s){"use strict";return e.ItemView.extend({template:n.readerPrintRadioTemplate,id:"radioPrint",defaults:{tbPrintName:"radioPrint"},initialize:function(e){var n=i.extend({},e.model.collection.gbData,this.model.attributes);this.model.attributes=n;var o="MLA",a="60";if(0==this.model.collection.gbData.DocUser.usChpt){var r="printPage.action?op=alo&docID="+this.model.collection.gbData.BiblioData.docID;t.ajax({url:r,async:!1,success:function(t){"SUCCESS"===t.status&&(o=t.citationFormat,a=t.printAllowance)}}),this.citation=o,this.alo=a}this.usChpt=this.model.collection.gbData.DocUser.usChpt},onRender:function(){this.model.get("DocUser")&&this.model.get("DocUser").drmFree?this.$el.find("#printPageAllowance").html(s.t("rr_pages_remain_to_print")):this.$el.find("#printPageAllowance").html(this.alo),this.$el.find("#citationStyle [value="+this.citation+"]").attr("selected","selected"),1===this.usChpt?(this.$el.find("input:radio[name=optionsRadios]").filter('[value="chapter"]').prop("checked",!0),t("#myModalLabelPrint").html(s.t("rr_chapter_d")),this.$el.find("#currentPageDiv").hide(),this.$el.find("#pageSelDiv").hide()):t("#myModalLabelPrint").html(s.t("rr_print_PDF"))},events:{"click #printCancel":"actionPrintCancle","click #printContinue":"actionPrintContinue","click #startPage,#endPage":"actionPrintRadio"},actionPrintCancle:function(t){t.preventDefault()},actionPrintContinue:function(e){e.preventDefault(),t(".text-danger").empty(),this.model.collection.gbData.pnt={},this.model.collection.gbData.pnt.docID=this.model.collection.gbData.BiblioData.docID;var n=t("input:radio[name=optionsRadios]:checked").val();this.model.collection.gbData.pnt.rds=n,"range"===n?(this.model.collection.gbData.pnt.st=t("#startPage").val(),this.model.collection.gbData.pnt.ed=t("#endPage").val()):(this.model.collection.gbData.pnt.st=t("#current-page").val(),this.model.collection.gbData.pnt.ed=this.model.collection.gbData.pnt.st),this.model.collection.gbData.pnt.ct=t("#citationStyle").find(":selected").val();var i="chapter"===n?"ChapterDownload":"Print",a=0,r=0,l=0,c=0,d=0,u="printPage.action?ct="+this.model.collection.gbData.pnt.ct+"&op=validate&rds="+this.model.collection.gbData.pnt.rds+"&docID="+this.model.collection.gbData.pnt.docID+"&st="+this.model.collection.gbData.pnt.st+"&ed="+this.model.collection.gbData.pnt.ed+"&pageAccessed="+i;t.ajax({url:u,async:!1,success:function(e){if("SUCCESS"===e.status)void 0!==e.multipleRangeSelection?(e.multipleRangeSelection,n=(n=e.multipleRangeSelectionMsg)||s.t("rr_please_try_again"),t("input:radio[name=optionsRadios]:checked").parent().siblings(".text-danger").empty().html(n)):(a=e.startPhyPage,r=e.endPhyPage,l=e.startLgPage,c=e.endLgPage,d=e.remainingPrint);else if("FAILURE"===e.status){void 0!==e.gaTotalRemainingPrint&&window.dataLayer.push({event:"e_printError",pagesRemaining:e.gaTotalRemainingPrint,pagesPrinted:e.startPhyPage+" - "+e.endPhyPage,printDocId:e.docId}),n=(n=e.statusMessage)||s.t("rr_please_try_again"),t("input:radio[name=optionsRadios]:checked").parent().siblings(".text-danger").empty().html(n),t("#printPageAllowance").hide()}else{var n;n=(n=void 0===e.status?e.errorCode:e["status-message"])||s.t("rr_please_refresh_page"),t("input:radio[name=optionsRadios]:checked").parent().siblings(".text-danger").empty().html(n),t("#printPageAllowance").hide()}},error:function(e,n,i){t("input:radio[name=optionsRadios]:checked").parent().siblings(".text-danger").empty().html(s.t("rr_please_refresh_page")),t("#printPageAllowance").hide()}}),a>0&&(this.model.collection.gbData.pnt.pst=a,this.model.collection.gbData.pnt.ped=r,this.model.collection.gbData.pnt.lst=l,this.model.collection.gbData.pnt.led=c,this.model.collection.gbData.pnt.rpnt=d,o.trigger("openSCN","createPrint",this.model.collection.gbData))},actionPrintRadio:function(e){t("#optionsRadios2").prop("checked",!0)}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(2),n(9)],void 0===(a=function(t,e,n,o,a,r){"use strict";return e.ItemView.extend({template:n.readerPrintSelectionTemplate,id:"selectionPrint",defaults:{tbPrintName:"selectionPrint"},initialize:function(t){var e=i.extend({},t.model.collection.gbData,this.model.attributes);this.model.attributes=e},events:{"click #selectionPrintPreview":"actionPrintPreview"},onRender:function(){},actionPrintSelection:function(){},actionPrintPreview:function(e){e.preventDefault();var n=t("#printSelectSection").find(":selected").val();if(void 0!==n){var i=parseInt(n.split("_")[1]),a=this;t.each(this.model.get("pnt").multipleRangeSelection,function(t,e){t===i&&(a.model.collection.gbData.pnt.st=e.startPhyPage,a.model.collection.gbData.pnt.ed=e.endPhyPage,a.model.collection.gbData.pnt.pst=e.startPhyPage,a.model.collection.gbData.pnt.ped=e.endPhyPage,a.model.collection.gbData.pnt.lst=e.startLgPage,a.model.collection.gbData.pnt.led=e.endLgPage,o.trigger("openSCN","previewPrint",a.model.collection.gbData))})}}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(2),n(9)],void 0===(a=function(t,e,n,o,a,r){"use strict";return e.ItemView.extend({template:n.readerPrintPreviewTemplate,id:"previewPrint",defaults:{tbPrintName:"previewPrint"},initialize:function(t){var e=i.extend({},t.model.collection.gbData,this.model.attributes);this.model.attributes=e},onRender:function(){},events:{"click #printCancel":"actionPrintCancle","click #printCreate":"actionPrintContinue","click #printStartOver":"actionPrintStartOver"},actionPrintCancle:function(t){t.preventDefault()},actionPrintContinue:function(t){t.preventDefault(),o.trigger("openSCN","createPrint")},actionPrintStartOver:function(t){t.preventDefault(),o.trigger("openSCN","radioPrint")}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(0),n(3),n(4),n(1),n(2),n(9)],void 0===(o=function(t,e,n,i,o,a){"use strict";return e.ItemView.extend({template:n.readerPrintCreateTemplate,id:"createPrint",defaults:{tbPrintName:"createPrint"},initialize:function(t){},onRender:function(){t.data(this,"testTimeoutFocus",setTimeout(function(){i.trigger("openSCN","openPrint")},950))}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(2),n(9),n(8)],void 0===(a=function(t,e,n,o,a,r,s){"use strict";return e.ItemView.extend({template:n.readerPrintOpenTemplate,id:"#openPrint",defaults:{tbPrintName:"openPrint"},initialize:function(t){var e=i.extend({},t.model.collection.gbData,this.model.attributes);this.model.attributes=e},events:{"click #printOpenPDF":"openLinkPDF","click #chapterOpenPDF":"openLinkPDF"},onRender:function(){},openLinkPDF:function(e){var n=parseInt(this.model.collection.gbData.pnt.rpnt)||0;t("#remainingPrint").length>0&&t("#remainingPrint").empty().text(n),void 0!==this.model.get("DocUser")&&(this.model.get("DocUser").remainingPrintCount=n),n<=0&&(t("#toolChapterDownload").attr("disabled","disabled").prop("title",s.t("rr_remaining_print_allowance")),t("#toolPrint").attr("disabled","disabled").prop("title",s.t("rr_remaining_print_allowance")),t("#toolChapterDownload").addClass("tool-btn-disabled"),t("#toolPrint").addClass("tool-btn-disabled"));var i=new Date,o="printPage.action?op=toPDF&ct="+this.model.collection.gbData.pnt.ct+"&rds="+this.model.collection.gbData.pnt.rds+"&docID="+this.model.collection.gbData.pnt.docID+"&st="+this.model.collection.gbData.pnt.pst+"&ed="+this.model.collection.gbData.pnt.ped+"&dt="+i.getTime();t('<a id="tmpLink" href='+o+' target="_blank"/>').appendTo("#toolbar"),t("#tmpLink")[0].click(),t("#tmpLink").remove()}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(0),n(3),n(4),n(1),n(2),n(9)],void 0===(o=function(t,e,n,i,o,a){"use strict";return e.ItemView.extend({template:n.readerPrintErrorTemplate,id:"#errorPrint",defaults:{tbPrintName:"errorPrint"},initialize:function(t){},events:{"click #printStartOver":"actionPrintStartOver"},onRender:function(){},actionPrintStartOver:function(t){t.preventDefault(),i.trigger("openSCN","radioPrint")}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0),n(93),n(6),n(2),n(1)],void 0===(o=function(t,e,n,i,o,a){"use strict";return t.Collection.extend({model:n,initialize:function(t,e){this.gbData=e},prepareData:function(){this.add({tbPrintNameTest:"gold",tbPrintName:"radioPrint"},{add:!0,remove:!0,merge:!1})},openNewSCN:function(t,e){this.reset();var n=this.findWhere({tbPrintName:t});null==n&&this.add({tbPrintNameTest:"White",tbPrintName:t},{add:!0,remove:!1,merge:!1})}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({idAttribute:"panelTitle",defaults:{panelTest:""},initialize:function(t,e){}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(8),n(2),n(95),n(6),n(96)],void 0===(a=function(t,e,n,o,a,r,s,l,c){"use strict";return e.ItemView.extend({template:n.readerAcstTemplate,el:"#fullDownloadWrapper",initialize:function(e){this.prevSelectedDevice=null,this.getDownloadAccess,this.getDeviceFormFactor,this.cookieKey="DOWNLOAD_DEVICE",this.radioDeviceType=1,this.uAccsMdRR="no"===t("#enableAccessiblity").val()?1:0;var n=i.extend({},e,{tmpCkName:r.readCookie(this.cookieKey)});this.model=new s(n),this.model.on("change",this.render,this),this.model.fetch(),this.acsDownloadLink="acsDownload.action?docID="+this.model.get("DocUser").docID},events:{"click .devices-list li .device-icon, .devices-list li .device-type":"modalDeviceTypeSelected","keypress .devices-list li":"modalDeviceTypeSelectedkp","click #ownDeviceParent, #sharedDeviceParent":"modalRadioDeviceTypeToggle","keypress #ownDeviceParent, #sharedDeviceParent":"modalRadioDeviceTypeTogglekp","click #continueButton":"modalDeviceTypeSubmit","click .wizard-box":"stepSelected","click #doneInstallStep":"modalInstallStepDoneProceed","click #getReaderButton":"modalInstallStepLinkProceed","click #downloadBookButton":"modalDownloadButton","click #modalAlertContinueButton, #modalAlertCancel, #alertModalDismiss":"modalAlertDownloadButton","hidden.bs.modal #downloadModal":"modalCloseOnHide","click #modalAlertFirstContinueButton":"modalAlertFistDownloadButton"},onRender:function(){if("no_login"===this.model.get("status"))this.model.get("DocUser").signedIn=!1,o.trigger("tbsgn","q_download");else{if(this.model.get("accDtl")&&1==this.model.get("accDtl").drmFree)return 0===t("#dfdModalWrapper").length&&t('<div id="dfdModalWrapper"></div>').appendTo("#emptyTmpWrapper"),new c({DocUser:this.model.get("DocUser"),BiblioData:this.model.get("BiblioData"),isEpubDownloadEnabled:this.model.get("isEpubDownloadEnabled")}).show(),!1;if(void 0===this.model.get("DocUser").alreadyNupo&&"nupo_confirm"===this.model.get("status")&&this.$el.find("#downloadModalSteps").hide(),t("#downloadModal").modal("show"),this.$el.find(".device-selected").find(".textToggle").empty().html("Device selected"),this.uAccsMdRR>0){this.$el.find("#deviceStep").attr("tabindex","-1"),this.$el.find("#installStep").attr("tabindex","-1"),this.$el.find("#downloadStep").attr("tabindex","-1"),this.$el.find("#deviceStep .modal-title.collapsed").remove(),this.$el.find("#deviceStep .change-button.on-attempted").remove(),this.$el.find("#installStep .modal-title.collapsed").remove(),this.$el.find("#installStep .change-button.on-attempted").remove(),this.$el.find("#downloadStep .modal-title.collapsed").remove(),this.$el.find("#downloadStep .change-button.on-attempted").remove();var e=this.$el.find("#downloadModal .active").attr("id");"deviceStep"===e?(this.$el.find("#deviceStep").attr({"aria-hidden":"false"}).removeAttr("hidden"),this.$el.find("#installStep").attr({"aria-hidden":"true",hidden:"hidden"}),this.$el.find("#downloadStep").attr({"aria-hidden":"true",hidden:"hidden"})):"installStep"===e?(this.$el.find("#deviceStep").attr({"aria-hidden":"true",hidden:"hidden"}),this.$el.find("#installStep").attr({"aria-hidden":"false"}).removeAttr("hidden"),this.$el.find("#downloadStep").attr({"aria-hidden":"true",hidden:"hidden"})):"downloadStep"===e&&(this.$el.find("#deviceStep").attr({"aria-hidden":"true",hidden:"hidden"}),this.$el.find("#installStep").attr({"aria-hidden":"true",hidden:"hidden"}),this.$el.find("#downloadStep").attr({"aria-hidden":"false"}).removeAttr("hidden"))}}},modalDeviceTypeSelected:function(t){this.modalDeviceTypeSelectedkp(t)},modalDeviceTypeSelectedkp:function(e){var n=e.type;if("click"==n||"keypress"==n&&(13==e.which||32==e.which)){e.preventDefault();var i=t(e.target).closest("li");this.prevSelectedDevice=i.attr("id"),i.addClass("device-selected").siblings("li").removeClass("device-selected"),t("#installStep").removeClass("active").removeClass("attempted"),t("#downloadStep").removeClass("active").removeClass("attempted"),i.siblings("li").find(".textToggle").empty().html("Device unselected"),i.find(".textToggle").empty().html("Device selected")}},modalRadioDeviceTypeToggle:function(t){},modalRadioDeviceTypeTogglekp:function(t){var e=t.type;"click"==e||"keypress"==e&&(13==t.which||t.which)},modalDeviceTypeSubmit:function(e){e.preventDefault();t(e.target);this.radioDeviceType=t("input[name=deviceType]:checked").val(),this.goToStep("installStep")},collapseWizardBox:function(){t(".modal-content.active").addClass("attempted"),t(".modal-content").removeClass("active")},expandWizardBox:function(e){t("#"+e).addClass("active"),this.uAccsMdRR>0&&("deviceStep"===e?(this.$el.find("#deviceStep").attr({"aria-hidden":"false"}).removeAttr("hidden"),this.$el.find("#installStep").attr({"aria-hidden":"true",hidden:"hidden"}),this.$el.find("#downloadStep").attr({"aria-hidden":"true",hidden:"hidden"})):"installStep"===e?(this.$el.find("#deviceStep").attr({"aria-hidden":"true",hidden:"hidden"}),this.$el.find("#installStep").attr({"aria-hidden":"false"}).removeAttr("hidden"),this.$el.find("#downloadStep").attr({"aria-hidden":"true",hidden:"hidden"}),this.$el.find("#deviceStep").remove()):"downloadStep"===e&&(this.$el.find("#deviceStep").attr({"aria-hidden":"true",hidden:"hidden"}),this.$el.find("#installStep").attr({"aria-hidden":"true",hidden:"hidden"}),this.$el.find("#downloadStep").attr({"aria-hidden":"false"}).removeAttr("hidden"),this.$el.find("#installStep").remove()))},goToStep:function(e){if(this.collapseWizardBox(),"deviceStep"===e)this.expandWizardBox(e),t("#deviceStep").focus();else if("installStep"===e){this.prevSelectedDevice=this.prevSelectedDevice||t("li.device-selected").attr("id")||"desktopDevice",this.radioDeviceType=t("input[name=deviceType]:checked").val();var o=this.prevSelectedDevice,r="Adobe Digital Editions",s=this.radioDeviceType,l="1"===s&&"otherDevice"!==o?"orange ":"",c=(p="","otherDevice"===o?p=a.t("rr_cancel"):(p+="1"===s?a.t("rr_get"):a.t("rr_i_have"),p+=r)),d=i.extend({},{deviceFormFactor:o,reader:r,deviceOwnership:s,privateClass:l,buttonTitle:c,_t:a.t}),u=i.template(n.subSectionDeviceSpecificTemplate)(d);t("#installStep > .wizard-content").empty().html(u),t("#installStep").focus(),this.expandWizardBox(e)}else"downloadStep"===e?(this.expandWizardBox(e),t("#downloadStep").focus()):this.expandWizardBox("deviceStep");var p},stepSelected:function(e){var n=t(e.target);if(!(n.hasClass("wizard-content")||n.closest(".wizard-content").length>0)){var i=n.attr("id");n.hasClass("active")&&n.hasClass("attempted")||(!n.hasClass("active")&&n.hasClass("attempted")?this.goToStep(i):(i=(n=n.parents(".modal-content")).attr("id"),!n.hasClass("active")&&n.hasClass("attempted")&&this.goToStep(i)))}},modalInstallStepDoneProceed:function(t){t.preventDefault(),this.goToStep("downloadStep")},modalInstallStepLinkProceed:function(e){t(e.target);if("otherDevice"===this.prevSelectedDevice)return this.closeModal(),!1;"2"===this.radioDeviceType&&(e.preventDefault(),this.goToStep("downloadStep"))},modalCloseOnHide:function(e){t("#deviceErrorStep").text().indexOf(a.t("rr_book_not_available"))>=0&&(window.location.href=r.updateQueryStringWithOutHashSupport(location.href,"ppg",t("#current-page").val())),t.data(this,"alertModelTimer",setTimeout(function(){t("#fullDownloadWrapper").remove(),t("#toolDownload").focus()},250))},closeModal:function(){t("#downloadModal").modal("hide")},modalAlertFistDownloadButton:function(e){void 0===this.model.get("DocUser").alreadyNupo&&(this.isNupoNow="yes",this.model.get("DocUser").alreadyNupo="nupo_confirm",t("#downloadNupoStep").remove(),t("#downloadModalSteps").show())},modalAlertDownloadButton:function(e){t("#deviceErrorStep").text().indexOf(a.t("rr_book_not_available"))>=0&&(window.location.href=r.updateQueryStringWithOutHashSupport(location.href,"ppg",t("#current-page").val())),this.closeModal()},modalDownloadButton:function(e){if(t("#downloadPeriodFull").length>0&&""===t("#downloadPeriodFull option:selected").val())return e.preventDefault(),t("#downloadPeriodFull").attr("aria-labelledby","downloadPeriodFull_error").focus(),t("#downloadPeriodFullWrapper").addClass("has-error"),t("#downloadPeriodFull_error").removeClass("hide").empty().text("Please select access"),!1;t("#downloadPeriodFull").length>0&&(t("#downloadPeriodFull").removeAttr("aria-labelledby"),t("#downloadPeriodFullWrapper").removeClass("has-error"),t("#downloadPeriodFull_error").addClass("hide").empty());var s=this.getDownloadAccess();if("has_access"===s||void 0!==this.model.get("DocUser").alreadyNupo&&this.model.get("DocUser").alreadyNupo===s){this.prevSelectedDevice=this.prevSelectedDevice||t("li.device-selected").attr("id")||"desktopDevice",this.radioDeviceType=this.radioDeviceType||t("input[name=deviceType]:checked").val();var l=this.prevSelectedDevice.split("Device")[0]+"-"+this.radioDeviceType;r.setCookie(this.cookieKey,l,5184e6);var c=t("input[name=optradio]").length>0?t("input[name=optradio]:checked").val():"";return t("#downloadBookButton").attr("href",this.acsDownloadLink+"&op=final&df="+c),this.closeModal(),!0}if("no_login"===s)this.closeModal(),o.trigger("tbsgn","q_download");else if("nupo_confirm"===s){var d=i.template(n.subSectionNupoConfirmTemplate)({DocUser:this.model.get("DocUser"),_t:a.t});t("#downloadModal").removeClass("modal-wizard download-modal-wizard").empty().html(d)}else{d=i.template(n.subSectionErrorInACSTemplate)({status:"Error:"+s,_t:a.t});t("#downloadModal .modal-dialog").empty().html(d)}return!1},getDownloadAccess:function(e){var n="no_access",i=t("input[name=optradio]").length>0?t("input[name=optradio]:checked").val():"",o=t("#downloadPeriodFull").length>0?t("#downloadPeriodFull option:selected").val():"",a=new Date,r=this.acsDownloadLink+(e?"&op="+e:"")+"&df="+i+"&dDays="+o+"&tm="+a.getTime();return t.ajax({dataType:"json",url:r,async:!1,success:function(t){t.status&&(n=t.status)},error:function(t,e,i){n=i}}),n}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({url:function(){return"acsDownload.action?op=check&docID="+this.cpTmp.DocUser.docID+"&offset="+(new Date).getTimezoneOffset()},initialize:function(t){this.cpTmp=t}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(8),n(2)],void 0===(a=function(t,e,n,o,a,r){"use strict";return e.ItemView.extend({template:n.drmFreeDownloadModalTemplate,el:"#dfdModalWrapper",defaults:{},initialize:function(t){this.data=i.extend({},t),this.render(),this.acsDownloadLink="acsDownload.action?drmFree=true&docID="+this.data.DocUser.docID,this.isEpubDownloadEnabled=this.data.isEpubDownloadEnabled,this.format=""},serializeData:function(){return this.data},events:{"click #p-close-button":"hideModal","shown.bs.modal #dfdModal":"modalShown","hidden.bs.modal #dfdModal":"modalHidden","click #downloadBookPDF":"downloadPDF","click #pdfFullDownloadButton":"downloadPDF","click #epubFullDownloadButton":"downloadPDF"},downloadPDF:function(e){var n=e.target.id;"epubFullDownloadButton"===n&&(this.format="epub"),"pdfFullDownloadButton"===n&&(this.format="pdf"),"epubpdf"===this.format&&"true"!==this.isEpubDownloadEnabled&&(this.format="pdf");var i=this.getDownloadAccess();if("has_access"===i){var a=this.acsDownloadLink+"&df="+this.format+"&op=final&ed="+this.data.BiblioData.pages+"&tm="+(new Date).getTime();t('<a id="tmpDfdLink" href='+a+" />").appendTo("#dfdModalWrapper"),t("#tmpDfdLink")[0].click(),t("#tmpDfdLink").remove();var r=this;setTimeout(function(){r.hideModal()},1e3)}else"no_login"===i?(this.hideModal(),o.trigger("tbsgn","q_download")):(this.$el.find("#downloadBookPDF").addClass("disabled"),this.updateTabKeyHandlers())},getCheckDownloadAccess:function(){var e="";if(t.ajax({dataType:"json",url:this.acsDownloadLink+"&op=check&tm="+(new Date).getTime(),async:!1,success:function(t){e=t,t.status&&t.status},error:function(t,e,n){n}}),void 0!==e.docMeta&&null!=e.docMeta&&void 0!==e.docMeta.format&&null!=e.docMeta.format){var n=e.docMeta.format.split(";");n.length>1?2==n.length?this.format="epubpdf":n.indexOf("epub")>-1?this.format="epub":this.format="pdf":n.indexOf("pdf")>-1?this.format="pdf":n.indexOf("epub")>-1&&(this.format="epub")}return this.format},getDownloadAccess:function(){var e="no_access";return t.ajax({dataType:"json",url:this.acsDownloadLink+"&df="+this.format+"&tm="+(new Date).getTime(),async:!1,success:function(t){t.status&&(e=t.status)},error:function(t,n,i){e=i}}),e},onRender:function(){this.$el.find("#bookTitle").html(this.data.BiblioData.title);var t=this.data.BiblioData.coverURL.split("/");this.$el.find("#p-book-cover-btn").attr("src",t.join("/")),this.$el.find("#printOpenWrapper").hide()},show:function(){this.format=this.getCheckDownloadAccess(),this.showCreatingScreen(),this.$el.find(".modal").modal("show");var t=this;setTimeout(function(){t.showDownloadScreen()},1e3)},showCreatingScreen:function(){"epub"===this.format&&this.$el.find("#download_confirm_text").html(a.t("rr_epub_ready_text")),this.$el.find("#dfd-screen-title").html(a.t("rr_preparing_pdf")),"epubpdf"===this.format&&!0===this.isEpubDownloadEnabled?(this.$el.find("#dfd-screen-title").html(a.t("rr_select_download_format")),this.$el.find("#fullDownloadSelectionWrapper").hide(),this.$el.find("#printOpenWrapper").hide()):(this.$el.find("#printOpenWrapper").show(),this.$el.find("#fullDownloadSelectionWrapper").hide(),this.$el.find("#printCreateWrapper").hide()),this.$el.find("#pstep1").hide(),this.$el.find("#pstep2").hide(),this.$el.find("#pstep3").hide(),this.$el.find("[id^=pstep] > div").removeClass().addClass("step-bar-done").attr("style",""),this.$el.find("#pstep3progress").addClass("step-bar-progress").attr("style","width:100%")},showDownloadScreen:function(){"epubpdf"===this.format&&!0===this.isEpubDownloadEnabled?(this.$el.find("#dfd-screen-title").html(a.t("rr_select_download_format")),this.$el.find("#printCreateWrapper").show(),this.$el.find("#fullDownloadSelectionWrapper").hide(),t.data(this,"testTm",setTimeout(function(){t("#printCreateWrapper").hide(),t("#fullDownloadSelectionWrapper").attr("aria-labelledby","dfd-screen-title").attr("role","dialog"),t("#fullDownloadSelectionWrapper").show()},950)),this.updateTabKeyHandlers1()):(this.$el.find("#dfd-screen-title").html(a.t("rr_pdf_ready_title")),this.$el.find("#printOpenWrapper").show(),this.$el.find("#fullDownloadSelectionWrapper").hide(),this.$el.find("#printCreateWrapper").hide()),this.$el.find("[id^=pstep] > div").removeClass().addClass("step-bar-fill").attr("style","width:100%"),this.updateTabKeyHandlers()},hideModal:function(){this.$el.find(".modal").modal("hide")},modalShown:function(){this.updateTabKeyHandlers()},modalHidden:function(){t("#toolDownload").focus()},updateTabKeyHandlers:function(){var e,n;n=this.$el.find("#p-close-button"),"none"===this.$el.find("#printCreateWrapper").css("display")?(e=this.$el.find("#downloadBookPDF")).hasClass("disabled")&&(e=n):e=this.$el.find("#ebc-preparing-download");var i=[{elem:e,next:n},{elem:n,next:e}];t.each(i,function(e,n){t.each(n,function(t,e){e.on("keydown",function(e){9==(e.keyCode||e.which)&&("elem"===t?!e.shiftKey:e.shiftKey)&&(e.preventDefault(),"elem"===t?n.next.focus():n.elem.focus())})})}),e.focus()},updateTabKeyHandlers1:function(){var t,e,n;n=this.$el.find("#p-close-button"),"none"===this.$el.find("#printCreateWrapper").css("display")?(t=this.$el.find("#pdfFullDownloadButton")).hasClass("disabled")&&(t=n):(t=this.$el.find("#pdfFullDownloadButton"),e=this.$el.find("#epubFullDownloadButton")),n.on("keydown",function(e){9==(e.keyCode||e.which)&&(e.preventDefault(),e.shiftKey?$lastElem.focus():t.focus())}),e.on("keydown",function(t){var e=t.keyCode||t.which;t.shiftKey||9!=e||(t.preventDefault(),n.focus())}),t.on("keydown",function(t){var e=t.keyCode||t.which;t.shiftKey&&9==e&&(t.preventDefault(),n.focus())}),t.focus()}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(2),n(12),n(98)],void 0===(a=function(t,e,n,o,a,r,s){"use strict";return e.ItemView.extend({template:n.readerSignInTemplate,el:"#userSignInWrapper",defaults:{isUsrSigIn:"none"},initialize:function(t){var e=i.extend({},this.pebr,{ck:this.ck},t);this.tmpModel=e,this.model=new s(e),this.model.bind("sync",this.render,this),this.model.fetch(),this.pqOneUtil=new r},onRender:function(){this.showReaderLoginDialog(this.tmpModel.modalKey,this.tmpModel.modalOp,this.tmpModel.docID)},events:{"hidden.bs.modal #mjLoginModal":"modalDone"},modalDone:function(t){this.onClose()},onClose:function(e){t("#mjLoginModal").modal("hide"),t.data(this,"sgnModelTimer",setTimeout(function(){t("#mjLoginModal").unbind(),t("#mjLoginModal").remove()},550))},mayiMJLoginModal:function(e,n,i){var o=new Date,a={result:!1},r=t("#mayitestpg").attr("data-pqMayankData")+"/showLogin.action?tm="+o.getTime(),s={key:e,op:n};return t.ajax({type:"POST",url:r,data:s,async:!1,success:function(e){try{t.isPlainObject(e)&&0===e.statusCode&&(a.gRes=!0)}catch(t){}a.result=!0,a.data=e},error:function(t,e,n){}}),!0===a.gRes||!0===a.result&&(t("#signInDataFetch").empty().html(a.data),t("#mjLoginModal").modal("show"),this.loginForm(i),!1)},showReaderLoginDialog:function(e,n,i){try{if(this.mayiMJLoginModal(e,n,i))return!1}catch(e){var o=t("#mayitestpg").attr("data-pqSign")||"";if(o.length>0)return window.location.href=o,!0}return!0},swapScreens:function(){t("#signin-screen").toggleClass("offscreen"),t("#join-screen").toggleClass("offscreen"),t(".switchSignAndJoin").toggleClass("offscreen")},loginForm:function(e){var n=this,i=t("#mayitestpg").attr("data-pqcoverdata")||"";i.length>2&&void 0!==e&&e.length>3&&(i=i.replace("docNumber",e),t("#modal-content").css("background-image","url("+i+")")),t(".swapLink").on("click",this.swapScreens),t("#login_button").on("submit click keypress",function(e){e.preventDefault();var n=e.type;if("click"==n||"keypress"==n&&(13==e.which||32==e.which)){t("#mjlogin_form div").removeClass("has-error");var i=0,o=new Date,r={};jQuery.each(jQuery("#mjlogin_form :input").serializeArray(),function(t,e){null==r[e.name]?r[e.name]=e.value:typeof r[e.name]==Array?r[e.name].push(e.value):r[e.name]=[r[e.name],e.value]});var s=t("#mjlogin_form").attr("action")+"?v=true&tm="+o.getTime();if(t.ajax({url:s,type:"POST",data:r,async:!1,success:function(e){0===e.statusCode?i=2:1===e.statusCode&&(t.each(e.errors,function(e,n){var i=t("#mjlogin_form #"+e);i.length&&(i.attr("aria-labelledby",e+"_error"),i.parent().addClass("has-error"),t("#mjlogin_form #"+e+"_error").removeClass("hide").empty().html(n))}),t("#mjlogin_form .has-error:first").find("input").focus())},error:function(){}}),i>0){t("#mjLoginModal").modal("hide"),s=t("#mjlogin_form").attr("action")+"?v=false&tm="+o.getTime();t.ajax({url:s,type:"POST",data:r,async:!1,success:function(e){location.protocol,location.hostname,location.port&&location.port,location.pathname;window.location.href=a.updateQueryStringWithOutHashSupport(location.href,"ppg",t("#current-page").val())},error:function(){}})}}}),t(".guestLink").on("click keypress",function(e){e.preventDefault();var n=t(this),i=e.type;if("click"==i||"keypress"==i&&(13==e.which||32==e.which)){var o=new Date,r=t("#mayitestpg").attr("data-pqMayankData")+"/guest.action?tm="+o.getTime();t.ajax({url:r,type:"GET",data:{},async:!1,success:function(e){if(!0===e.status){location.protocol,location.hostname,location.port&&location.port,location.pathname;window.location.href=a.updateQueryStringWithOutHashSupport(location.href,"ppg",t("#current-page").val())}else n.siblings(".help-block").empty().html(e.errorMsg)},error:function(){n.siblings(".help-block").empty().text("Sorry. Please try again later")}})}}),t("#login_sso").on("click keypress",function(e){e.preventDefault();t(this);var i=e.type;if("click"==i||"keypress"==i&&(13==e.which||32==e.which)){var o=new Date,a=t("#mayitestpg").attr("data-pqMayankData")+"/login.action?tm="+o.getTime();n.pqOneUtil.navigateLoginURL(a)}}),t("#joinEbookCentralAct,#requestAccount").on("click keypress",function(e){e.preventDefault();t(this);var n=e.type;if("click"==n||"keypress"==n&&(13==e.which||32==e.which)){t("#join-form div").removeClass("has-error");var i=new Date,o={};jQuery.each(jQuery("#join-form :input").serializeArray(),function(t,e){null==o[e.name]?o[e.name]=e.value:typeof o[e.name]==Array?o[e.name].push(e.value):o[e.name]=[o[e.name],e.value]});t("#username").val(),t("#password").val();var r=t("#join-form").attr("action")+"?op=validate&v=true&tm="+i.getTime();t.ajax({url:r,type:"POST",data:o,async:!1,success:function(e){if(0===e.statusCode){location.protocol,location.hostname,location.port&&location.port,location.pathname;window.location.href=a.updateQueryStringWithOutHashSupport(location.href,"ppg",t("#current-page").val())}else 1===e.statusCode&&"undifined"!=typeof e.errors&&(t.each(e.errors,function(e,n){var i=t("#join-form #"+e);i.length&&(i.attr("aria-labelledby",e+"_error"),i.parent().addClass("has-error"),t("#join-form #"+e+"_error").removeClass("hide").empty().html(n))}),t("#join-form .has-error:first").find("input").focus())},error:function(){}})}}),t(window).on("resize",function(){!0===t("#checkVs").is(":visible")?i.length>2&&t("#mjLoginModal #modal-content").css("background-image","url("+i+")"):t("#mjLoginModal #modal-content").css("background-image","none")})}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({idAttribute:"sChecklg",url:function(){return"loginCheck.json"},initialize:function(t,e){}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(2),n(100)],void 0===(a=function(t,e,n,o,a,r){"use strict";return e.ItemView.extend({template:n.readerCiteTemplate,el:"#firstCitetWrapper",defaults:{tbCiteName:"firstCiteDefaultWrapper"},initialize:function(t){this.citeData;var e=i.extend({},t);this.model=new r(e),this.model.bind("sync",this.render,this),this.model.fetch()},events:{"hidden.bs.modal #citeModal":"modalCloseOnHide","change #cite-format":"citeFormatSel","click #citationRefWorks":"citationRefWorksSel","click #citationEndNoteCitavi":"citationEndNoteCitaviSel","select .modal-editable-div":"selectEditableContentText","focusout .modal-editable-div":"deselectEditableContentText"},onRender:function(){var e=this.$el.find("#cite-format");this.citeData=[];var n=this;t.each(this.model.get("DocumentCitations"),function(i,o){n.citeData[o.citationName]=o,"CTNB"===o.citationName||"CTAD"===o.citationName?e.append(t("<option>",{value:o.citationName,text:o.citationDesc,selected:o.isSelected})):e.append(t("<option>",{value:o.citationName,text:o.citationName,selected:o.isSelected})),o.isSelected&&n.$el.find("#citation-content").empty().html(o.citationFormatted)}),-1==navigator.appVersion.indexOf("Mac")&&this.$el.find("#citeModal").attr("aria-labelledby","myModalLabelCiteModal"),this.$el.find("#citeModal").modal("show"),this.uAccsMdRR="no"===t("#enableAccessiblity").val()?1:0,0===this.uAccsMdRR&&t.data(this,"testTimeoutFocus",setTimeout(function(){t("#citation-content").focus(),t("#citation-content").select()},550))},citeFormatSel:function(){var e=this.$el.find("select option:selected").val();t("#citation-content").empty().html(this.citeData[e].citationFormatted)},citationRefWorksSel:function(t){this.exportToRefworks(),this.closeModal()},citationEndNoteCitaviSel:function(t){this.closeModal()},exportToRefworks:function(){var e=t("body"),n=this.model.get("DocUser").docID,i=this.model.get("ppg")||1;return t.ajax({url:"biblioExport.action?refworks=1&docID="+n+"&ppg="+i,async:!1,success:function(n){var i=t("<form>",{name:"ExportRWForm",method:"POST",target:"RefWorksMain",action:"http://www.refworks.com/express/ExpressImport.asp?vendor=ebrary&filter=RefWorks%20Tagged%20Format&encoding=65001"}),o=t("<TEXTAREA />",{name:"ImportData",text:n});i.append(o).appendTo(e),i.hide(),i.submit(),i.remove()}}),!1},modalCloseOnHide:function(e){t.data(this,"alertModelTimer",setTimeout(function(){t("#toolCite").focus(),t("#firstCitetWrapper").remove()},250))},closeModal:function(){t("#citeModal").modal("hide")},selectEditableContentText:function(t){var e,n,i=document,o=t.currentTarget;i.body.createTextRange?((e=document.body.createTextRange()).moveToElementText(o),e.select()):window.getSelection&&(n=window.getSelection(),(e=document.createRange()).selectNodeContents(o),n.removeAllRanges(),n.addRange(e))},deselectEditableContentText:function(t){window.getSelection()&&window.getSelection().removeAllRanges?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({url:function(){return"documentCitation.action?docID="+this.cpTmp.DocUser.docID+"&asJson=1&ppg="+this.cpTmp.ppg+"&PQAccountId="+e("#PQAccountId").val()+"&offset="+(new Date).getTimezoneOffset()},initialize:function(t){this.cpTmp=t}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(2),n(13),n(6),n(8)],void 0===(a=function(t,e,n,o,a,r,s,l){"use strict";return e.ItemView.extend({template:n.readerLoanTextTemplate,el:"#loanTextWrapper",initialize:function(t){var e=i.extend({},t);this.model=new r(e),this.model.bind("sync",this.render,this),this.render()},events:{"click #reqPromtForMediation":"checkRequestMed","hidden.bs.modal #req_promptRead_modal":"modalCloseOnHide","keypress #reqPromtForMediation":"checkRequestMedKp","click #reqPromptSubmit":"onSubmitReq","click #spReaderCancel":"modalCancel"},onRender:function(){o.trigger("resetPgSel",!0,!0),o.trigger("clsPgSel",this.model.get("pageNum"),!0),t("#req_promptRead_modal").modal("show");var e=""+this.model.get("BiblioData").docID,n=t("#mayitestpg").attr("data-pqcoverdata")||"";n.length>2&&void 0!==e&&e.length>3&&(n=n.replace("docNumber",e)),!0===t("#checkVs").is(":visible")&&t("#req_promptRead_modal #modal-content").css("background-image","url("+n+")"),t(window).on("resize",function(){!0===t("#checkVs").is(":visible")?t("#req_promptRead_modal #modal-content").css("background-image","url("+n+")"):t("#req_promptRead_modal #modal-content").css("background-image","none")})},templateHelpers:{something:function(){return"Do stuff with "+this.page.parts+" because it's awesome."},wrapDashDaysMessage:function(){return i.isUndefined(this["status-message"])?l.t("rr_content_not_allowed"):"TOO_MANY_PREVIEWED"===this["status-message"]?l.t("rr_content_not_allowed"):this["status-message"]}},checkRequestMedKp:function(t){this.checkRequestMed(t)},checkRequestMed:function(e){var n=e.type;"click"!=n&&("keypress"!=n||13!=e.which&&32!=e.which)||(e.preventDefault(),t("#req_promptRead_modal").modal("hide"),o.trigger("mdreq",this.model.attributes))},modalCloseOnHide:function(e){t.data(this,"alertModelTimer",setTimeout(function(){t("#loanTextWrapper").remove()},250))},modalCancel:function(e){if("view"!==t.trim(t("#operation").val()||""))t("#req_promptRead_modal").modal("hide");else{var n=""+this.model.get("BiblioData").docID;t("#req_promptRead_modal").modal("hide"),pqOneUtil=new pqOneUtil;var i=document.referrer;(""===i||"undefined"===i||""!==i&&-1!=i.indexOf("reader.action"))&&(i="detail.action?docID="+n),pqOneUtil.navigateURL(pqOneUtil.isChannelPqOne()?t("#detailPQURL").html():i)}},sendRequestMed:function(e){var n=t.trim(t("#availReqPromptType option:selected").val()),i=t.trim(t("#reqAccCostCenter").val()||""),o=new Date,r={docID:this.model.get("BiblioData").docID,availReqPromptType:n,reqAccCostCenter:i,reqType:e||""};t.ajax({url:"reqDays.action?tm="+o.getTime(),dataType:"json",type:"POST",data:r,async:!1,success:function(e){if(0===e.statusCode){t("#req_promptRead_modal").modal("hide");location.protocol,location.hostname,location.port&&location.port,location.pathname;window.location.href=a.updateQueryStringWithOutHashSupport(location.href,"ppg",t("#current-page").val())}else if("FAILURE"===e.status){t("#req_promptRead_modal").modal("hide"),t("#dialogModalAlertError").modal("show").find("#msg").empty().html(e["status-message"])}},error:function(){t("#req_promptRead_modal").modal("hide"),t("#dialogModalAlertError").modal("show").find("#msg").empty().html(l.t("rr_please_try_again"))}})},onSubmitReq:function(e){e.preventDefault();t(this);var n=!0;""===t("#availReqPromptType option:selected").val()?(t("#availReqPromptType").attr("aria-labelledby","availReqPromptType_error"),t("#availReqPromptTypeWrapper").addClass("has-error"),t("#availReqPromptType_error").removeClass("hide").empty().text("Please select loan period"),t.data(this,"alertModelTimer",setTimeout(function(){t("#availReqPromptType").focus()},250)),n=!1):(t("#availReqPromptType").removeAttr("aria-labelledby"),t("#availReqPromptTypeWrapper").removeClass("has-error"),t("#availReqPromptType_error").addClass("hide").empty()),n&&this.sendRequestMed(this.model.get("triggerType"))}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(2),n(13),n(6),n(8),n(12)],void 0===(a=function(t,e,n,o,a,r,s,l,c){"use strict";return e.ItemView.extend({template:n.readerShowPriceLoanTextTemplate,el:"#loanShowPriceTextWrapper",initialize:function(t){var e=i.extend({},t);this.model=new r(e),this.model.bind("sync",this.render,this),this.render()},events:{"click #reqPromtForMediation":"checkRequestMed","hidden.bs.modal #req_sp_promptRead_modal":"modalCloseOnHide","keypress #reqPromtForMediation":"checkRequestMedKp","click #spReqPromptSubmit":"onSubmitReq","click #spReqCancel":"modalCancel"},onRender:function(){o.trigger("resetPgSel",!0,!0),o.trigger("clsPgSel",this.model.get("pageNum"),!0),t("#req_sp_promptRead_modal").modal("show");var e=""+this.model.get("BiblioData").docID,n=t("#mayitestpg").attr("data-pqcoverdata")||"";n.length>2&&void 0!==e&&e.length>3&&(n=n.replace("docNumber",e)),!0===t("#checkVs").is(":visible")&&t("#req_sp_promptRead_modal #modal-content").css("background-image","url("+n+")"),t(window).on("resize",function(){!0===t("#checkVs").is(":visible")?t("#req_sp_promptRead_modal #modal-content").css("background-image","url("+n+")"):t("#req_sp_promptRead_modal #modal-content").css("background-image","none")})},templateHelpers:{something:function(){return"Do stuff with "+this.page.parts+" because it's awesome."},wrapDashDaysMessage:function(){return i.isUndefined(this["status-message"])?l.t("rr_content_not_allowed"):"TOO_MANY_PREVIEWED"===this["status-message"]?l.t("rr_content_not_allowed"):this["status-message"]}},checkRequestMedKp:function(t){this.checkRequestMed(t)},checkRequestMed:function(e){var n=e.type;"click"!=n&&("keypress"!=n||13!=e.which&&32!=e.which)||(e.preventDefault(),t("#req_sp_promptRead_modal").modal("hide"),o.trigger("mdreq",this.model.attributes))},modalCloseOnHide:function(e){t.data(this,"alertModelTimer",setTimeout(function(){t("#loanShowPriceTextWrapper").remove()},250))},modalCancel:function(e){if("view"!==t.trim(t("#operation").val()||""))t("#req_sp_promptRead_modal").modal("hide");else{var n=""+this.model.get("BiblioData").docID;t("#req_sp_promptRead_modal").modal("hide"),c=new c;var i=document.referrer;(""===i||"undefined"===i||""!==i&&-1!=i.indexOf("reader.action"))&&(i="detail.action?docID="+n),c.navigateURL(c.isChannelPqOne()?t("#detailPQURL").html():i)}},sendRequestMed:function(){var e=this.model.get("BiblioData").docID,n=new Date,i={docID:e,availReqPromptType:1};t.ajax({url:"confirmPurchase.action?tm="+n.getTime(),dataType:"json",type:"POST",data:i,async:!1,success:function(e){if(0===e.statusCode){t("#req_sp_promptRead_modal").modal("hide");location.protocol,location.hostname,location.port&&location.port,location.pathname;window.location.href=a.updateQueryStringWithOutHashSupport(location.href,"ppg",t("#current-page").val())}else if("FAILURE"===e.status){t("#req_sp_promptRead_modal").modal("hide"),t("#dialogModalAlertError").modal("show").find("#msg").empty().html(e["status-message"])}},error:function(){t("#req_sp_promptRead_modal").modal("hide"),t("#dialogModalAlertError").modal("show").find("#msg").empty().html(l.t("rr_please_try_again"))}})},onSubmitReq:function(t){this.sendRequestMed()}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(1),n(2),n(13),n(6),n(8),n(12)],void 0===(a=function(t,e,n,o,a,r,s,l,c){"use strict";return e.ItemView.extend({template:n.readerMedRTextTemplate,el:"#medTextWrapper",initialize:function(t){var e=i.extend({},t);this.model=new r(e),this.model.bind("sync",this.render,this),this.render()},events:{"click #reqFulAccSubmit":"onSubmitReq","keypress #reqFulAccSubmit":"onSubmitReqKp","hidden.bs.modal #req_browseRead_modal":"modalCloseOnHide"},onRender:function(){o.trigger("resetPgSel",!0,!0),o.trigger("clsPgSel",this.model.get("pageNum"),!0),t("#req_browseRead_modal").modal("show")},templateHelpers:{something:function(){return"Do stuff with "+this.page.parts+" because it's awesome."},wrapDashErrorMessage:function(){return void 0!==this["status-message"]?this["status-message"]:l.t("rr_content_not_allowed")}},modalCloseOnHide:function(e){t.data(this,"alertModelTimer",setTimeout(function(){t("#medTextWrapper").remove()},250))},sendRequestMed:function(e){var n=t.trim(t("#emailReqAccTo").val()||""),i=t.trim(t("#reqAccUserName").val()||""),o=t.trim(t("#emailReqAccConf").val()||""),a=t.trim(t("#reqAccMsg").val()||""),r=t.trim(t("#availReqAccesType option:selected").val()),s=t.trim(t("#reqBarCode").val()||""),d=t.trim(t("#reqDropDown option:selected").val()),u=new Date,p=this.model.get("BiblioData").docID,h={docID:p,emailReqAccTo:n,reqAccUserName:i,emailReqAccConf:o,reqAccMsg:a,availReqAccesType:r,barCode:s,dropDown:d,reqType:e||""};t.ajax({url:"reqMediation.action?tm="+u.getTime(),dataType:"json",type:"POST",data:h,async:!1,success:function(e){if(0===e.statusCode)t("#req_browseRead_modal").modal("hide"),(c=new c).navigateURL(c.isChannelPqOne()?t("#detailPQURL").html():"detail.action?docID="+p);else if("FAILURE"===e.status){t("#emailReqAccTo").attr("aria-labelledby","emailReqAccTo_error"),t("#emailReqAccToWrapper").addClass("has-error");var n=e["status-message"];"Email is not valid."===n&&(n=l.t("rr_email_invalid")),t("#emailReqAccTo_error").removeClass("hide").empty().text(n)}},error:function(){t("#req_browseRead_modal").modal("hide"),t("#dialogModalAlertError").modal("show").find("#msg").empty().html(l.t("rr_please_try_again"))}})},onSubmitReqKp:function(t){this.onSubmitReq(t)},onSubmitReq:function(e){e.preventDefault();t(this);var n=!0,i=t.trim(t("#emailReqAccTo").val()||"");""===i?(t("#emailReqAccTo").attr("aria-labelledby","emailReqAccTo_error"),t("#emailReqAccToWrapper").addClass("has-error"),t("#emailReqAccTo_error").removeClass("hide").empty().text(l.t("rr_email_error")),n=!1):(t("#emailReqAccTo").removeAttr("aria-labelledby"),t("#emailReqAccToWrapper").removeClass("has-error"),t("#emailReqAccTo_error").addClass("hide").empty()),""===t.trim(t("#reqAccUserName").val()||"")?(t("#reqAccUserName").attr("aria-labelledby","reqAccUserName_error"),t("#reqAccUserNameWrapper").addClass("has-error"),t("#reqAccUserName_error").removeClass("hide").empty().text(l.t("rr_username_error")),n=!1):(t("#reqAccUserName").removeAttr("aria-labelledby"),t("#reqAccUserNameWrapper").removeClass("has-error"),t("#reqAccUserName_error").addClass("hide").empty());var o=t.trim(t("#emailReqAccConf").val()||"");void 0===o||""!==o&&o===i?(t("#emailReqAccConf").removeAttr("aria-labelledby"),t("#emailReqAccConfWrapper").removeClass("has-error"),t("#emailReqAccConf_error").addClass("hide").empty()):(t("#emailReqAccConf").attr("aria-labelledby","emailReqAccTo_error"),t("#emailReqAccConfWrapper").addClass("has-error"),t("#emailReqAccConf_error").removeClass("hide").empty().text(l.t("rr_email_mismatch")),n=!1),""===t("#availReqAccesType option:selected").val()?(t("#availReqAccesType").attr("aria-labelledby","availReqAccesType_error"),t("#availReqAccesTypeWrapper").addClass("has-error"),t("#availReqAccesType_error").removeClass("hide").empty().text("Please select access"),n=!1):(t("#availReqAccesType").removeAttr("aria-labelledby"),t("#availReqAccesTypeWrapper").removeClass("has-error"),t("#availReqAccesType_error").addClass("hide").empty());var a=t.trim(t("#reqBarCode").val()||""),r=t.trim(t("#reqBarCodeMandatory").val()||""),s=t.trim(t("#reqBarCodeMandatoryErrorMsg").val()||"");void 0!==a&&""===a&&"true"===r?(t("#reqBarCode").attr("aria-labelledby","reqBarCode_error"),t("#reqBarCodeWrapper").addClass("has-error"),t("#reqBarCode_error").removeClass("hide").empty().text(s),n=!1):(t("#reqBarCode").removeAttr("aria-labelledby"),t("#reqBarCodeWrapper").removeClass("has-error"),t("#reqBarCode_error").addClass("hide").empty());var c=t("#reqDropDown option:selected").val(),d=t.trim(t("#reqDropDownMandatory").val()||""),u=t.trim(t("#reqDropDownMandatoryErrorMsg").val()||"");if(void 0===c||""!==c&&"-1"!==c||"true"!==d)t("#reqDropDown").removeAttr("aria-labelledby"),t("#reqDropDownWrapper").removeClass("has-error"),t("#reqDropDown_error").addClass("hide").empty();else{t('label[for="reqDropDown"]').html();t("#reqDropDown").attr("aria-labelledby","reqDropDown_error"),t("#reqDropDownWrapper").addClass("has-error"),t("#reqDropDown_error").removeClass("hide").empty().text(u),n=!1}n?this.sendRequestMed(this.model.get("triggerType")):t("#medReqForm .has-error:first").find("input").focus()}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){(function(i,o){var a,r;a=[n(3),n(4),n(1)],void 0===(r=function(t,e,n){"use strict";return t.ItemView.extend({template:e.readerSideBarTemplate,id:"sideBar",initialize:function(t){this.gbData=t,n.on("openBsh",this.bookSearchSample,this),n.on("openBrp",this.bookResourcesSample,this)},events:{"click #bookToc":"bookTocSample","click #bookDetails":"bookDetailsSample","click #bookNotes":"bookNotesSample","click #bookSearch":"bookSearchSample","click #bookResources":"bookResourcesSample"},onRender:function(){},bookTocSample:function(t){var e=t.type;"click"!=e&&("keypress"!=e||13!=t.which&&32!=t.which)||(t.preventDefault(),i(t.currentTarget).find("div").addClass("svgIcon-selected svgBtn-sidebar-selected").parent().siblings().find("div").removeClass("svgIcon-selected svgBtn-sidebar-selected"),n.trigger("openPanel","bookToc"),this.gbData.uAccsMdRR>0&&i.data(this,"testTimeoutFocus",setTimeout(function(){i("#A-Section").attr("tabindex","-1").focus()},250)),i(".tabSelected").empty(),i(t.currentTarget).find("span.tabSelected").html("Tab currently selected"))},bookDetailsSample:function(t){t.preventDefault(),i(t.currentTarget).find("div").addClass("svgIcon-selected svgBtn-sidebar-selected").parent().siblings().find("div").removeClass("svgIcon-selected svgBtn-sidebar-selected"),n.trigger("openPanel","bookDetails"),this.gbData.uAccsMdRR>0&&i.data(this,"testTimeoutFocus",setTimeout(function(){i("#B-Section").attr("tabindex","-1").focus()},250)),i(".tabSelected").empty(),i(t.currentTarget).find("span.tabSelected").html("Tab currently selected")},bookNotesSample:function(t){t.preventDefault(),i(t.currentTarget).find("div").addClass("svgIcon-selected svgBtn-sidebar-selected").parent().siblings().find("div").removeClass("svgIcon-selected svgBtn-sidebar-selected"),n.trigger("openPanel","bookNotes"),this.gbData.uAccsMdRR>0&&i.data(this,"testTimeoutFocus",setTimeout(function(){i("#C-Section").attr("tabindex","-1").focus()},250)),i(".tabSelected").empty(),i(t.currentTarget).find("span.tabSelected").html("Tab currently selected")},bookSearchSample:function(t){o.isObject(t)&&t.preventDefault(),i("#bookSearch").find("div").addClass("svgIcon-selected svgBtn-sidebar-selected").parent().siblings().find("div").removeClass("svgIcon-selected svgBtn-sidebar-selected"),n.trigger("openPanel","bookSearch"),this.gbData.uAccsMdRR>0&&i.data(this,"testTimeoutFocus",setTimeout(function(){i("#D-Section").attr("tabindex","-1").focus()},250)),i(".tabSelected").empty(),i(t.currentTarget).find("span.tabSelected").html("Tab currently selected")},bookResourcesSample:function(t){o.isObject(t)&&t.preventDefault(),i("#bookResources").find("div").addClass("svgIcon-selected svgBtn-sidebar-selected").parent().siblings().find("div").removeClass("svgIcon-selected svgBtn-sidebar-selected"),n.trigger("openPanel","bookResources"),this.gbData.uAccsMdRR>0&&i.data(this,"testTimeoutFocus",setTimeout(function(){i("#E-Section").attr("tabindex","-1").focus()},250)),i(".tabSelected").empty(),i(t.currentTarget).find("span.tabSelected").html("Tab currently selected")}})}.apply(e,a))||(t.exports=r)}).call(this,n(0),n(5))},function(t,e,n){var i,o;i=[n(3),n(0),n(5),n(4),n(6),n(2),n(106),n(107),n(108),n(115),n(123),n(10),n(125),n(1)],void 0===(o=function(t,e,n,i,o,a,r,s,l,c,d,u,p,h){"use strict";return t.CollectionView.extend({id:"panel",className:"panelSection",itemView:r,emptyView:u,initialize:function(t){this.collection=new p(null,t.gbData),h.on("openPanel",this.togglePanelName,this)},events:{"click #closePanel":"closePanel"},onAfterItemAdded:function(t){},appendHtml:function(t,e,n){var i=t.itemViewContainer?t.$(t.itemViewContainer):t.$el,o=i.children();o.size()<=n?i.append(e.el):o.eq(n).before(e.el)},getItemView:function(t){var e,n=t.get("panelName");return"bookToc"===n&&(e=r),"bookDetails"===n&&(e=s),"bookNotes"===n&&(e=l),"bookSearch"===n&&(e=c),"bookResources"===n&&(e=d),e},togglePanelName:function(t){var e=this;this.children.each(function(n){if(t===n.model.get("panelName")){var i=n.$el.attr("id");e.openPanel(i)}else n.$el.addClass("hide").removeClass("show").attr("aria-hidden","true")})},closePanel:function(){var t=e(window).width(),n=e("#panel > div").filter(":visible").attr("id"),i=this;e("#"+n).addClass("hide").removeClass("show").attr("aria-hidden","true"),e("#"+n).fadeOut(500,function(){var n=e("#svgSideBarLayoutRegion").outerWidth(),o=t-n-50;e("#mainViewer").animate({width:o+"px"},500),e("#panelLayoutRegion").animate({width:0},500,function(){i.sizeDivs()})})},openPanel:function(t){if(e("#panelLayoutRegion").removeClass("hidden-xs hidden-sm hidden-md"),e("#panelLayoutRegion").outerWidth()>250)e("#"+t).fadeIn(500).show().addClass("show").removeClass("hide").attr("aria-hidden","false");else{var n=e(window).width()-e("#svgSideBarLayoutRegion").outerWidth()-400-50;e("#"+t).hide(),e("#mainViewer").css({width:n+"px"}),e("#panelLayoutRegion").animate({width:"400px"},500,function(){e("#"+t).fadeIn(500).addClass("show").removeClass("hide").attr("aria-hidden","false")}),this.sizeDivs()}},sizeDivs:function(){e(window).width(),e("#sideBar").outerWidth(),e("#panel").outerWidth()}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(3),n(0),n(4),n(6),n(2),n(1),n(14),n(8)],void 0===(a=function(t,e,n,o,a,r,s,l){"use strict";return t.ItemView.extend({id:"A-Section",defaults:{panelName:"bookToc"},model:s,initialize:function(t){this.gbData=t.model.collection.gbData;var e=i.extend({},t.model.collection.gbData,t.model.attributes);this.model=new s(e),this.model.bind("sync",this.render,this),this.model.fetch()},getTemplate:function(){return this.model&&void 0!==this.model.get("DocTOC")?n.readerPanelTocTemplate:(this.model&&this.model.isSyncing,n.mainLoadingContentTemplate)},onBeforeRender:function(){},onRender:function(){this.gbData.BiblioData=this.model.get("BiblioData")||{},this.gbData.DocUser=this.model.get("DocUser")||{};var t=this.gbData.DocUser;this.gbData.uAccsMdRR>0?(e("#tc-list-cont a>span >svg xlink:href").toggleClass("icon-panel-open icon-panel-close"),e("#tc-list-cont a>span >svg").find("use").attr("xlink:href","#icon-panel-opened"),e("#tc-list-cont .toggleText").empty().html("This section is expanded").parent().parent().addClass("tabcon-open"),e("#toolCopy").remove(),e("#toolHighlight").parent().parent().parent().remove(),e("#tool-viewsmaller").parent().parent().remove(),e("#tool-pager-prev").parent().parent().remove(),this.$el.find("#closePanel").parent().remove()):e("#tc-list-cont div").toggle(),void 0!==this.gbData&&!1===this.gbData.DocUser.customSearchAvailable&&(e("#contextMenuPop> #contextCustomSearch").attr("disabled","disabled").hide(),e("#bookResources").attr("disabled","disabled").hide()),void 0!==this.gbData&&!0===this.gbData.DocUser.customSearchAvailable&&!1===this.gbData.DocUser.customeTextSearchAvailable&&e("#contextMenuPop> #contextCustomSearch").attr("disabled","disabled").hide(),void 0!==this.gbData&&!0===this.gbData.DocUser.alreadyInBookshelf&&(e("#toolAddToBookshelf").removeClass("icon-bookshelf-add").addClass("bookshelf-added icon-bookshelf-added tool-btn-disabled").attr("disabled","disabled"),e("#toolAddToBookshelf > .icon-bookshelf-add").removeClass("icon-bookshelf-add").addClass("icon-bookshelf-added tool-btn-disabled").html('<svg focusable="false" width="20" height="20"   ><use xlink:href="#icon-bookshelf-added" /></svg>')),void 0!==this.gbData&&"title_list"===this.gbData.DocUser.channelType&&e("#toolDownload").attr("disabled","disabled").hide(),void 0!==this.gbData&&!1===this.gbData.DocUser.availableForDownload&&(e("#toolDownload").prop("title",l.t("rr_fd_not_offered")),e("#toolDownload").attr("disabled","disabled"),e("#toolDownload").addClass("tool-btn-disabled")),void 0===this.gbData||"PREVIEW_ACCESS"!==this.gbData.DocUser.docAccessType&&"PENDING"!==this.gbData.DocUser.requestType||(e("#toolCopy").attr("disabled","disabled").hide(),e("#toolChapterDownload").attr("disabled","disabled").hide(),e("#toolPrint").attr("disabled","disabled").hide(),e("#toolDownload").attr("disabled","disabled").hide(),e("#contextMenuPop> #contextCopy").attr("disabled","disabled").hide()),void 0!==this.gbData&&this.gbData.DocUser.docID>0&&(!t.unlimitedCopy&&t.channelDisabledCopy&&!t.unlimitedPrint&&t.channelDisabledPrint?(e("#toolCopy").attr("disabled","disabled").hide(),e("#toolChapterDownload").attr("disabled","disabled").hide(),e("#toolPrint").attr("disabled","disabled").hide(),e("#contextMenuPop> #contextCopy").attr("disabled","disabled").hide()):(!t.unlimitedCopy&&t.publisherDisbaledCopy?(e("#toolCopy").attr("disabled","disabled").prop("title",l.t("rr_copy_not_offered")),e("#contextMenuPop> #contextCopy").attr("disabled","disabled").prop("title",l.t("rr_copy_not_offered")),e("#toolCopy").addClass("tool-btn-disabled")):t.unlimitedCopy?(e("#toolCopy").prop("title",l.t("rr_pages_remain_to_copy")),e("#toolCopy").removeClass("tool-btn-disabled")):t.remainingCopyCount<=0&&(e("#toolCopy").attr("disabled","disabled").prop("title",l.t("rr_remaining_copy_allowance")),e("#contextMenuPop> #contextCopy").attr("disabled","disabled").prop("title",l.t("rr_remaining_copy_allowance")),e("#toolCopy").addClass("tool-btn-disabled")),!t.unlimitedPrint&&t.publisherDisbaledPrint?(e("#toolChapterDownload").attr("disabled","disabled").prop("title",l.t("rr_print_not_offered")),e("#toolPrint").attr("disabled","disabled").prop("title",l.t("rr_print_not_offered")),e("#toolChapterDownload").addClass("tool-btn-disabled"),e("#toolPrint").addClass("tool-btn-disabled")):t.unlimitedPrint?(e("#toolChapterDownload").prop("title",l.t("rr_pages_remain_to_print")),e("#toolPrint").prop("title",l.t("rr_pages_remain_to_print"))):t.remainingPrintCount<=0&&(e("#toolChapterDownload").attr("disabled","disabled").prop("title",l.t("rr_remaining_print_allowance")),e("#toolPrint").attr("disabled","disabled").prop("title",l.t("rr_remaining_print_allowance")),e("#toolChapterDownload").addClass("tool-btn-disabled"),e("#toolPrint").addClass("tool-btn-disabled"))),void 0!==this.gbData&&(window.dataLayer.push({BookTitle_Hit:this.gbData.BiblioData.longTitle,Publisher_Hit:this.gbData.BiblioData.publisher,DocumentID_Hit:""+this.gbData.BiblioData.docID,TotBookPages_Hit:this.gbData.BiblioData.pages,TimeStamp_Hit:new Date,PrintLimitPg_Hit:this.gbData.DocUser.totalPrintLimit,Quota_remPg_Hit:this.gbData.DocUser.remainingPrintCount,TOCAvail_Hit:this.model.get("tocAvailable"),TotChapTop_Hit:this.model.get("totalTopChapters"),ChapExceedTop_Hit:this.model.get("topChapterExceed"),TotChapSecond_Hit:this.model.get("secondLevelChapters"),ChapExceedSecond_Hit:this.model.get("secondLevelChapterExceeds"),PrintISBN_Hit:this.gbData.BiblioData.pIsbn,EbookISBN_Hit:this.gbData.BiblioData.eIsbn,TitleAccessType_Hit:this.gbData.DocUser.demographicAccessType,LCSubjectHeading_Hit:this.gbData.BiblioData.lcSubHeadings.join(" ;;; "),LCSubjectHeadingArray_Hit:this.gbData.BiblioData.lcSubHeadings,LCSubjectHeading_MET:1,DRMFreeTitle_Hit:this.gbData.DocUser.drmFree}),"true"===e("#pqOne_key").val()&&dataLayer.push({PQ1EBCDocumentID_Hit:""+this.gbData.BiblioData.docID})));var n=a.getParameterByName("query");if(n&&(e("#searchInBookTermInToc").val(decodeURIComponent(n)),this.searchInBook(jQuery.Event("click"))),!0===this.gbData.pqOneSite)(i=this.$el.find(".meta-more a")).attr("target","_top"),i.attr("href",e("#detailPQURL").html());else if(n){var i,o=(i=this.$el.find(".meta-more a")).attr("href");o&&-1==o.indexOf("query=")&&i.attr("href",o+"&query="+encodeURIComponent(n))}},events:{"click #tc-list-cont .icon-panel-open":"expandToc","click #tc-list-cont .icon-panel-close":"collapseToc","keypress #tc-list-cont a.no-decor":"collapseTocKp","click #tc-list-cont a:not('.no-decor')":"goToPage","click #closeMetaData .icon-panel-close":"slidUpDownDocMetaData","click #openMetaData .icon-panel-open":"slidUpDownDocMetaData","keypress #searchInBookTermInToc":"goToSearchByEnter","click #searchWithInBookToc":"searchInBook"},expandToc:function(t){t.preventDefault();var n=e(t.target),i=n;0===e(n.parent()).eq(0).html().indexOf("<svg ")?i=e(n.parent().eq(0)):0===e(n.parent().parent()).eq(0).html().indexOf("<svg ")&&(i=e(n.parent().parent().eq(0))),i.parent().parent().next("div").toggle(),i.html('<svg focusable="false"  width="20" height="20"  ><use xlink:href="#icon-panel-opened"></use></svg>'),i.toggleClass("icon-panel-open icon-panel-close"),this.toggleText(i.parent().find("span.toggleText"))},collapseToc:function(t){t.preventDefault();var n=e(t.target),i=n;0===e(n.parent()).eq(0).html().indexOf("<svg ")?i=e(n.parent().eq(0)):0===e(n.parent().parent()).eq(0).html().indexOf("<svg ")&&(i=e(n.parent().parent().eq(0))),i.parent().parent().next("div").toggle(),i.html('<svg focusable="false"  width="20" height="20"  ><use xlink:href="#icon-panel-closed"></use></svg>'),i.toggleClass("icon-panel-open icon-panel-close"),this.toggleText(i.parent().find("span.toggleText"))},expandTocKp:function(t){var n=t.type;if("click"==n||"keypress"==n&&(13==t.which||32==t.which)){t.preventDefault();var i=e(t.target),o=i;0===e(i.parent()).eq(0).html().indexOf("<svg ")?o=e(i.parent().eq(0)):0===e(i.parent().parent()).eq(0).html().indexOf("<svg ")&&(o=e(i.parent().parent().eq(0))),o.parent().parent().next("div").toggle(),o.html('<svg focusable="false"  width="20" height="20"  ><use xlink:href="#icon-panel-opened"></use></svg>'),o.toggleClass("icon-panel-open icon-panel-close"),this.toggleText(o.parent().find("span.toggleText"))}},collapseTocKp:function(t){var n=t.type;if("click"==n||"keypress"==n&&(13==t.which||32==t.which)){t.preventDefault();var i=e(t.target),o=i;0===e(i.parent()).eq(0).html().indexOf("<svg ")?o=e(i.parent().eq(0)):0===e(i.parent().parent()).eq(0).html().indexOf("<svg ")&&(o=e(i.parent().parent().eq(0))),o.parent().parent().next("div").toggle(),o.html('<svg focusable="false"  width="20" height="20"  ><use xlink:href="#icon-panel-closed"></use></svg>'),o.toggleClass("icon-panel-open icon-panel-close"),this.toggleText(o.parent().find("span.toggleText"))}},goToPage:function(t){t.preventDefault();var n=e(t.target);if(!n.hasClass("tabcon-icon")){var i=n.attr("href").split("=")[1]||1;r.trigger("jtp",parseInt(i))}},slidUpDownDocMetaData:function(t){e(t.target);e("#book-meta-open","#toc-container").animate({height:"toggle",opacity:"toggle"},"slow"),e("#book-meta-closed","#toc-container").animate({height:"toggle",opacity:"toggle"},"slow")},searchInBook:function(t){t.preventDefault(),0===e("#D-Section").length?r.trigger("openBsh","bookSearch"):(r.trigger("openBshT"),r.trigger("openBsh","bookSearch"))},goToSearchByEnter:function(t){13===t.which&&(0===e("#D-Section").length?r.trigger("openBsh","bookSearch"):(r.trigger("openBshT"),r.trigger("openBsh","bookSearch")))},resizePanel:function(){var t=this.$el.find("#book-meta-open").outerHeight()+this.$el.find("#search-block").outerHeight()+this.$el.find(".tc-title").outerHeight();this.$el.find("#tc-list-cont").css({height:e("#panel").outerHeight()-t-115})},toggleText:function(t){"This section is collapsed"===t.html()?t.html("This section is expanded"):t.html("This section is collapsed")}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){(function(i){var o,a;o=[n(3),n(0),n(4),n(6),n(2),n(1),n(14)],void 0===(a=function(t,e,n,o,a,r,s){"use strict";return t.ItemView.extend({template:n.panelBookDetailsTemplate,id:"B-Section",defaults:{panelName:"bookDetails"},initialize:function(t){this.gbData=t.model.collection.gbData;var e=i.extend({},t.model.collection.gbData,t.model.attributes);this.model=new s(e),this.model.bind("sync",this.render,this)},onBeforeRender:function(){},onRender:function(){this.gbData.BiblioData=this.model.get("BiblioData")||{},e("#toolAddToBookshelf").hasClass("icon-bookshelf-added")&&(this.$el.find("#bookDetailBookShelf").attr("disabled","disabled"),this.$el.find("#bookDetailBookShelf > .icon-bookshelf-add").removeClass("icon-bookshelf-add").addClass("icon-bookshelf-added tool-btn-disabled").html('<svg focusable="false" width="20" height="20" style="pointer-events:none;" ><use xlink:href="#icon-bookshelf-added" /></svg>'));var t=e("#toolDownload");if(t.attr("disabled")&&(this.$el.find("#bookDetailDownload").attr("disabled","disabled"),this.$el.find("#bookDetailDownload").addClass("tool-btn-disabled")),"none"==t.css("display")&&this.$el.find("#bookDetailDownload").hide(),this.gbData.uAccsMdRR>0&&(this.$el.find(".accArHid").remove(),this.$el.find("#closePanel").parent().remove()),!0===this.gbData.pqOneSite){(i=this.$el.find(".meta-more a")).attr("target","_top"),i.attr("href",e("#detailPQURL").html())}else{var n=a.getParameterByName("query");if(n){var i,o=(i=this.$el.find(".meta-more a")).attr("href");o&&-1==o.indexOf("query=")&&i.attr("href",o+"&query="+encodeURIComponent(n))}}},events:{"click #closeMetaData .icon-panel-close":"slidUpDownDocMetaData","click #openMetaData .icon-panel-open":"slidUpDownDocMetaData","click #bookDetailBookShelf":"addToBookShelf","click #bookDetailBooklink":"showShareLink","click #bookDetailBookCitation":"showCite","click #bookDetailDownload":"showDownloadLink","click #bookDetailDownloadForReqMed":"checkMedRequestMed","click #reqForMediation":"checkLnMedRequestMed","keypress #bookDetailDownloadForReqMed":"checkMedRequestMedKp","keypress #reqForMediation":"checkLnMedRequestMedKp"},slidUpDownDocMetaData:function(t){e(t.target);e("#bookMetaOpen").animate({height:"toggle",opacity:"toggle"},"slow"),e("#bookMetaClosed").animate({height:"toggle",opacity:"toggle"},"slow")},addToBookShelf:function(t){r.trigger("atbs","added")},showShareLink:function(t){r.trigger("sblnk")},showCite:function(t){r.trigger("tbshct")},showDownloadLink:function(t){r.trigger("tbdl")},checkLnMedRequestMed:function(t){this.checkMedRequestMed(t)},checkLnMedRequestMedKp:function(t){this.checkMedRequestMed(t)},checkMedRequestMedKp:function(t){this.checkMedRequestMed(t)},checkMedRequestMed:function(t){var n=t.type;"click"!=n&&("keypress"!=n||13!=t.which&&32!=t.which)||(t.preventDefault(),function(t){new Date;var n="checkDrmAccess.action?docID="+t.docID+"&type=read";e.ajax({url:n,async:!1,success:function(t){"SUCCESS"!==t.status&&"FAILURE"!==t.status||r.trigger("mdreq",t)},error:function(t,e,n){}})}(this.model.get("DocUser")))}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){(function(i){var o,a;o=[n(3),n(0),n(4),n(6),n(2),n(1),n(109),n(15),n(18),n(111),n(22),n(21)],void 0===(a=function(t,e,n,o,a,r,s,l,c,d,u,p){"use strict";return t.CompositeView.extend({template:n.panelBookNotesCompositeTemplate,itemViewContainer:"#notesBookResults",id:"C-Section",itemView:l,emptyView:s,initialize:function(t){var e=i.extend({},t.model.collection.gbData,t.model.attributes);this.model.set(e),void 0!==t.model.collection.gbData.DocUser&&t.model.collection.gbData.DocUser.signedIn&&(this.collection=new p(null,i.extend({},t.model.collection.gbData)),this.collection.prepareData(""),r.on("pnlAnt",this.userAnnots,this))},events:{"click #annotations-export":"getNotes","keypress #annotations-export":"getNotesKp"},onRender:function(){this.model.collection.gbData.uAccsMdRR>0&&(this.$el.find("#closePanel").parent().remove(),this.$el.find("#notesBookResults").attr({role:"list",tabindex:"0"})),"undefined"!==this.model.collection.gbData.DocUser&&this.model.collection.gbData.DocUser.signedIn},itemViewOptions:function(t){return{tmpUser:void 0!==this.model.collection?this.model.collection.gbData.DocUser:{}}},appendHtml:function(t,e,n){var i=t.itemViewContainer?t.$(t.itemViewContainer):t.$el,o=i.children();o.size()<=n?i.append(e.el):o.eq(n).before(e.el)},getItemView:function(t){var e;return"notesResult"===t.get("panelNotesResultName")&&(e=d),e},onItemRemoved:function(){},userAnnots:function(t,n){if("save"!==n){if("del"===n){r.trigger("pnlAntSnp_"+t.chapterId,t,n);var o=e("#annotCount_"+t.chapterId);if((c=parseInt(o.text())-1)<=0){s=this.collection.findWhere({cptInd:t.chapterId});this.collection.remove(s)}else o.html("").text(c)}else if("edit"===n){s=this.collection.findWhere({cptInd:t.chapterId});if(!i.isUndefined(s))return void r.trigger("pnlAntSnp_"+t.chapterId,t,n)}}else{var a=t.chap.chapId,s=this.collection.findWhere({cptInd:a.chapterId});if(i.isUndefined(s)){var l=[];l[0]={panelNotesResultName:"notesResult",cptInd:a.chapterId,at:a.chapterId,cid:a.chapterId,_id:a.chapterId,title:a.chapterName,data:a},this.collection.add(l,{add:!1,remove:!0,merge:!0}),this.collection.sortByField("cptInd")}else{s.get("data").annotCount=parseInt(s.get("data").annotCount)+1;var c=e("#annotCount_"+a.chapterId),d=parseInt(c.text())+1;c.html("").text(d)}r.trigger("pnlAntSnp_"+a.chapterId,t,n)}},getNotesKp:function(t){this.getNotes(t)},getNotes:function(t){var n=t.type;if(("click"==n||"keypress"==n&&(13==t.which||32==t.which))&&(t.preventDefault(),void 0!==this.model.collection.gbData.DocUser)){var i=new Date,o="exportBookshelfNotes.action?op=toExpNts&folderId=&docId="+this.model.collection.gbData.DocUser.docID+"&folderName=&folderType=&dt="+i.getTime();e('<a target="_blank" id="tmpExNtsLink" href='+o+" />").appendTo("#toolbar"),e("#tmpExNtsLink")[0].click(),e("#tmpExNtsLink").remove()}}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){(function(i){var o,a;o=[n(3),n(0),n(4),n(6),n(2),n(1)],void 0===(a=function(t,e,n,o,a,r){"use strict";return t.ItemView.extend({template:n.panelBookNotesLoadingContentTemplate,initialize:function(t){var e=i.extend({},t,this.model.attributes);this.model.attributes=e},events:{"click #signInNoteButton":"userSignInBtn"},userSignInBtn:function(t){r.trigger("tbsgn","view_notes")}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({idAttribute:"didYM",url:function(){return"termSuggestion.action?remote_id="+this.get("ssen")+"&asJson=1&docID="+this.get("docID")+"&p00="+encodeURIComponent(this.get("searchTerm"))}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(3),n(0),n(4),n(6),n(2),n(1),n(10),n(112),n(21),n(15)],void 0===(a=function(t,e,n,o,a,r,s,l,c,d){"use strict";return t.CompositeView.extend({template:n.panelBookNotesResultTemplate,tagName:"li",id:function(){return"topChapterNotesSelection_"+this.model.get("cptInd")},className:"annotation-level-1",itemViewContainer:"[id^='notesLevelSnips_']",itemView:d,initialize:function(t){this.collection=new c(null,t.model.collection.gbData),r.on("pnlAntSnp_"+this.model.get("cptInd"),this.userAnnotsSnp,this)},onRender:function(){this.model.collection.gbData.uAccsMdRR>0&&(this.$el.attr({role:"listitem",tabindex:"0"}),this.$el.find("[id^='notesLevelSnips_']").attr({role:"group",tabindex:"0"}))},onItemRemoved:function(){0===this.collection.length&&this.collection.remove()},events:{"click [id^='chapterNotesSelection_'] div":"chapterNotesSelection"},modelEvents:{"change merge":"render","change remove":"render"},comparator:function(t){return t.get("data").page},appendHtml:function(t,e,n){var i=t.itemViewContainer?t.$(t.itemViewContainer):t.$el,o=i.children();o.size()<=n?i.append(e.el):o.eq(n).before(e.el)},chapterNotesSelection:function(t){var n=t.type;if("click"==n||"keypress"==n&&(13==t.which||32==t.which)){t.preventDefault();var i=e(t.currentTarget).hasClass("annotation-chapter")?e(t.currentTarget):e(t.currentTarget).parent();if(i.find("div .icon-panel-open").length>0)this.expandSearch(i),this.toggleText(i.find("span.toggleText"));else if(i.find("div .icon-panel-close").length>0)this.collapseSearch(i),this.toggleText(i.find("span.toggleText"));else{var o=i.find("div[id^='noHits_']").attr("id");null!=o&&r.trigger("jtp",o.split("_")[1],"ok")}}},expandSearch:function(t){var e=t.find("div .icon-panel-open");e.removeClass("icon-panel-open").addClass("icon-panel-close"),e.html('<svg focusable="false"  width="20" height="20" style="pointer-events:none;" ><use xlink:href="#icon-panel-opened"></use></svg>'),t.siblings(".annotation-list").toggle();var n=t.attr("id").split("_")[1];0===this.collection.length?(this.collection.prepareSnipData(n,this.model.get("data")),t.siblings(".annotation-list").toggle()):this.collection.models[0].get("data")&&this.collection.models[0].get("data").orderedPagesWithSnippet&&r.trigger("jtp",this.collection.models[0].get("data").orderedPagesWithSnippet[0].pageNumber,"ok")},collapseSearch:function(t){var e=t.find("div .icon-panel-close");e.removeClass("icon-panel-close").addClass("icon-panel-open"),e.html('<svg focusable="false"  width="20" height="20" style="pointer-events:none;" ><use xlink:href="#icon-panel-closed"></use></svg>'),t.siblings(".annotation-list").toggle()},toggleText:function(t){"This section is collapsed"===t.html()?t.html("This section is expanded"):t.html("This section is collapsed")},userAnnotsSnp:function(t,n){if("save"!==n){if("del"===n){if(e("#annotTrash_"+t.annotID).length>0){a=this.collection.findWhere({cptInd:t.chapterId,name:parseInt(t.annotID)});i.isUndefined(a)||this.collection.remove(a)}}else if("edit"===n){var o=t;a=this.collection.findWhere({cptInd:o.chapterId,name:parseInt(t.annotID)});i.isUndefined(a)||(a.attributes.data.labelText=t.labelText,a.set({attributes:a.attributes}))}}else{var a=this.collection.findWhere({cptInd:t.chap.chapId.chapterId,name:t.annotID});if(!i.isUndefined(a))return a.attributes.data.labelText=t.labelText,void this.collection.add({cptInd:t.chap.chapId.chapterId,name:parseInt(t.nAnnot.annotID),data:t.nAnnot},{add:!1,remove:!0,merge:!0});if(0===this.collection.size()){this.collection.prepareSnipData("",t.chap.chapId);var r="#chapterNotesSelection_"+t.chap.chapId.chapterId,s=e(r);s.find("div .icon-panel-open").removeClass("icon-panel-open").addClass("icon-panel-close"),s.siblings(".annotation-list").toggle(),s.siblings(".annotation-list").toggle()}else this.collection.add({cptInd:t.chap.chapId.chapterId,name:parseInt(t.nAnnot.annotID),data:t.nAnnot},{add:!1,remove:!0,merge:!0})}}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(3),n(0),n(4),n(6),n(2),n(1),n(10),n(19),n(20),n(15)],void 0===(o=function(t,e,n,i,o,a,r,s,l,c){"use strict";return t.CompositeView.extend({template:n.panelBookNotesResultChildTemplate,tagName:"li",className:"annotation-level-2",itemView:c,initialize:function(t){}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({idAttribute:"schInBk",initialize:function(t,e){},parse:function(t,e){return t}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({idAttribute:"schInBkByCh",initialize:function(t,e){},parse:function(t,e){return t}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(3),n(0),n(4),n(6),n(2),n(1),n(10),n(116),n(18),n(117),n(22),n(121)],void 0===(a=function(t,e,n,o,a,r,s,l,c,d,u,p){"use strict";return t.CompositeView.extend({template:n.panelBookSearchCompositeTemplate,itemViewContainer:"#searchBookResults",id:"D-Section",itemView:l,initialize:function(t){r.on("openBshT",this.goToSearchAlt,this),r.on("chPshRes",this.goToSearchRes,this);var n=i.extend({},t.model.collection.gbData,t.model.attributes);this.model.set(n),this.collection=new p(null,t.model.collection.gbData);var o=e("#searchInBookTermInToc");null!==o.val()&&void 0!==o.val()&&(this.collection.prepareData(o.val()),o.val(""))},ui:{searchField:"#searchInBookTerm"},events:{"click #searchWithInBook":"goToSearch","click #searchWithInBookSubmit":"goToSearch","keypress #searchInBookTerm":"goToSearchByEnter"},onRender:function(){this.model.collection.gbData.uAccsMdRR>0&&this.$el.find("#closePanel").parent().remove()},getItemView:function(t){var e,n=t.get("panelSearchResultName");return"noSearchResult"===n&&(e=l),"didYouMeanSearchResult"===n&&(e=c),"chapterSearchResult"===n&&(e=d),"frequencySearchResult"===n&&(e=u),e},openSearchByFrequency:function(t,e){var n=this.collection.findWhere({panelSearchResultName:t});null==n&&this.collection.add({panelSearchResultName:"frequencySearchResult",panelName:t,data:e},{add:!0,remove:!1,merge:!1})},goToSearch:function(t){this.collection.prepareData()},goToSearchByEnter:function(t){13===t.which&&this.collection.prepareData()},goToSearchAlt:function(t){var n=e("#searchInBookTermInToc"),i=t;null==i&&(i=n.val()),null!=i&&(this.collection.prepareData(i),n.val(""))},goToSearchRes:function(t){this.collection.reset()}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(3),n(0),n(4),n(6),n(2),n(1)],void 0===(o=function(t,e,n,i,o,a){"use strict";return t.ItemView.extend({template:n.panelBookSearchNoResultTemplate,id:"noSearchResult",defaults:{panelSearchResultName:"noSearchResult"},initialize:function(t){},onBeforeRender:function(){},onRender:function(){}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(3),n(0),n(4),n(6),n(2),n(1),n(10),n(118),n(119)],void 0===(o=function(t,e,n,i,o,a,r,s,l){"use strict";return t.CompositeView.extend({template:n.panelBookSearchChapterResultTemplate,id:"chapterSearchResult",defaults:{panelSearchResultName:"chapterSearchResult"},itemViewContainer:"#searchResultsListByChapter",itemView:s,emptyView:r,initialize:function(t){a.on("openPanel",this.toggleChapterFrequency,this),this.collection=new l(null,t.model.collection.gbData)},templateHelpers:{totalPageHits:function(){return this.data["total-page-hits"]}},onRender:function(){var t=e("#search-container").outerWidth();this.$el.find("#search-container").css("width",t),this.model.collection.gbData.uAccsMdRR>0&&this.$el.find("#searchResultsListByChapter").attr({tabindex:"0"})},events:{"click #searchResultByChapter":"toggleChapterFrequency","click #searchResultByFrequencey":"toggleFrequencyChapter","click #toggle-results":"toggleResults"},toggleChapterFrequency:function(t){e("#chapterSearchResult").show(),e("#frequencySearchResult").hide()},toggleFrequencyChapter:function(t){e("#chapterSearchResult").hide(),e("#frequencySearchResult").show(),a.trigger("openFqSP","frequencySearchResult",this.model.collection.gbData)},toggleResults:function(t){t.preventDefault(),this.model.collection.gbData.showSearhHits=!1,//!resultsShow;
a.trigger("hSQHits"),a.trigger("chPshRes")}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(3),n(0),n(4),n(6),n(2),n(1),n(10),n(19),n(20)],void 0===(o=function(t,e,n,i,o,a,r,s,l){"use strict";return t.CompositeView.extend({template:n.panelBookSearchChapterResultChildTemplate,tagName:"li",id:function(){return"topChapterSelection_"+this.model.get("cptInd")},className:"search-level-1",itemViewContainer:"[id^='chapterLevelSnips_']",itemView:s,initialize:function(t){this.collection=new l(null,t.model.collection.gbData)},onRender:function(){this.model.collection.gbData.uAccsMdRR>0&&this.$el.attr({role:"link",tabindex:"0"})},events:{"click [id^='chapterSelection_']":"chapterSelection"},chapterSelection:function(t){var n=e(t.currentTarget);if(n.find("div .icon-panel-open").length>0)this.expandSearch(t),this.toggleText(n.find("span.toggleText"));else if(n.find("div .icon-panel-close").length>0)this.collapseSearch(t),this.toggleText(n.find("span.toggleText"));else{var i=n.find("div[id^='noHits_']").attr("id");null!=i&&a.trigger("jtp",i.split("_")[1],"ok")}},expandSearch:function(t){var n=e(t.currentTarget),i=n.find("div .icon-panel-open");i.html('<svg focusable="false"  width="20" height="20" style="pointer-events:none;" ><use xlink:href="#icon-panel-opened"></use></svg>'),i.removeClass("icon-panel-open").addClass("icon-panel-close"),n.siblings(".search-level-2-group").toggle();var o=n.attr("id").split("_")[1];0===this.collection.length?(this.collection.prepareData(o),n.siblings(".search-level-2-group").toggle()):this.collection.models[0].get("data")&&this.collection.models[0].get("data").orderedPagesWithSnippet&&a.trigger("jtp",this.collection.models[0].get("data").orderedPagesWithSnippet[0].pageNumber,"ok")},collapseSearch:function(t){var n=e(t.currentTarget),i=n.find("div .icon-panel-close");i.html('<svg focusable="false"  width="20" height="20" style="pointer-events:none;" ><use xlink:href="#icon-panel-closed"></use></svg>'),i.removeClass("icon-panel-close").addClass("icon-panel-open"),n.siblings(".search-level-2-group").toggle()},toggleText:function(t){"This section is collapsed"===t.html()?t.html("This section is expanded"):t.html("This section is collapsed")}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0),n(120),n(6),n(2),n(1),n(8)],void 0===(o=function(t,e,n,i,o,a,r){"use strict";return t.Collection.extend({model:n,url:function(){return"docSearch.api?remote_id="+this.gbData.ssen+"&docid="+this.gbData.docID+"&p00="+encodeURIComponent(this.gbData.searchTerm)},initialize:function(t,e){this.gbData=e,this.prepareData()},prepareData:function(){var t=e.trim(this.gbData.searchTerm);if(this.reset(),void 0!==t&&t.length>0){this.gbData.searchTerm=t,this.gbData.showSearhHits=!0;var n=this;e.ajax({url:n.url(),success:function(i){if(0==i["status-code"])for(var o=0,a=0;a<i.chapters.length;a++)0==a&&(o=i.chapters[a].indent),i.chapters[a].indent===o&&n.add({cptInd:i.chapters[a].chapterId,searchTerm:t,data:i.chapters[a]},{add:!0,remove:!0,merge:!1});else e("#dialog-error-msg").show().find("#msg").empty().html(r.t("rr_error")+i["status-message"])},error:function(t,n,i){e("#dialog-error-msg").show().find("#msg").empty().html(r.t("rr_please_try_again"))}})}}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({idAttribute:"schInBk",initialize:function(t,e){},parse:function(t,e){return t}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0),n(122),n(6),n(2),n(1),n(8)],void 0===(o=function(t,e,n,i,o,a,r){"use strict";return t.Collection.extend({model:n,url:function(){return"docSearch.api?remote_id="+this.gbData.ssen+"&cmd=pages&docid="+this.gbData.docID+"&p00="+encodeURIComponent(this.gbData.searchTerm)+"&dt=1"},initialize:function(t,e){this.gbData=e},prepareData:function(t){var n=e("#searchInBookTerm"),i=e.trim(t)||e.trim(n.val());if(n.val(""),this.reset(),void 0!==i&&i.length>0&&(i.indexOf(" AND ")>0||i.indexOf(" NOT ")>0||i.indexOf(" OR ")>0))this.add({panelSearchResultName:"noSearchResult",searchTerm:i,hasBST:"hasBST"},{add:!0,remove:!0,merge:!1}),a.trigger("cSQHits");else if(void 0!==i&&i.length>0){this.gbData.searchTerm=i;var o=parseInt(e("#current-page").val()),s=this;e.ajax({url:s.url(),success:function(t){0==t["status-code"]?t["total-page-hits"]>0?(s.add({panelSearchResultName:"chapterSearchResult",searchTerm:i,data:t},{add:!0,remove:!0,merge:!1}),a.trigger("rSQHits",o)):-1==i.indexOf(" ")?s.add({panelSearchResultName:"didYouMeanSearchResult",searchTerm:i},{add:!0,remove:!0,merge:!1}):s.add({panelSearchResultName:"noSearchResult",searchTerm:i},{add:!0,remove:!0,merge:!1}):e("#dialog-error-msg").show().find("#msg").empty().html(r.t("rr_error")+t["status-message"])},error:function(t,n,i){e("#dialog-error-msg").show().find("#msg").empty().html(r.t("rr_please_try_again"))}})}else this.gbData.searchTerm="",a.trigger("cSQHits")}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({idAttribute:"schInBkByCh",initialize:function(t,e){},parse:function(t,e){return t}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(3),n(0),n(4),n(6),n(2),n(1),n(124),n(8)],void 0===(a=function(t,e,n,o,a,r,s,l){"use strict";return t.ItemView.extend({id:"E-Section",defaults:{panelName:"bookResources"},model:s,initialize:function(t){this.gbData=t.model.collection.gbData;var e=i.extend({},t.model.collection.gbData,t.model.attributes);this.model=new s(e),this.model.bind("sync",this.render,this),this.model.fetch(),this.ck=a.readCookie("ESESSIONID"),null!==this.ck&&(this.pebr=new o,this.pebr.init(this.ck)),r.on("cssel",this.cSearch,this)},getTemplate:function(){return this.model&&void 0!==this.model.get("cusData")?n.readerPanelBookResourceTemplate:(this.model&&this.model.isSyncing,n.mainLoadingContentTemplate)},events:{"click #search-block button":"textResourceTriggers","click #custom-buttons button":"bookResourceTriggers","click #custom-links a":"indResourceTriggers"},onRender:function(){this.model&&void 0!==this.model.get("cusData")&&this.cSearch(),this.gbData.uAccsMdRR>0&&this.$el.find("#closePanel").parent().remove()},bookResourceTriggers:function(t){t.preventDefault();var n=e(t.target).attr("id").split("_")[1],i=this.model.get("cusData").bookSearches[n],o=i.textValue;i.textValue.indexOf("%pisbn%")>-1?o=o.replace("%pisbn%",this.model.get("BiblioData").pIsbn):i.textValue.indexOf("%eisbn%")>-1?o=o.replace("%eisbn%",this.model.get("BiblioData").eIsbn):i.textValue.indexOf("%docid%")>-1&&(o=o.replace("%docid%",this.model.get("BiblioData").docID)),this.usgCSTk("BookSearch",e(t.target).text()),window.open(o,"Cust Search")},textResourceTriggers:function(t){t.preventDefault();var n=e("input:radio[name=textSearchesRadios]:checked").val(),i=encodeURIComponent(e("#cTextSearchId").val()),o=this.model.get("cusData").textSearches[n].textValue.replace("%token%",i);this.usgCSTk("TextSearch",this.model.get("cusData").textSearches[n].textName+":"+i),window.open(o,"Cust Search")},cSearch:function(){if(void 0!==this.gbData&&this.model&&void 0!==this.model.get("cusData")){var t=this.gbData.finalSelections;r.trigger("resetPgSel",!0,!0),r.trigger("clsPgSel",t.active_page,!0);var n=0,i=0,o=e("#current-page").val();if(this.cText="",!0===t.active){o=t.active_page,n=t.s_quad,i=t.e_quad;var a="op=cSeearch&encID="+this.gbData.encID+"&page=("+o+")&start="+n+"&end="+i+"&offset="+(new Date).getTimezoneOffset(),s="remoteDocServer.api?remote_id="+this.ck+"&encrypted="+this.pebr.enc(a)+"&nq=1",c=this;e.ajax({dataType:"json",url:s,async:!1,success:function(t){if(void 0!==t.dcy){var n=JSON.parse(c.pebr.dec(t.dcy));if(void 0!==n.status&&void 0===n.errorCode)0===n["status-code"]&&(c.cText=n.cText);else if(status=!1,void 0===n.errorCode||"SESSION_TIMED_OUT"!==n.errorCode&&"LOGIN_REQUIRED"!==n.errorCode)e("#dialogModalAlertError").modal("show").find("#msg").empty().html(l.t("rr_error")+n["status-message"]);else e("#dialogModalAlertError").modal("show").find("#msg").empty().html(l.t("rr_error_refresh_try_again"))}},error:function(t,n,i){e("#dialogModalAlertError").modal("show").find("#msg").empty().html(l.t("rr_error_refresh_try_again"))}}),e("#cTextSearchId").val(this.cText),this.usgCSTk("ContextualTextSelection",encodeURIComponent(this.cText),n,i)}}},indResourceTriggers:function(t){var n=e(t.target).text();this.usgCSTk("CustomLink",n)},usgCSTk:function(t,n,i,o){if(void 0!==this.gbData&&this.model&&void 0!==this.model.get("cusData")){var a={docid:this.gbData.DocUser.docID,page:e("#current-page").val(),type:"CustomSearch",action:t,userActionData:n,starting:i,ending:o};e.ajax({type:"POST",url:"usageTrack.action",data:a,success:function(t){},error:function(t,n,i){e("#dialog-error-msg").show().find("#msg").empty().html(l.t("rr_please_try_again"))}})}}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({idAttribute:"resourceModel",url:function(){return"getCustomSearchMenu.action?remote_id="+this.get("ssen")+"&asJson=1&docID="+this.get("docID")},initialize:function(t,e){}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0),n(126),n(6),n(2),n(1)],void 0===(o=function(t,e,n,i,o,a){"use strict";return t.Collection.extend({model:n,initialize:function(t,e){a.on("openPanel",this.openNewPanel,this),this.gbData=e,this.prepareData()},prepareData:function(){this.add({panelTest:"gold",panelName:"bookToc"},{add:!0,remove:!0,merge:!1})},openNewPanel:function(t){var e=this.findWhere({panelName:t});null==e&&this.add({panelTest:"White",panelName:t},{add:!0,remove:!1,merge:!1})}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({idAttribute:"panelTitle",defaults:{panelTest:""},initialize:function(t,e){}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(3),n(0),n(5),n(4),n(6),n(2),n(128),n(129),n(10),n(23),n(1),n(8)],void 0===(o=function(t,e,n,i,o,a,r,s,l,c,d,u){"use strict";return t.CompositeView.extend({template:i.mainCompositeTemplate,itemViewContainer:"#mainViewerPagesContainer",id:"mainViewer",itemView:s,emptyView:l,skipBlockSize:!1,initialize:function(t){if(1===t.gbData.hasAc)this.collection=new c(null,t.gbData);else if(0===t.gbData.hasAc)return;d.on("jtp",this.jumpToPage,this),d.on("rspzl",this.reSizeZlEffect,this),d.on("rspwd",this.reSizeWdEffect,this),d.on("rspht",this.reSizeHtEffect,this),d.on("clsPgSel",this.clearSelections,this),d.on("resetPgSel",this.resetSelections,this),d.on("rSQHits",this.resetSearchQuads,this),d.on("cSQHits",this.clearSearchQuads,this),d.on("hSQHits",this.hideSearchQuads,this),d.on("sSQHits",this.showSearchQuads,this),d.on("cNotes",this.closeOpenNotes,this),d.on("tCPN",this.createPageNotes,this),d.on("tBM",this.toogleBookMark,this),d.on("tCH",this.createHighlight,this),d.on("pAntDel",this.panelDeleteAnnot,this),d.on("pAntSh",this.panelShowAnnot,this),this.getDebounce=n.debounce(function(){this.findPos(!0)},10,!0),this.getReDebounce=n.debounce(function(){e("#page-num-floater").hide(),this.findPos(!1)},150),this.ToolTipScrollWidth=this.browserWidthOfScrollBar()},itemViewOptions:function(t){return{orgWd:void 0!==this.collection?this.collection.gbData.orgWd:500,orgHgt:void 0!==this.collection?this.collection.gbData.orgHgt:500,zm:void 0!==this.collection?this.collection.gbData.zm:1,divzm:void 0!==this.collection?this.collection.gbData.divzm:1.2,widthTest:void 0!==this.collection?this.collection.gbData.widthTest:16,showSearhHits:void 0===this.collection||this.collection.gbData.showSearhHits}},events:{scroll:"scrollDebounce"},tooltipPageShow:function(t){this.obj.animate({top:t.pageY,left:e("#mainViewer").width()+e("#mainViewer").offset().left-(this.ToolTipScrollWidth+40)},{queue:!1,duration:0,easing:"linear"})},browserWidthOfScrollBar:function(){var t,n,i=(n=(t=e('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body")).children()).innerWidth()-n.height(99).innerWidth();return t.remove(),i},findPosToOffset:function(t){for(var e=0,n=0,i=0,o=0;t&&t.offsetParent;)o=t.offsetParent.scrollTop||0,i=t.offsetParent.scrollLeft||0,e+=t.offsetLeft-i,n+=t.offsetTop-o,t=t.offsetParent;return[e,n]},onAfterItemAdded:function(t){},appendHtml:function(t,e,n){var i=t.itemViewContainer?t.$(t.itemViewContainer):t.$el,o=i.children();o.size()<=n?i.append(e.el):o.eq(n).before(e.el)},jumpToPageOrg:function(t){this.collection.gbData.tmpFetchPageNum=t||1;var n=this.collection.gbData.tmpFetchPageNum;if(void 0===this.collection.get(n).get("page")){this.collection.get({id:n}).fetch({data:{cid:n,_id:n,pageNum:n},remove:!1,add:!1,merge:!0,success:function(t,i,o){e("#mainViewer").scrollTop(e("#mainViewer").scrollTop()+3-e("#mainViewer").offset().top+e("#mainPageContainer_"+n).offset().top)}})}else this.collection.get(n).renderModel(),e("#mainViewer").scrollTop(e("#mainViewer").scrollTop()+3-e("#mainViewer").offset().top+e("#mainPageContainer_"+n).offset().top)},jumpToPage:function(t,n){this.collection.gbData.tmpFetchPageNum=t||1;var i=this.collection.gbData.tmpFetchPageNum;if(i<=1&&(e("#tool-pager-prev").prop("disabled",!0),e("#tool-pager-prev").addClass("tool-btn-disabled")),i>1&&(e("#tool-pager-prev").removeProp("disabled"),e("#tool-pager-prev").removeClass("tool-btn-disabled")),this.collection.gbData.tmpLpg.length>=2&&(e("#tool-pager-next").removeProp("disabled"),e("#tool-pager-next").removeClass("tool-btn-disabled")),i>=this.collection.gbData.tmpLpg.length&&(e("#tool-pager-next").prop("disabled",!0),e("#tool-pager-next").addClass("tool-btn-disabled")),void 0===this.collection.get(i)){var o=this.collection.gbData.tmpOpt=1,a=this;a.collection.add({at:i,cid:i,_id:i,pageNum:i,ht:this.collection.orgHgt,wd:this.collection.orgWd,tmpOpt:o}).fetch({data:{cid:i,_id:i,pageNum:i,tmpOpt:o},remove:!1,add:!1,merge:!0,success:function(t,n,o){a.skipBlockSize=!0;var r=Math.ceil(e("#mainViewer").scrollTop()-e("#mainViewer").offset().top+e("#mainPageContainer_"+i).offset().top);e("#mainViewer").scrollTop(r)}})}else if(void 0!==this.collection.get(i)){var r=Math.ceil(e("#mainViewer").scrollTop()-e("#mainViewer").offset().top+e("#mainPageContainer_"+i).offset().top);e("#mainViewer").scrollTop(r)}},scrollDebounce:function(t){this.findPos(!0),clearTimeout(e.data(this,"scrollTimer"));var n=this;e.data(this,"scrollTimer",setTimeout(function(){e("#page-num-floater").fadeOut(400),n.pageFetchOnScroll()},250))},findPosORg:function(t){var n=e("#mainViewer"),i=(n[0].scrollHeight,n.height(),e("#mainViewer >div").height()),o=(n.children().length,i),a=1+n.scrollTop()/o,r=Math.floor(a);r>this.collection.gbData.tpg&&(r=this.collection.gbData.tpg),e("#current-page").val(r),e("#addPageNum").empty().html(r),e("#addPageNum").empty().html(r),e("#tool-current-page-loc").empty().html(r);var s=e("#page-num-floater");if(t){e(window).width();var l=e("#svgSideBarLayoutRegion").width()+e("#panelLayoutRegion").width()+(n.width()/2||0);s.css({left:l}).show()}else s.hide()},findPosNewOrg:function(t){var n=e("#mainViewer"),i=(n[0].scrollHeight,n.height(),e("#mainViewer div > div div").height()),o=(n.children().length,i+this.collection.gbData.widthTest);o=o;var a=1+n.scrollTop()/o,r=Math.floor(a);Math.floor(a);r>=this.collection.gbData.tpg&&(r=this.collection.gbData.tpg),e("#current-page").val(r),e("#addPageNum").empty().html(r),e("#addPageNum").empty().html(r),e("#tool-current-page-loc").empty().html(r);var s=e("#page-num-floater");if(t){e(window).width();var l=e("#svgSideBarLayoutRegion").width()+e("#panelLayoutRegion").width()+(n.width()/2||0);s.css({left:l}).show()}else s.hide()},findPos:function(t){var n=e("#mainViewer"),i=(n[0].scrollHeight,n.height(),e("#mainViewer div > div div").height()),o=(n.children().length,i+this.collection.gbData.widthTest);o=o;var a=n.scrollTop()+(this.skipBlockSize?0:Math.ceil(o/2));this.skipBlockSize=!1;var r=1+a/o,s=Math.floor(r);Math.floor(r);s>this.collection.gbData.tpg&&(s=this.collection.gbData.tpg),e("#current-page").val(s);var l=this.collection.gbData.tmpLpg[s-1]||s;e("#addPageNum").empty().html(l),e("#tool-current-page-loc").empty().html(l);var c=e("#page-num-floater");if(t){e(window).width();var d=e("#svgSideBarLayoutRegion").width()+e("#panelLayoutRegion").width()+(n.width()/2||0);c.css({left:d}).show()}else c.hide()},reSizeZlEffect:function(t){this.collection.gbData.tmpFetchPageNum=t,this.collection.gbData.zm=this.collection.gbData.zm>.5?this.collection.gbData.zm:.5,this.collection.gbData.zm=this.collection.gbData.zm>10?10:this.collection.gbData.zm,this.collection.gbData.divzm=this.collection.gbData.zm+.1,this.collection.gbData.orgWd=parseInt(this.collection.gbData.tmpzmMaxWidth*this.collection.gbData.divzm),this.collection.gbData.orgHgt=parseInt(this.collection.gbData.tmpzmMaxHeight*this.collection.gbData.divzm),this.collection.reset(),this.collection.prepareData()},reSizeWdEffect:function(t){this.collection.gbData.tmpFetchPageNum=t;var n=e("#mainViewer").width(),i=this;this.children.each(function(e){if(e.model.get("pageNum")===t){var o=e.model.get("page");if(o){var a=o.width/i.collection.gbData.zm,r=o.height/i.collection.gbData.zm;i.collection.gbData.tmpzmMaxWidth=a,r>i.collection.gbData.tmpzmMaxHeight&&(i.collection.gbData.tmpzmMaxHeight=r),i.collection.gbData.zm=i.collection.gbData.zm*(n-2*i.collection.gbData.widthTest)/o.width||1,i.collection.gbData.zm=i.collection.gbData.zm>.5?i.collection.gbData.zm:.5,i.collection.gbData.zm=i.collection.gbData.zm>10?10:i.collection.gbData.zm,i.collection.gbData.divzm=i.collection.gbData.zm,i.collection.gbData.zm=i.collection.gbData.zm-.1}}}),this.collection.reset(),this.collection.prepareData()},reSizeHtEffect:function(t){this.collection.gbData.tmpFetchPageNum=t;var n=e("#mainViewer").height(),i=this;this.children.each(function(e){if(e.model.get("pageNum")===t){var o=e.model.get("page"),a=o.width/i.collection.gbData.zm,r=o.height/i.collection.gbData.zm;a>i.collection.gbData.zmMaxWidth?i.collection.gbData.tmpzmMaxWidth=a:i.collection.gbData.tmpzmMaxWidth=i.collection.gbData.zmMaxWidth,r>i.collection.gbData.zmMaxHeight&&(i.collection.gbData.tmpzmMaxHeight=r),i.collection.gbData.zm=i.collection.gbData.zm*n/o.height||1,i.collection.gbData.zm=i.collection.gbData.zm>.5?i.collection.gbData.zm:.5,i.collection.gbData.zm=i.collection.gbData.zm>10?10:i.collection.gbData.zm,i.collection.gbData.divzm=i.collection.gbData.zm,i.collection.gbData.zm=i.collection.gbData.zm-.1}}),this.collection.reset(),this.collection.prepareData()},pageFetchOnScrollRef:function(){this.collection.add({at:2,cid:2,_id:2,pageNum:2,ht:this.collection.orgHgt,wd:this.collection.orgWd}).fetch({data:{cid:2,_id:2,pageNum:2},success:function(t,e,n){}})},pageFetchOnScroll:function(){var t=parseInt(e("#current-page").val());if(e("[id^='snipHit_']").length>0&&(e("[id^='snipHit_']").removeClass("search-level-2-selected"),e("#snipHit_"+t).addClass("search-level-2-selected")),void 0===this.collection.get(t)){var n=this.collection.gbData.tmpFetchPageNum=t,i=this.collection.gbData.tmpOpt=1;this.collection.add({at:t,cid:t,_id:t,pageNum:t,ht:this.collection.orgHgt,wd:this.collection.orgWd,tmpOpt:i}).fetch({data:{cid:n,_id:n,pageNum:n,tmpOpt:i},remove:!1,add:!0,merge:!0,success:function(t,e,n){}})}else if(t>0&&void 0!==this.collection.get(t)){var o=this.collection.get(t),a=o.get("tmpOpt");void 0!==a&&0===a&&void 0!==o.get("status")&&"FAILURE"!==o.get("status")&&(o.set({tmpOpt:1},{silent:!0}),this.tmpLogicalPage(t))}var r=this.collection.gbData.tmpFetchPageNum=t-1;if(r>0&&void 0===this.collection.get(r)){i=this.collection.gbData.tmpOpt=0;this.collection.add({at:r,cid:r,_id:r,pageNum:r,ht:this.collection.orgHgt,wd:this.collection.orgWd,tmpOpt:i}).fetch({data:{cid:r,_id:r,pageNum:r,tmpOpt:i},remove:!1,add:!0,merge:!0,success:function(t,e,n){}})}else r>0&&this.collection.get(r);var s=this.collection.gbData.tmpFetchPageNum=t+1;if(s<this.collection.gbData.tpg&&void 0===this.collection.get(s)){i=this.collection.gbData.tmpOpt=0;this.collection.add({at:s,cid:s,_id:s,pageNum:s,ht:this.collection.orgHgt,wd:this.collection.orgWd,tmpOpt:i}).fetch({data:{cid:s,_id:s,pageNum:s,tmpOpt:i},remove:!1,add:!0,merge:!0,success:function(t,e,n){}})}else s>0&&this.collection.get(s)},pageFetchOnScrollOrg:function(){var t=parseInt(e("#current-page").val());if(null!==this.collection.get(t)&&void 0!==this.collection.get(t)){if(void 0===this.collection.get(t).get("page")){var n=this.collection.gbData.tmpFetchPageNum=t;this.collection.get({id:n}).fetch({data:{cid:n,_id:n,pageNum:n},remove:!1,add:!1,merge:!0,success:function(t,e,n){}})}var i=this.collection.gbData.tmpFetchPageNum=t-1;if(i>0&&void 0===this.collection.get(i).get("page")){this.collection.get({id:i}).fetch({data:{cid:i,_id:i,pageNum:i},remove:!1,add:!1,merge:!0,success:function(t,e,n){}})}var o=this.collection.gbData.tmpFetchPageNum=t+1;if(o<this.collection.gbData.tpg&&void 0===this.collection.get(o).get("page")){this.collection.get({id:o}).fetch({data:{cid:o,_id:o,pageNum:o},remove:!1,add:!1,merge:!0,success:function(t,e,n){}})}}},closeOpenNotes:function(){var t=e("[id^='myNotePopId_']");if(t.length>0){t.parents().css("pointer-events","auto");t.attr("id").split("_")[1];this.children.each(function(t){t.clearChildSelections(!0)})}t.remove()},clearAllSelections:function(){this.children.each(function(t){t.clearChildSelections(!0)})},clearSelections:function(t,e){this.children.each(function(n){n.model.get("pageNum")===t&&n.clearChildSelections(e)})},resetSelections:function(t,e){t&&(n.isUndefined(this.collection.gbData)||(this.collection.gbData.selectedZone={active:!1,tracking:!1,s_quad:-1,e_quad:-1,s_floats:!1,e_floats:!1,active_page:-1})),e&&(n.isUndefined(this.collection.gbData)||(this.collection.gbData.finalSelections={active:!1,s_quad:-1,e_quad:-1,active_page:-1}))},resetSearchQuads:function(t){this.collection.gbData.tmpFetchPageNum=t,this.collection.reset(),this.collection.prepareData()},clearSearchQuads:function(){this.children.each(function(t){var e=t.model.get("searches"),n=t.searchCtx;void 0!==e&&0!=e.length&&(n.clearRect(0,0,n.canvas.width,n.canvas.height),t.model.set("searches",{}))})},hideSearchQuads:function(){this.children.each(function(t){var e=t.model.get("searches"),n=t.searchCtx;void 0!==e&&0!=e.length&&n.clearRect(0,0,n.canvas.width,n.canvas.height)})},showSearchQuads:function(){this.children.each(function(t){var n=t.model.get("searches");void 0!==n&&0!=n.length&&e.each(n,function(e,n){null!=n&&t.searchCtx.fillRect(n.left,n.top,n.width,n.height)})})},createPageNotes:function(t){!n.isUndefined(this.collection.gbData)&&this.collection.gbData.selectedZone.active&&(this.clearSelections(this.collection.gbData.selectedZone.active_page,!0),this.resetSelections(!0,!0)),this.children.each(function(e){if(e.model.get("pageNum")===t)return e.createPageLevelNote(),!1})},toogleBookMark:function(t){var e=!n.isUndefined(this.collection.gbData)&&this.collection.gbData.selectedZone.active;this.closeOpenNotes(),e&&(this.clearSelections(this.collection.gbData.selectedZone.active_page,!0),this.resetSelections(!0,!0)),this.children.each(function(e){if(e.model.get("pageNum")===t)return e.annotBookmark(),!1})},createHighlight:function(){if(!n.isUndefined(this.collection.gbData)&&this.collection.gbData.finalSelections.active){var t=this.collection.gbData.finalSelections.active_page;this.collection.gbData.whatClicked="",this.children.each(function(e){if(e.model.get("pageNum")===t)return e.contextHighYellow(),!1})}else this.clearAllSelections()},panelDeleteAnnot:function(t){var e=t.annots.physicalPage,i=!1;if(this.children.each(function(o){if(o.model.get("pageNum")===e&&!n.isUndefined(o.model.get("annots")))return o.panelChDeleteAnnot(t.annots),i=!0,!1}),!i){this.collection.deleteAnnot(e,t.annots.annotID);var o={annotID:t.annots.annotID,chapterId:t.chapterId};d.trigger("pnlAnt",o,"del")}},panelShowAnnot:function(t){var e=t.annots.physicalPage;this.closeOpenNotes(),this.clearAllSelections(),this.resetSelections(!0,!0),this.children.each(function(i){if(i.model.get("pageNum")===e&&!n.isUndefined(i.model.get("annots")))return i.panelChShowAnnot(t.annots),!0,!1})},tmpLogicalPage:function(t){e.ajax({url:"logPageAccess.api?rpgr=eb&docid="+this.collection.gbData.docID+"&remote_id="+this.collection.gbData.ssen+"&startPage="+t+"&endPage="+t+"&tm=1",success:function(t){},error:function(t,n,i){e("#dialog-error-msg").show().find("#msg").empty().html(u.t("rr_please_try_again"))}})}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){"use strict";t.fn.resizable=function(){var e,n,i,o,a,r=null,s=null;return t(document).on("mouseup",function(){r=null}),t(document).on("mousemove",function(t){if(null!==r){var l=o+(t.pageX-e),c=a+(t.pageY-n);l<140&&(l=140),c<100&&(c=100),s.width(l),s.height(c),r.css("width",l+i+"px")}}),this.each(function(){var l=t(this);t(".note-resize-handle",l).on("mousedown",function(c){r=l,s=t("#note-content",l),e=c.pageX,n=c.pageY,o=s.width(),a=s.height(),i=l.width()-o})})}}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(3),n(0),n(4),n(6),n(2),n(1),n(8)],void 0===(a=function(t,e,n,o,a,r,s){"use strict";return t.ItemView.extend({template:n.mainContentTemplate,id:function(){return"mainPageContainer_"+this.model.get("pageNum")},className:"mainViewerImgContainerParent",headerShowing:!0,ctx:{},searchCtx:{},annotCtx:{},tracking:!1,noteTrack:!1,initialize:function(t){this.orgWd=t.orgWd,this.orgHgt=t.orgHgt,this.zm=t.zm,this.divzm=t.divzm,this.widthTest=t.widthTest,this.showSearhHits=t.showSearhHits;var e=a.readCookie("ESESSIONID");this.pebr=new o,this.pebr.init(e),this.noteRSize={}},modelEvents:{"change add":"render"},onBeforeRender:function(){},onRender:function(){"FAILURE"===this.model.get("status")&&this.usrNSignResp(this.model.attributes);var t,n=this.model.get("pageNum")-1,o=(this.orgHgt+this.widthTest)*n,a=this.$el.find(".mainViewerImgCloak");0!=a.length&&((t=a.get(0).getContext("2d")).fillStyle="#c0e9fb",t.globalAlpha=.6,t.save(),this.ctx=t);if(0!=(a=this.$el.find(".mainViewerSearchCloak")).length){var r=a.get(0).getContext("2d");r.fillStyle="#7483BB",r.globalAlpha=.3,this.searchCtx=r}0!=(a=this.$el.find(".mainViewerAnnotCloak")).length&&((t=a.get(0).getContext("2d")).fillStyle="#ffbc0b",t.globalAlpha=.4,this.annotCtx=t);if(!i.isUndefined(this.model.get("page"))&&this.model.get("page").width>this.orgWd){e("#mainViewerPagesContainer").css({height:this.orgHgt,width:this.model.get("page").width+2}),this.$el.css({top:o,height:this.orgHgt,width:this.model.get("page").width+2}),this.$el.find(" * ").not("br").not("img").not("canvas").not("span").css({height:this.orgHgt,width:this.model.get("page").width+2});var s=this.$el.find("img").width(),l=this.$el.find("img").height();this.tmpImgLeftforFloat=(this.model.get("page").width+2-s)/2,this.tmpImgTopforFloat=(this.orgHgt-l)/2;var c=s+this.tmpImgLeftforFloat-84;this.$el.find(".bookmark ").css({top:this.$el.find("img").css("top"),left:c+"px"})}else{if(this.$el.find(" * ").not("br").not("img").not("canvas").not("span").not("svg").not("use").css({height:this.orgHgt,width:this.orgWd}),e("#mainViewerPagesContainer").css({height:this.orgHgt,width:this.orgWd}),this.$el.css({top:o,height:this.orgHgt,width:this.orgWd}),i.isUndefined(this.$el.find(".bookmark").attr("id")))return;s=this.$el.find("img").outerWidth(),l=this.$el.find("img").outerHeight();this.tmpImgLeftforFloat=Math.ceil((this.orgWd-s)/2),this.tmpImgTopforFloat=Math.ceil((this.orgHgt-l)/2);c=s+this.tmpImgLeftforFloat-84;0===parseInt(this.$el.find("img").css("top"))?this.$el.find(".bookmark ").css({top:this.tmpImgTopforFloat,left:c+"px"}):this.$el.find(".bookmark ").css({top:this.$el.find("img").css("top"),left:c+"px"})}if(!i.isUndefined(this.showSearhHits)&&!0===this.showSearhHits){var d=this.model.get("searches");!i.isUndefined(d)&&d.length>0&&this.highLightSearchTerms()}var u=this.model.get("annots");!i.isUndefined(u)&&u.length>0&&this.showPageAnnotes()},onItemRender:function(){},templateHelpers:{something:function(){return"Do stuff with "+this.page.parts+" because it's awesome."},wrapDashErrorMessage:function(){return i.isUndefined(this["status-message"])?s.t("rr_content_not_allowed"):"TOO_MANY_PREVIEWED"===this["status-message"]?s.t("rr_content_not_allowed"):this["status-message"]},bookMarked:function(){if(!i.isUndefined("undefined"!==this.annots)&&this.annots.length>0){var t=i.find(this.annots,function(t){return t.bookMark});return!i.isUndefined(t)}return!1}},events:{"dblclick canvas":"cloakWordHighlight","click canvas":"cloakClick","mousedown canvas":"cloakMouseDown","mousemove canvas":"cloakMouseDrag","mouseup canvas":"cloakMouseUp","click #contextCopy":"contextCopyMode","click #contextHighlightPink":"contextHighPink","click #contextHighlightBlue":"contextHighBlue","click #contextHighlightYellow":"contextHighYellow","click #contextNote":"createContextNote","dblclick .note-icon.note-collapsed":"callNoteTextPop","click #noteTextdelete":"deleteTextNote","click #noteTextclose":"closeTextNote","click #noteTextCancel":"closeTextNote","click #noteTextSave":"saveTextNote","click  .popover-content button.icon-trash":"deleteHigh","click .bookmark":"annotBookmark","click #contextCustomSearch":"callCustomSearch"},annotBookmark:function(t){if(!i.isUndefined(this.model.get("status"))&&"FAILURE"===this.model.get("status"))return!1;var e=this.$el.find(".bookmark"),n=!i.isUndefined(this.model.collection.gbData)&&this.model.collection.gbData.selectedZone.active,o=this.model.collection.gbData.selectedZone.active_page;if(n&&(r.trigger("clsPgSel",o,!0),r.trigger("resetPgSel",!0,!0)),r.trigger("cNotes"),this.model.collection.gbData.whatClicked="to_bookmark",e.hasClass("bookmark-on")){var a=this.model.get("annots");if(!i.isUndefined(a)&&a.length>0){var s=i.find(a,function(t){return t.bookMark});if(!i.isUndefined(s))return this.delAnnotBMID(s.annotID)}e.removeClass("bookmark-on").html('<svg focusable="false" width="70" height="70" style="pointer-events:none;" ><use xlink:href="#bookmark-off"></use></svg>')}else{var l={op:"annotate",encID:this.model.collection.gbData.encID,zoom:this.model.collection.gbData.zm,type:"link",ppg:this.model.get("pageNum"),s:-1,e:-1},c=this.saveAnnotation(l,"BookMark:");if(c.length>0){var d=this;i.each(c,function(t){d.model.get("annots").push(t),d.postToPanel("save",t)}),e.addClass("bookmark-on").html('<svg focusable="false" width="70" height="70" style="pointer-events:none;" ><use xlink:href="#bookmark-on"></use></svg>')}}},delAnnotBMID:function(t){var e=this.model.get("annots"),n=i.find(e,function(e){return e.annotID===t});if(!i.isUndefined(n)&&this.deleteAnnot(t)){var o=this.delPageAnnots(t);this.model.set({annots:o},{silent:!0});var a={annotID:t,chapterId:n.chapInfo.chapterId};return this.postToPanel("del",a),this.$el.find(".bookmark").removeClass("bookmark-on").html('<svg focusable="false" width="70" height="70" style="pointer-events:none;" ><use xlink:href="#bookmark-off"></use></svg>'),!1}},deleteTextNote:function(t){var n=e(t.currentTarget).parent().parent().attr("id").split("_")[2];this.delAnnotNID(n)},delAnnotNID:function(t){"0"===t?this.resetSelectedZone():this.deleteNoteAnnot(t),this.closeTextNote()},deleteNoteAnnot:function(t){var e=this.model.get("annots"),n=i.find(e,function(e){return e.annotID===parseInt(t)});if(!i.isUndefined(n)&&this.deleteAnnot(t)){var o={annotID:t,chapterId:n.chapInfo.chapterId};this.postToPanel("del",o),this.delAndRefreshPageAnnots(t)}},deleteAnnot:function(t){return this.model.collection.deleteAnnot(this.model.get("pageNum"),t)},closeTextNote:function(){var t=e("[id^='myNotePopId_']");t.parents().css("pointer-events","auto"),t.remove();var n=this.$el.find(".mainViewerImgCloak");n.length>0&&this.ctx.clearRect(0,0,n.width(),n.height())},saveTextNote:function(t){var n=e(t.currentTarget).parent().parent(),o=n.attr("id").split("_")[2],a=n.find("#note-content").val().trim()||"";if(a.length>0){var r={op:"annotate",encID:this.model.collection.gbData.encID,zoom:this.model.collection.gbData.zm,type:"create_note",ppg:this.model.get("pageNum"),x:parseInt(n.css("left")),y:parseInt(n.css("top")),width:n.outerWidth(),height:n.outerHeight()};!0===this.model.collection.gbData.finalSelections.active&&(r.s=this.model.collection.gbData.finalSelections.s_quad,r.e=this.model.collection.gbData.finalSelections.e_quad,r.type="noteyellow"),"0"!==o&&(r.op="edit",r.type="note"+n.attr("class").split("-")[1],r.id=o,r.changetype="TEXT");var s=this.saveAnnotation(r,a);if(!i.isUndefined(s)){var l=this;if("0"===o)i.each(s,function(t){i.isUndefined(l.model.get("annots"))||(l.model.get("annots").push(t),l.postToPanel("save",t),l.showIndiPageAnnote(t))});else{var c=this.model.get("annots");i.each(c,function(t){t.annotID===parseInt(s.annotID)&&(t.label=a,s.chapterId=t.chapInfo.chapterId)}),l.postToPanel("edit",s)}}}this.closeTextNote()},deleteHigh:function(t){var n=e(t.currentTarget).attr("id").split("_")[2];this.delAnnotHID(n)},delAnnotHID:function(t){if(this.$el.popover("destroy"),this.deleteAnnot(t)){var e=this.model.get("annots"),n=i.find(e,function(e){return e.annotID===parseInt(t)}),o={annotID:t,chapterId:n.chapInfo.chapterId};this.postToPanel("del",o),this.delAndRefreshPageAnnots(t)}},delAndRefreshPageAnnots:function(t){this.clearPageAnnots();var e=this.delPageAnnots(t);this.model.set({annots:e},{silent:!0}),this.showPageAnnotes()},delPageAnnots:function(t){var n=this.model.get("annots");return n=e.grep(n,function(e){return e.annotID!==parseInt(t)})},clearPageAnnots:function(){var t=this.$el.find(".mainViewerAnnotCloak");this.annotCtx.clearRect(0,0,t.width(),t.height()),(t=this.$el.find(".mainViewerImgCloak")).length>0&&this.ctx.clearRect(0,0,t.width(),t.height()),this.$el.find("[id^='note_']").remove()},showPageAnnotes:function(){var t=this.model.get("annots"),e=this;i.each(t,function(t){e.showIndiPageAnnote(t)})},showIndiPageAnnote:function(t){"hilite"===t.annotType?this.annotHighlight(t.tint,t.rects):"sticky"===t.annotType?(this.showNoteIcon(t),0!==t.hiliteId&&this.annotHighlight(t.tint,t.rects)):"link"===t.annotType&&(t.bookMark||(this.showNoteIcon(t),0!==t.hiliteId&&this.annotHighlight("yellow",t.rects)))},showNoteIcon:function(t){var n="note_"+this.model.get("pageNum")+"_"+t.annotID,i="none"!==t.tint?t.tint:"yellow",o=e("<div>",{id:n,class:"ga_page_note note-icon note-collapsed  note-collapsed-"+i});if(o.append(e("#myNoteIconId").html()),t.pageLevelNote)o.css({top:this.tmpImgTopforFloat+"px",left:this.tmpImgLeftforFloat});else{var a=t.rects;if(a.length>0){var r=a[0].top;o.css({top:this.tmpImgTopforFloat+r+"px",left:this.tmpImgLeftforFloat})}else o.css({top:this.tmpImgTopforFloat+"px",left:this.tmpImgLeftforFloat})}this.$el.find("[name='actualImgContent']").append(o)},callNoteTextPop:function(t){var n=e(t.currentTarget).attr("id").split("_")[2],o=this.model.get("annots"),a=i.find(o,function(t){return t.annotID===parseInt(n)});i.isUndefined(a)||this.showNoteAnnot(a)},showNoteAnnot:function(t){r.trigger("cNotes"),this.resetSelectedZone(),0!==t.rects.length&&this.showBorderHigh(t),this.showNoteTextPop(t)},showNoteTextPop:function(t){var n="myNotePopId_"+this.model.get("pageNum")+"_"+t.annotID,i="none"!==t.tint?t.tint:"yellow",o=e("<div>",{id:n,class:"note  note-"+i});if(o.append(e("#myNotePopId").html()),o.find("#note-content").val(t.label),t.pageLevelNote)o.css({top:this.tmpImgTopforFloat+"px",left:this.tmpImgLeftforFloat});else{var a=t.rects;if(a.length>0){var r=a[0].top;o.css({top:this.tmpImgTopforFloat+r+"px",left:this.tmpImgLeftforFloat})}else o.css({top:this.tmpImgTopforFloat+"px",left:this.tmpImgLeftforFloat})}"link"===t.annotType&&o.find("#noteTextSave").attr("disabled","disabled"),this.$el.append(o),this.$el.find("#note-content").focus(),e(".note").resizable(),o.css("pointer-events","auto").parents().css("pointer-events","none")},annotHighlight:function(t,e){this.annotCtx.globalAlpha=.4,this.annotCtx.fillStyle=this.getHighLightStyle(t);var n=this;i.each(e,function(t){n.annotCtx.fillRect(t.left,t.top,t.width,t.height)})},contextHighPink:function(){this.saveHighlight("pink")},contextHighBlue:function(){this.saveHighlight("blue")},contextHighYellow:function(){this.saveHighlight("yellow")},saveHighlight:function(t){if(!0===this.model.collection.gbData.finalSelections.active){var e={op:"annotate",encID:this.model.collection.gbData.encID,zoom:this.model.collection.gbData.zm,type:t,s:this.model.collection.gbData.finalSelections.s_quad,e:this.model.collection.gbData.finalSelections.e_quad,ppg:this.model.get("pageNum")},n=this.saveAnnotation(e);if(n.length>0){var o=this;i.each(n,function(t){o.model.get("annots").push(t),o.postToPanel("save",t),o.showIndiPageAnnote(t)})}}this.resetSelectedZone()},saveAnnotation:function(t,n){this.model.collection.gbData.whatClicked="";var o=e.param(t),a="encrypted="+this.pebr.enc(o)+"&remote_id="+this.model.collection.gbData.ssen;i.isUndefined(n)||(a+="&note="+encodeURIComponent(n)),a+="&tm=1";var l={};return e.ajax({dataType:"json",url:"remoteBookshelf.api",async:!1,type:"POST",data:a,success:function(n){if(void 0!==n.status&&void 0===n.errorCode){if(void 0!==n.newBookAddToBSK&&n.newBookAddToBSK){r.trigger("taatb");var i=e("#dialog-success-msg");i.find("#sMsg").empty().html(s.t("rr_automatic_book_add")),i.show().fadeOut(5e3)}0===n["status-code"]&&(l=n.annots)}else{if(void 0===n.errorCode||"SESSION_TIMED_OUT"!==n.errorCode&&"LOGIN_REQUIRED"!==n.errorCode)e("#dialogModalAlertError").modal("show").find("#msg").empty().html(s.t("rr_error")+n["status-message"]);else r.trigger("tbsgn",t.type)}},error:function(t,n,i){e("#dialogModalAlertError").modal("show").find("#msg").empty().html(s.t("rr_error_refresh_try_again"))}}),l},postToPanel:function(t,e){if("save"===t){e.chapInfo.chapterId;var n=e.physicalPage-1,o={nAnnot:{hiliteId:i.isUndefined(e.hiliteId)?0:e.hiliteId,tint:e.tint,pageLevelNote:e.pageLevelNote,annotType:e.annotType,annotID:e.annotID,logicalPage:this.model.collection.gbData.tmpLpg[n],physicalPage:e.physicalPage,startQuad:e.startQuad,labelText:e.labelText,endQuad:e.endQuad,bookMark:e.bookMark},chap:{chapId:e.chapInfo}};r.trigger("pnlAnt",o,t)}else r.trigger("pnlAnt",e,t)},getHighLightStyle:function(t,e){var n="#FFBC0B";return"sStyle"===e?n="pink"===t?"#e260df":"blue"===t?"#0092c7":"#FFBC0B":"pink"===t?n="#e260df":"blue"===t&&(n="#0092c7"),n},contextHighlight:function(){if(!0===this.model.collection.gbData.finalSelections.active)for(var t=this.model.collection.gbData.finalSelections.s_quad;t<=this.model.collection.gbData.finalSelections.e_quad;t++){var e=this.model.get("allQuads")[t];i.isUndefined(e)||i.isNull(e)||this.annotCtx.fillRect(e.mTlh,e.mTlv,e.width,e.height)}},highLightSearchTerms:function(){var t=this;i.each(this.model.get("searches"),function(e){i.isUndefined(e)||i.isNull(e)||t.searchCtx.fillRect(e.left,e.top,e.width,e.height)})},cloakWordHighlight:function(t){var n=e(t.target).get(0),o=this.getMousePos(n,t),a=!1;1==this.model.collection.gbData.selectedZone.active&&this.clearSelections();var r=this.getQuadAtPoint(this.model.get("allQuads"),o);if(-1!=r){var s=this.model.get("annots"),l=this;if(i.each(s,function(t){if(r>=t.startQuad&&r<=t.endQuad&&"hilite"==t.annotType)return l.showDeleteHigh(t),a=!0,!1}),a)return!1;this.model.collection.gbData.selectedZone.active=!0,this.model.collection.gbData.selectedZone.s_quad=r,this.model.collection.gbData.selectedZone.e_quad=r,this.model.collection.gbData.selectedZone.active_page=this.model.get("pageNum"),this.model.collection.gbData.selectedZone.s_floats=!1,this.model.collection.gbData.selectedZone.e_floats=!1,this.model.collection.gbData.finalSelections.active=!0,this.model.collection.gbData.finalSelections.e_quad=r,this.model.collection.gbData.finalSelections.s_quad=r,this.model.collection.gbData.finalSelections.active_page=this.model.get("pageNum"),this.fillSelections()}if(this.model.collection.gbData.finalSelections.active){var c=this.model.get("pageNum");this.$el.popover({trigger:"manual",placement:"top",html:!0,container:"#mainViewerImgCloakWrapper_"+c,content:function(){return e("#contextMenuPop").html()}}),this.$el.popover("show");var d=this.model.get("allQuads")[this.model.collection.gbData.finalSelections.s_quad],u=(d.mTlh+d.mTrh)/2-88+this.tmpImgLeftforFloat;e(".popover").css({left:u+"px",top:d.mTlv+this.tmpImgTopforFloat-45+"px"})}},showBorderHigh:function(t){var e=this;this.ctx.globalAlpha=1,this.ctx.strokeStyle=this.getHighLightStyle(t.tint,"sStyle"),i.each(t.rects,function(t){e.ctx.strokeRect(t.left,t.top,t.width,t.height)}),this.ctx.restore()},showDeleteHigh:function(t){this.showBorderHigh(t);var n=t.rects[0],i=(2*n.left+n.width)/2-22+this.tmpImgLeftforFloat,o=n.top-45+this.tmpImgTopforFloat,a=this.model.get("pageNum");this.$el.popover({trigger:"manual",placement:"top",html:!0,container:"#mainViewerImgCloakWrapper_"+a,content:function(){var n="highLightDel_"+a+"_"+t.annotID,i=e("<button>",{id:n,class:"ga_annot_delete icon-trash"});return i.html('<svg focusable="false" width="15" height="15"><use xlink:href="#icon-trash"/></svg>'),i}}),this.$el.popover("show"),e(".popover").css({left:i+"px",top:o+"px"})},cloakClick:function(t){},cloakMouseDown:function(t){if(this.resetSelectedZone(),!i.isUndefined(this.model.get("status"))&&"FAILURE"===this.model.get("status"))return this.model.collection.gbData.whatClicked="",!1;if("toolHigh"===this.model.collection.gbData.whatClicked&&(this.ctx.fillStyle=this.getHighLightStyle("yellow")),!i.isUndefined("allQuads")&&this.model.get("allQuads").length>0&&(this.model.collection.gbData.selectedZone.active=!0,this.tracking=!0,this.model.collection.gbData.selectedZone.active_page=this.model.get("pageNum"),1==this.tracking)){var n=e(t.target).get(0),o=this.getMousePos(n,t),a=this.model.get("allQuads"),r=this.getQuadAtPoint(a,o);r>=0?(this.model.collection.gbData.selectedZone.s_quad=r,this.model.collection.gbData.selectedZone.s_floats=!1):(r=this.findPrevQuad(a,o))<0?(this.model.collection.gbData.selectedZone.s_quad=0,this.model.collection.gbData.selectedZone.s_floats=!1):(this.model.collection.gbData.selectedZone.s_floats=!0,this.model.collection.gbData.selectedZone.s_quad=r)}},cloakMouseDrag:function(t){var n=e(t.target).get(0);if(1==this.tracking){t.target.style.cursor="text";var i=this.getMousePos(n,t),o=this.model.get("allQuads"),a=this.getQuadAtPoint(o,i);a<0?(a=this.findPrevQuad(o,i),this.model.collection.gbData.selectedZone.e_floats=!0):this.model.collection.gbData.selectedZone.e_floats=!1,this.cleanFillSelections(a)}},cloakMouseUp:function(t){var n=this.model.collection.gbData.selectedZone.active_page;if(-1!=n&&n!==this.model.get("pageNum")&&r.trigger("clsPgSel",n,!1),t.target.style.cursor="default",this.tracking=!1,this.setFinalQuadsForSelection(),!0===this.model.collection.gbData.finalSelections.active){if("toolHigh"===this.model.collection.gbData.whatClicked)return this.contextHighYellow(),!1;var i=e(t.target).get(0),o=(this.getMousePos(i,t),this.model.collection.gbData.finalSelections.active_page);this.$el.popover({trigger:"manual",placement:"top",html:!0,container:"#mainViewerImgCloakWrapper_"+o,content:function(){return e("#contextMenuPop").html()}}),this.$el.popover("show");var a=this.model.get("allQuads")[this.model.collection.gbData.finalSelections.s_quad],s=(a.mTlh+a.mTrh)/2-88+this.tmpImgLeftforFloat;e(".popover").css({left:s+"px",top:a.mTlv+this.tmpImgTopforFloat-45+"px"})}},cleanFillSelections:function(t){this.clearSelections(),this.model.collection.gbData.selectedZone.e_quad=t,this.fillSelections()},clearSelections:function(){var t=this.model.collection.gbData.selectedZone.active_page;if(-1!=t&&t!==this.model.get("pageNum"))r.trigger("clsPgSel",t,!0),this.model.collection.gbData.selectedZone.active_page=this.model.get("pageNum");else{var e=this.$el.find(".mainViewerImgCloak");e.length>0&&this.ctx.clearRect(0,0,e.width(),e.height()),this.clearFinalSelections()}},setFinalQuadsForSelection:function(){if(!0===this.model.collection.gbData.selectedZone.active){var t=this.findFinalQuads();-1!==t.s_quad&&-1!==t.e_quad&&(this.model.collection.gbData.finalSelections.active=!0,this.model.collection.gbData.finalSelections.s_quad=t.s_quad,this.model.collection.gbData.finalSelections.e_quad=t.e_quad,this.model.collection.gbData.finalSelections.active_page=this.model.collection.gbData.selectedZone.active_page)}},clearChildSelections:function(t){if(t){var e=this.$el.find(".mainViewerImgCloak");e.length>0&&(this.ctx.clearRect(0,0,e.width(),e.height()),this.clearFinalSelections())}this.tracking=!1},clearFinalSelections:function(){this.$el.popover("destroy"),this.model.collection.gbData.finalSelections.active=!1,this.model.collection.gbData.finalSelections.s_quad=-1,this.model.collection.gbData.finalSelections.e_quad=-1,this.model.collection.gbData.finalSelections.active_page=-1},fillSelections:function(){for(var t=this.findFinalQuads(),e=t.s_quad;e<=t.e_quad;e++){var n=this.model.get("allQuads")[e];i.isUndefined(n)||i.isNull(n)||this.ctx.fillRect(n.mTlh,n.mTlv,n.width,n.height)}},findFinalQuads:function(){var t=-1,e=this.model.collection.gbData.selectedZone.e_quad;if(this.model.collection.gbData.selectedZone.e_floats?e<(t=this.model.collection.gbData.selectedZone.s_quad)?e++:e>t?this.model.collection.gbData.selectedZone.s_floats&&t++:this.model.collection.gbData.selectedZone.s_floats&&(t=e=-1):(t=this.model.collection.gbData.selectedZone.s_quad,this.model.collection.gbData.selectedZone.s_floats&&e>t&&t++),t>e){var n=t;t=e,e=n}return{s_quad:t,e_quad:e}},_fillSelections:function(){var t=this.model.collection.gbData.selectedZone.s_quad,e=this.model.collection.gbData.selectedZone.e_quad;if(this.model.collection.gbData.selectedZone.e_floats?e<t?e++:e>t?this.model.collection.gbData.selectedZone.s_floats&&t++:this.model.collection.gbData.selectedZone.s_floats&&(e=t=-1):this.model.collection.gbData.selectedZone.s_floats&&t++,t>e){var n=t;t=e,e=n}if(-1!=t&&-1!=e)for(var o=t;o<=e;o++){var a=this.model.get("allQuads")[o];i.isUndefined(a)||i.isNull(a)||this.ctx.fillRect(a.mTlh,a.mTlv,a.width,a.height)}},findPrevQuad:function(t,e){for(var n=-1,i=t.length,o=0;o<i;o++){var a=t[o];o>n&&a.mBrv<e.y?n=o:o>n&&a.mBrv<=e.y&&a.mTrh<=e.x&&(n=o)}return n},getMousePos:function(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}},getQuadAtPoint:function(t,e){var n=-1,o=this;return i.each(t,function(t,i){if(o.pointInQuad(e,t))return n=i,!1}),n},pointInQuad:function(t,e){return t.x>=e.mTlh&&t.x<=e.mBrh&&t.y>=e.mTlv&&t.y<=e.mBrv},resetSelectedZone:function(){this.$el.popover("destroy");var t=e("[id^='myNotePopId_']");t.parents().css("pointer-events","auto"),t.remove(),this.ctx.fillStyle="#c0e9fb",this.ctx.globalAlpha=.6,this.clearSelections(),this.model.collection.gbData.selectedZone.active=!1,this.model.collection.gbData.selectedZone.s_quad=-1,this.model.collection.gbData.selectedZone.e_quad=-1,this.tracking=!1,this.model.collection.gbData.selectedZone.s_floats=!1,this.model.collection.gbData.selectedZone.e_floats=!1,this.model.collection.gbData.finalSelections.active=!1,this.model.collection.gbData.finalSelections.s_quad=-1,this.model.collection.gbData.finalSelections.e_quad=-1,this.model.collection.gbData.finalSelections.active_page=-1},contextCopyMode:function(t){this.$el.popover("destroy"),r.trigger("cpgt")},createPageLevelNote:function(){if(!i.isUndefined(this.model.get("status"))&&"FAILURE"===this.model.get("status"))return!1;var t=this.model.get("annots"),n={};i.isUndefined(t)||0==t.length||(n=e.grep(t,function(t){return t.pageLevelNote})),n.length>0?this.showNoteTextPop(n[0]):this.createNewNote(!0)},createNewNote:function(t){r.trigger("cNotes");var n=this.model.get("pageNum"),o=e("<div>",{id:"myNotePopId_"+n+"_0",class:"note note-yellow"});if(o.append(e("#myNotePopId").html()),t)o.css({top:this.tmpImgTopforFloat+"px",left:this.tmpImgLeftforFloat});else{var a=this.model.get("allQuads")[this.model.collection.gbData.finalSelections.s_quad];if(i.isUndefined(a)||i.isNull(a))o.css({top:this.tmpImgTopforFloat+"px",left:this.tmpImgLeftforFloat});else{var s=a.mTlv;o.css({top:this.tmpImgTopforFloat+s+"px",left:this.tmpImgLeftforFloat})}}this.$el.append(o),this.$el.find("#note-content").focus(),e(".note").resizable(),o.css("pointer-events","auto").parents().css("pointer-events","none")},createContextNote:function(){if(this.$el.popover("destroy"),this.model.collection.gbData.DocUser.signedIn){this.ctx.fillStyle=this.getHighLightStyle("yellow");var t=this.$el.find(".mainViewerImgCloak");if(t.length>0){this.ctx.clearRect(0,0,t.width(),t.height());for(var e=this.model.collection.gbData.finalSelections.s_quad;e<=this.model.collection.gbData.finalSelections.e_quad;e++){var n=this.model.get("allQuads")[e];i.isUndefined(n)||i.isNull(n)||this.ctx.fillRect(n.mTlh,n.mTlv,n.width,n.height)}this.ctx.restore()}this.createNewNote(!1)}else r.trigger("tbsgn","add_notes")},panelChDeleteAnnot:function(t){var e=this.model.get("annots");if(i.isUndefined(e)||0==e.length)return!1;"hilite"===t.annotType?this.delAnnotHID(t.annotID):"sticky"===t.annotType?this.delAnnotNID(t.annotID):t.bookMark?this.delAnnotBMID(t.annotID):"link"===t.annotType&&this.delAnnotNID(t.annotID)},panelChShowAnnot:function(t){var e=this.model.get("annots");if(i.isUndefined(e)||0==e.length)return!1;var n=i.find(e,function(e){return e.annotID===t.annotID});i.isUndefined(n)||("hilite"===n.annotType?this.showDeleteHigh(n):"sticky"===n.annotType?this.showNoteAnnot(n):"link"!==n.annotType||n.bookMark||this.showNoteAnnot(n))},callCustomSearch:function(t){this.$el.popover("destroy"),r.trigger("openBrp"),r.trigger("cssel")},usrNSignResp:function(t,n){if(0===e(".modal-backdrop").length)if("LOGIN_REQUIRED"===t.errorCode)r.trigger("tbsgn","browse_period","g");else if("LOGIN_REQUIRED_G"===t.errorCode)r.trigger("tbsgn","browse_period","s");else if("LOGIN_REQUIRED_M"===t.errorCode)r.trigger("tbsgn","mediation_request","s");else if("NO_ACCESS_BROWSE_PRINT"===t.errorCode)e("#toolChapterDownload").attr("disabled","disabled").prop("title",s.t("rr_print_not_offered")),e("#toolPrint").attr("disabled","disabled").prop("title",s.t("rr_print_not_offered")),e("#toolChapterDownload").addClass("tool-btn-disabled"),e("#toolPrint").addClass("tool-btn-disabled");else if("NO_ACCESS_BROWSE_COPY"===t.errorCode)e("#toolCopy").attr("disabled","disabled").prop("title",s.t("rr_copy_not_offered")),e("#contextMenuPop> #contextCopy").attr("disabled","disabled").prop("title",s.t("rr_copy_not_offered")),e("#toolCopy").addClass("tool-btn-disabled");else if("EXPIRING"===t.errorCode||"REQUEST_PENDING"===t.errorCode){location.protocol,location.hostname,location.port&&location.port,location.pathname;window.location.href=a.updateQueryStringWithOutHashSupport(location.href,"ppg",e("#current-page").val())}else"DAY_REQUIRED"===t.errorCode?r.trigger("cklnpmt",t):"SHOW_PRICE"===t.errorCode?r.trigger("spcklnpmt",t):"REQUEST_REQUIRED"===t.errorCode&&r.trigger("mdreq",t)}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({idAttribute:"pageNum",initialize:function(t,e){},parse:function(t,e){return void 0!==t.dcy?void 0!==this.collection?JSON.parse(this.collection.pebr.dec(t.dcy)):{}:t}})}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,a;o=[n(0),n(3),n(4),n(8),n(1),n(6),n(2),n(132)],void 0===(a=function(t,e,n,o,a,r,s,l){"use strict";return e.ItemView.extend({id:"access-containerWrapper",initialize:function(t){this.firstDt=!1;var e=s.readCookie("ESESSIONID");this.pebr=new r,this.pebr.init(e);var n=i.extend({},t,this.pebr);this.model=new l(n),this.model.bind("sync",this.render,this),this.model.fetch(),a.on("jtp",this.jumpToPage,this),a.on("pAntDel",this.pnlDeleteAnnot,this)},getTemplate:function(){return this.model&&void 0!==this.model.get("status")?n.readerTextTemplate:(this.model&&this.model.isSyncing,n.mainLoadingContentTemplate)},events:{"click #txtGoToPrePg":"prevPage","click #txtGoToNexPg":"nextPage","click  [id^='mainViewerBookMark_']":"bookMarkAnnot","click  [id^='mainViewerNote_']":"noteAnnot","click #modalNCancel":"noteCancel","click #modalNSave":"noteSaveAnnot","click #access_loan_id":"showLoanModal","click #access_request_id":"showRequestModal"},onRender:function(){"FAILURE"===this.model.get("status")&&this.usrNSignResp(this.model.attributes),!0===this.firstDt&&t.data(this,"testTimeoutFocus",setTimeout(function(){t("#access-container").focus()},250))},templateHelpers:{wrapDashErrorMessage:function(){return i.isUndefined(this["status-message"])?o.t("rr_content_not_allowed"):"TOO_MANY_PREVIEWED"===this["status-message"]?o.t("rr_content_not_allowed"):this["status-message"]}},goToNtPg:function(e){t("#current-page").val()},prevPage:function(e){e.preventDefault();var n=t("#current-page").val(),i=parseInt(n)-1;i=i>=1?i:1;var o=this.model.get("gbData").tmpLpg[i-1]||i;void 0!==o&&(t("#tool-current-page-loc").empty().html(o),this.jumpToPage(i))},nextPage:function(e){e.preventDefault();var n=t("#current-page").val(),i=parseInt(n)+1;i=i<=this.model.get("gbData").tpg?i:this.model.get("gbData").tpg;var o=this.model.get("gbData").tmpLpg[i-1]||i;void 0!==o&&(t("#tool-current-page-loc").empty().html(o),this.jumpToPage(i))},jumpToPage:function(e){this.firstDt=!0;var n=e||1;this.model.get("gbData").tmpFetchPageNum=n,t("#current-page").val(n);var i=this.model.get("gbData").tmpLpg[n-1]||1;void 0!==i&&t("#tool-current-page-loc").empty().html(i),this.model.fetch()},bookMarkAnnot:function(e){e.preventDefault();var n=t(e.currentTarget),a=n.attr("id").split("_")[1];if(a>0){this.deleteAnnot(t("#current-page").val(),a),n.parent().empty().html(o.t("rr_hasNoBookMarkText",{ABKMNID:"mainViewerBookMark_0"}));var r={annotID:a,chapterId:i.find(this.model.get("annots"),function(t){return t.bookMark}).chapInfo.chapterId};this.postToPanel("del",r),t("#access-bookmark-message").hide()}else{var s={op:"annotate",encID:this.model.get("gbData").encID,zoom:this.model.get("gbData").zm,type:"link",ppg:t("#current-page").val(),s:-1,e:-1},l=this.saveAnnotation(s,"BookMark:");if(l.length>0){var c=this;i.each(l,function(e){c.model.get("annots").push(e),c.postToPanel("save",e),n.parent().empty().html(o.t("rr_hasBookMarkText",{ABKMID:"mainViewerBookMark_"+e.annotID})),t("#access-bookmark-message").show()})}}t.data(this,"testTimeoutFocus",setTimeout(function(){t("#access-bookmark-message").focus()},250))},noteCancel:function(e){var n=t("[id^='noteContent_']");if("0"!==n.attr("id").split("_")[1]){if(!i.isUndefined("undefined"!==this.model.get("annots"))&&this.model.get("annots").length>0&&!i.isUndefined(i.find(this.model.get("annots"),function(t){return"sticky"===t.annotType}))){var o=i.find(this.model.get("annots"),function(t){return"sticky"===t.annotType});n.val(o.label)}}else n.val("");t.data(this,"testTimeoutFocus",setTimeout(function(){t("#access-note-status").focus()},250))},noteAnnot:function(e){e.preventDefault(),t("#notesTxtModal").modal("show")},noteSaveAnnot:function(e){var n=t("[id^='noteContent_']"),a=n.attr("id").split("_")[1],r=n.val().trim()||"";if(r.length>0){var s={op:"annotate",encID:this.model.get("gbData").encID,zoom:this.model.get("gbData").zm,type:"create_note",ppg:this.model.get("pageNum"),x:"10",y:"10",width:"140",height:"100"};"0"!==a&&(s.op="edit",s.type="noteyellow",s.id=a,s.changetype="TEXT");var l=this.saveAnnotation(s,r);if(!i.isUndefined(l)){var c=this;if("0"===a)i.each(l,function(e){i.isUndefined(c.model.get("annots"))||(c.model.get("annots").push(e),c.postToPanel("save",e),n.attr("id","noteContent_"+e.annotID),t("#access-note-status").empty().html(o.t("rr_hasNotesCreatedText",{ANTID:"mainViewerNote_"+e.annotID})))});else{var d=this.model.get("annots");i.each(d,function(t){t.annotID===parseInt(l.annotID)&&(t.label=r,l.chapterId=t.chapInfo.chapterId)}),c.postToPanel("edit",l)}}}t("#notesTxtModal").modal("hide"),t.data(this,"testTimeoutFocus",setTimeout(function(){t("#access-note-status").focus()},250))},pnlDeleteAnnot:function(e){var n=e.annots.physicalPage||0,i=parseInt(t("#current-page").val());this.deleteAnnot(n,e.annots.annotID);var r={annotID:e.annots.annotID,chapterId:e.chapterId};a.trigger("pnlAnt",r,"del");var s=t("[id^='noteContent_']");i===n&&("sticky"===e.annots.annotType&&parseInt(e.annots.annotID)===parseInt(s.attr("id").split("_")[1])?(t("#access-note-status").empty().html(o.t("rr_hasNoNotesCreatedText",{ANTNID:"mainViewerNote_0"})),s.val("").attr("id","noteContent_0")):"link"===e.annots.annotType&&(t("#access-bookmark-status").empty().html(o.t("rr_hasNoBookMarkText",{ABKMNID:"mainViewerBookMark_0"})),t("#access-bookmark-message").hide()))},deleteAnnot:function(e,n){var i="ppg="+e+"&encID="+this.model.get("gbData").encID+"&id="+n+"&op=removeAnnot",r="remoteBookshelf.api?encrypted="+this.pebr.enc(i)+"&remote_id="+this.model.get("gbData").ssen+"&tm=1",s=!0;return t.ajax({dataType:"json",url:r,async:!1,success:function(e){void 0!==e.status&&void 0===e.errorCode?0===e["status-code"]&&(s=!0):(s=!1,void 0===e.errorCode||"SESSION_TIMED_OUT"!==e.errorCode&&"LOGIN_REQUIRED"!==e.errorCode?t("#dialogModalAlertError").modal("show").find("#msg").empty().html(o.t("rr_error")+e["status-message"]):a.trigger("tbsgn","to_delete"))},error:function(e,n,i){t("#dialogModalAlertError").modal("show").find("#msg").empty().html(o.t("rr_error_refresh_try_again"))}}),s},saveAnnotation:function(e,n){var r=t.param(e),s="encrypted="+this.pebr.enc(r)+"&remote_id="+this.model.get("gbData").ssen;i.isUndefined(n)||(s+="&note="+encodeURIComponent(n)),s+="&tm=1";var l={};return t.ajax({dataType:"json",url:"remoteBookshelf.api",async:!1,type:"POST",data:s,success:function(n){void 0!==n.status&&void 0===n.errorCode?(void 0!==n.newBookAddToBSK&&n.newBookAddToBSK&&(a.trigger("taatb"),t("#book-added-to-bsk-message").show()),0===n["status-code"]&&(l=n.annots)):void 0===n.errorCode||"SESSION_TIMED_OUT"!==n.errorCode&&"LOGIN_REQUIRED"!==n.errorCode?t("#dialogModalAlertError").modal("show").find("#msg").empty().html(o.t("rr_error")+n["status-message"]):a.trigger("tbsgn",e.type)},error:function(e,n,i){t("#dialogModalAlertError").modal("show").find("#msg").empty().html(o.t("rr_error_refresh_try_again"))}}),l},postToPanel:function(t,e){if("save"===t){e.chapInfo.chapterId;var n=e.physicalPage-1,o={nAnnot:{hiliteId:i.isUndefined(e.hiliteId)?0:e.hiliteId,tint:e.tint,pageLevelNote:e.pageLevelNote,annotType:e.annotType,annotID:e.annotID,logicalPage:this.model.get("gbData").tmpLpg[n],physicalPage:e.physicalPage,startQuad:e.startQuad,labelText:e.labelText,endQuad:e.endQuad,bookMark:e.bookMark},chap:{chapId:e.chapInfo}};a.trigger("pnlAnt",o,t)}else a.trigger("pnlAnt",e,t)},usrNSignResp:function(e,n){if("LOGIN_REQUIRED"===e.errorCode)a.trigger("tbsgn","print","g");else if("LOGIN_REQUIRED_G"===e.errorCode)a.trigger("tbsgn","print","s");else if("LOGIN_REQUIRED_M"===e.errorCode)a.trigger("tbsgn","mediation_request","s");else if("NO_ACCESS_BROWSE_PRINT"===e.errorCode)t("#toolChapterDownload").attr("disabled","disabled").prop("title",o.t("rr_print_not_offered")),t("#toolPrint").attr("disabled","disabled").prop("title",o.t("rr_print_not_offered")),t("#toolChapterDownload").addClass("tool-btn-disabled"),t("#toolPrint").addClass("tool-btn-disabled");else if("NO_ACCESS_BROWSE_COPY"===e.errorCode)t("#toolCopy").attr("disabled","disabled").prop("title",o.t("rr_copy_not_offered")),t("#contextMenuPop> #contextCopy").attr("disabled","disabled").prop("title",o.t("rr_copy_not_offered")),t("#toolCopy").addClass("tool-btn-disabled");else if("EXPIRING"===e.errorCode||"REQUEST_PENDING"===e.errorCode){location.protocol,location.hostname,location.port&&location.port,location.pathname;window.location.href=s.updateQueryStringWithOutHashSupport(location.href,"ppg",t("#current-page").val())}else"DAY_REQUIRED"===e.errorCode?a.trigger("cklnpmt",e):"SHOW_PRICE"===e.errorCode?a.trigger("spcklnpmt",e):"REQUEST_REQUIRED"===e.errorCode&&a.trigger("mdreq",e)},showLoanModal:function(t){t.preventDefault(),a.trigger("cklnpmt",this.model.attributes)},showRequestModal:function(t){t.preventDefault(),a.trigger("mdreq",this.model.attributes)}})}.apply(e,o))||(t.exports=a)}).call(this,n(5))},function(t,e,n){var i,o;i=[n(7),n(0)],void 0===(o=function(t,e){"use strict";return t.Model.extend({url:function(){var t=e("#current-page").val()||this.cpTmp.gbData.ppg,n=new Date,i="page=("+t+")&zoom="+this.cpTmp.gbData.zm+"&encID="+this.cpTmp.gbData.encID+"&aMode=1&op=view";return"remoteDocServer.api?remote_id="+this.cpTmp.gbData.ssen+"&encrypted="+this.cpTmp.enc(i)+"&tm="+n.getTime()},parse:function(t,e){return void 0!==t.dcy?JSON.parse(this.cpTmp.dec(t.dcy)):t},initialize:function(t){this.cpTmp=t}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(7)],void 0===(o=function(t,e){return e.Router.extend({initialize:function(){e.history.start()},routes:{"":"reader"}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(1)],void 0===(o=function(t){"use strict";return{reader:function(t){}}}.apply(e,i))||(t.exports=o)},function(t,e,n){n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147)},function(t,e){!function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});return setTimeout(function(){n||t(i).trigger(t.support.transition.end)},e),this},t(function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery)},function(t,e){!function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.close=function(e){var i=t(this),o=i.attr("data-target");o||(o=(o=i.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,""));var a=t(o);function r(){a.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),a.length||(a=i.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(jQuery)},function(t,e){!function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.isLoading=!1};function n(n){return this.each(function(){var i=t(this),o=i.data("bs.button"),a="object"==typeof n&&n;o||i.data("bs.button",o=new e(this,a)),"toggle"==n?o.toggle():n&&o.setState(n)})}e.VERSION="3.3.4",e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",a=i.data();e+="Text",null==a.resetText&&i.data("resetText",i[o]()),setTimeout(t.proxy(function(){i[o](null==a[e]?this.options[e]:a[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=n,t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var i=t(e.target);i.hasClass("btn")||(i=i.closest(".btn")),n.call(i,"toggle"),e.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery)},function(t,e){!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};function n(n){return this.each(function(){var i=t(this),o=i.data("bs.carousel"),a=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n),r="string"==typeof n?n:a.slide;o||i.data("bs.carousel",o=new e(this,a)),"number"==typeof n?o.to(n):r?o[r]():a.interval&&o.pause().cycle()})}e.VERSION="3.3.4",e.TRANSITION_DURATION=600,e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},e.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},e.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);if(("prev"==t&&0===n||"next"==t&&n==this.$items.length-1)&&!this.options.wrap)return e;var i=(n+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(i)},e.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){if(!this.sliding)return this.slide("next")},e.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},e.prototype.slide=function(n,i){var o=this.$element.find(".item.active"),a=i||this.getItemForDirection(n,o),r=this.interval,s="next"==n?"left":"right",l=this;if(a.hasClass("active"))return this.sliding=!1;var c=a[0],d=t.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(a)]);u&&u.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(a.addClass(n),a[0].offsetWidth,o.addClass(s),a.addClass(s),o.one("bsTransitionEnd",function(){a.removeClass([n,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(e.TRANSITION_DURATION)):(o.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(p)),r&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=n,t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var o=function(e){var i,o=t(this),a=t(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(a.hasClass("carousel")){var r=t.extend({},a.data(),o.data()),s=o.attr("data-slide-to");s&&(r.interval=!1),n.call(a,r),s&&a.data("bs.carousel").to(s),e.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery)},function(t,e){!function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+n.id+'"],[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function i(n){return this.each(function(){var i=t(this),o=i.data("bs.collapse"),a=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n);!o&&a.toggle&&/show|hide/.test(n)&&(a.toggle=!1),o||i.data("bs.collapse",o=new e(this,a)),"string"==typeof n&&o[n]()})}e.VERSION="3.3.4",e.TRANSITION_DURATION=350,e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(n=o.data("bs.collapse"))&&n.transitioning)){var a=t.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),n||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[r](this.$element[0][l])}}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var n=t.Event("hide.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return o.call(this);this.$element[i](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(e.TRANSITION_DURATION)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},e.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(e,i){var o=t(i);this.addAriaAndCollapsedClass(n(o),o)},this)).end()},e.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var o=t(this);o.attr("data-target")||e.preventDefault();var a=n(o),r=a.data("bs.collapse")?"toggle":o.data();i.call(a,r)})}(jQuery)},function(t,e){!function(t){"use strict";var e=".dropdown-backdrop",n='[data-toggle="dropdown"]',i=function(e){t(e).on("click.bs.dropdown",this.toggle)};function o(i){i&&3===i.which||(t(e).remove(),t(n).each(function(){var e=t(this),n=a(e),o={relatedTarget:this};n.hasClass("open")&&(n.trigger(i=t.Event("hide.bs.dropdown",o)),i.isDefaultPrevented()||(e.attr("aria-expanded","false"),n.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function a(e){var n=e.attr("data-target");n||(n=(n=e.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}i.VERSION="3.3.4",i.prototype.toggle=function(e){var n=t(this);if(!n.is(".disabled, :disabled")){var i=a(n),r=i.hasClass("open");if(o(),!r){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",o);var s={relatedTarget:this};if(i.trigger(e=t.Event("show.bs.dropdown",s)),e.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},i.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var o=a(i),r=o.hasClass("open");if(!r&&27!=e.which||r&&27==e.which)return 27==e.which&&o.find(n).trigger("focus"),i.trigger("click");var s=" li:not(.disabled):visible a",l=o.find('[role="menu"]'+s+', [role="listbox"]'+s);if(l.length){var c=l.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),o=n.data("bs.dropdown");o||n.data("bs.dropdown",o=new i(this)),"string"==typeof e&&o[e].call(n)})},t.fn.dropdown.Constructor=i,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,i.prototype.toggle).on("keydown.bs.dropdown.data-api",n,i.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',i.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',i.prototype.keydown)}(jQuery)},function(t,e){!function(t){"use strict";var e=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function n(n,i){return this.each(function(){var o=t(this),a=o.data("bs.modal"),r=t.extend({},e.DEFAULTS,o.data(),"object"==typeof n&&n);a||o.data("bs.modal",a=new e(this,r)),"string"==typeof n?a[n](i):r.show&&a.show(i)})}e.VERSION="3.3.4",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(n){var i=this,o=t.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var a=t.Event("shown.bs.modal",{relatedTarget:n});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(e.TRANSITION_DURATION):i.$element.trigger("focus").trigger(a)}))},e.prototype.hide=function(n){n&&n.preventDefault(),n=t.Event("hide.bs.modal"),this.$element.trigger(n),this.isShown&&!n.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(n){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=t.support.transition&&o;if(this.$backdrop=t('<div class="modal-backdrop '+o+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;a?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){i.removeBackdrop(),n&&n()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):r()}else n&&n()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=n,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),o=i.attr("href"),a=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),r=a.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},a.data(),i.data());i.is("a")&&e.preventDefault(),a.one("show.bs.modal",function(t){t.isDefaultPrevented()||a.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),n.call(a,r,this)})}(jQuery)},function(t,e){!function(t){"use strict";var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};e.VERSION="3.3.4",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),a=o.length;a--;){var r=o[a];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n&&n.$tip&&n.$tip.is(":visible"))n.hoverState="in";else{if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)}},e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)},e.prototype.show=function(){var n=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!i)return;var o=this,a=this.tip(),r=this.getUID(this.type);this.setContent(),a.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&a.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(s);c&&(s=s.replace(l,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);var d=this.getPosition(),u=a[0].offsetWidth,p=a[0].offsetHeight;if(c){var h=s,f=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(f);s="bottom"==s&&d.bottom+p>g.bottom?"top":"top"==s&&d.top-p<g.top?"bottom":"right"==s&&d.right+u>g.width?"left":"left"==s&&d.left-u<g.left?"right":s,a.removeClass(h).addClass(s)}var m=this.getCalculatedOffset(s,d,u,p);this.applyPlacement(m,s);var v=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",v).emulateTransitionEnd(e.TRANSITION_DURATION):v()}},e.prototype.applyPlacement=function(e,n){var i=this.tip(),o=i[0].offsetWidth,a=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),e.top=e.top+r,e.left=e.left+s,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=a&&(e.top=e.top+a-c);var d=this.getViewportAdjustedDelta(n,e,l,c);d.left?e.left+=d.left:e.top+=d.top;var u=/top|bottom/.test(n),p=u?2*d.left-o+l:2*d.top-a+c,h=u?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(p,i[0][h],u)},e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(n){var i=this,o=t(this.$tip),a=t.Event("hide.bs."+this.type);function r(){"in"!=i.hoverState&&o.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),n&&n()}if(this.$element.trigger(a),!a.isDefaultPrevented())return o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(e.TRANSITION_DURATION):r(),this.hoverState=null,this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(e){var n=(e=e||this.$element)[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var a=i?{top:0,left:0}:e.offset(),r={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,r,s,a)},e.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var a=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-a-r.scroll,l=e.top+a-r.scroll+i;s<r.top?o.top=r.top-s:l>r.top+r.height&&(o.top=r.top+r.height-l)}else{var c=e.left-a,d=e.left+a+n;c<r.left?o.left=r.left-c:d>r.width&&(o.left=r.left+r.width-d)}return o},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),o=i.data("bs.tooltip"),a="object"==typeof n&&n;!o&&/destroy|hide/.test(n)||(o||i.data("bs.tooltip",o=new e(this,a)),"string"==typeof n&&o[n]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery)},function(t,e){!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.4",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),o=i.data("bs.popover"),a="object"==typeof n&&n;!o&&/destroy|hide/.test(n)||(o||i.data("bs.popover",o=new e(this,a)),"string"==typeof n&&o[n]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery)},function(t,e){!function(t){"use strict";function e(n,i){this.$body=t(document.body),this.$scrollElement=t(n).is(document.body)?t(window):t(n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),o=i.data("bs.scrollspy"),a="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new e(this,a)),"string"==typeof n&&o[n]()})}e.VERSION="3.3.4",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),a=/^#./.test(o)&&t(o);return a&&a.length&&a.is(":visible")&&[[a[n]().top+i,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,a=this.targets,r=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return r!=(t=a[a.length-1])&&this.activate(t);if(r&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)r!=a[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(a[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery)},function(t,e){!function(t){"use strict";var e=function(e){this.element=t(e)};function n(n){return this.each(function(){var i=t(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new e(this)),"string"==typeof n&&o[n]()})}e.VERSION="3.3.4",e.TRANSITION_DURATION=150,e.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=n.find(".active:last a"),a=t.Event("hide.bs.tab",{relatedTarget:e[0]}),r=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(a),e.trigger(r),!r.isDefaultPrevented()&&!a.isDefaultPrevented()){var s=t(i);this.activate(e.closest("li"),n),this.activate(s,s.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},e.prototype.activate=function(n,i,o){var a=i.find("> .active"),r=o&&t.support.transition&&(a.length&&a.hasClass("fade")||!!i.find("> .fade").length);function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}a.length&&r?a.one("bsTransitionEnd",s).emulateTransitionEnd(e.TRANSITION_DURATION):s(),a.removeClass("in")};var i=t.fn.tab;t.fn.tab=n,t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var o=function(e){e.preventDefault(),n.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery)},function(t,e){!function(t){"use strict";var e=function(n,i){this.options=t.extend({},e.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function n(n){return this.each(function(){var i=t(this),o=i.data("bs.affix"),a="object"==typeof n&&n;o||i.data("bs.affix",o=new e(this,a)),"string"==typeof n&&o[n]()})}e.VERSION="3.3.4",e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0,target:window},e.prototype.getState=function(t,e,n,i){var o=this.$target.scrollTop(),a=this.$element.offset(),r=this.$target.height();if(null!=n&&"top"==this.affixed)return o<n&&"top";if("bottom"==this.affixed)return null!=n?!(o+this.unpin<=a.top)&&"bottom":!(o+r<=t-i)&&"bottom";var s=null==this.affixed,l=s?o:a.top;return null!=n&&o<=n?"top":null!=i&&l+(s?r:e)>=t-i&&"bottom"},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=this.$element.height(),i=this.options.offset,o=i.top,a=i.bottom,r=t(document.body).height();"object"!=typeof i&&(a=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof a&&(a=i.bottom(this.$element));var s=this.getState(r,n,o,a);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:r-n-a})}};var i=t.fn.affix;t.fn.affix=n,t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),i=e.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),n.call(e,i)})})}(jQuery)},function(t,e,n){(function(t){var i,o;i=[n(0)],void 0===(o=function(t){var e;return window.dataLayer=window.dataLayer||[],window.dataLayer.push({"gtm.start":(new Date).getTime(),event:"gtm.js"}),t(document).ready(function(){if(void 0!==t("#ga_key").val()){var n="true"===t("#pqOne_key").val();dataLayer.push({SiteID_User:t("#ga_siteId").val(),Site_Name:t("#ga_siteName").val(),SessionID_Session:t("#ga_sId").val(),SessionID_Hit:t("#ga_sId").val(),PatID_User:t("#ga_pId").val(),SignStatus_User:t("#ga_access").val(),LoginType_User:t("#ga_lType").val(),AuthTypeHQ_User:t("#ga_aType").val(),AccessibilityMode_Session:t("#ga_aSession").val(),SubscriptionCustomer_User:t("#ga_sCType").val(),Institution_Session:t("#ga_siteName").val(),PQOne_Site:n,PQOne_Site_session:n,EBCPageTitle:t("#ga_pageTitle").val(),ReaderType_Session:"PDF",ReaderType_Hit:"PDF"}),"true"===t("#pqOne_key").val()&&dataLayer.push({PQ1EBCSessionID_Session:t("#ga_sId").val(),PQ1EBCSessionID_Hit:t("#ga_sId").val(),PQ1PQPSessionID_Session:t("#ga_pqSession").val(),PQ1PQPSessionID_Hit:t("#ga_pqSession").val()}),e=function(){window.dataLayer.apply(this)}}}),e}.apply(e,i))||(t.exports=o)}).call(this,n(149)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}]);